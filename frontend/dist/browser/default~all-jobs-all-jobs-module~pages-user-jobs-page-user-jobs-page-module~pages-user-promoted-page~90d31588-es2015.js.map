{"version":3,"sources":["./src/app/shared/utils/money-format.ts","./src/app/modules/jobs/job-preview/job-preview.module.ts","./src/app/modules/jobs/job-preview/job-preview.component.ts","./src/app/modules/jobs/job-preview/job-preview.component.html","./src/app/api/schemas/job/job-currency.enum.ts"],"names":[],"mappings":"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","file":"default~all-jobs-all-jobs-module~pages-user-jobs-page-user-jobs-page-module~pages-user-promoted-page~90d31588-es2015.js","sourcesContent":["export function formatMoney(amount: number, currency: 'RUB' | 'EUR' | 'USD' | string): string {\n  switch (currency) {\n    case 'EUR':\n      return `€${ amount }`;\n    case 'USD':\n      return `$${ amount }`;\n    case 'RUB':\n      return `${ amount } ₽`;\n    default:\n      return `${ amount } ${ currency }`;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { JobPreviewComponent } from './job-preview.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\nimport { UserInfoModule } from '@shared/modules/user-info/user-info.module';\n\n@NgModule({\n  declarations: [JobPreviewComponent],\n  imports: [\n    CommonModule,\n    UserInfoModule,\n    SharedComponentsModule,\n    SharedUiModule,\n    SharedPipesModule,\n    RouterModule,\n    CommonDirectivesModule,\n    TranslateModule.forChild()\n  ],\n  exports: [JobPreviewComponent],\n})\nexport class JobPreviewModule { }\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output, OnInit, OnDestroy } from '@angular/core';\nimport { ShowcasesService } from '@api/routes/showcases.service';\nimport { IJobView } from '@api/schemas/job/job-view.interface';\nimport { SessionService } from '@app/services/session.service';\nimport { UserDropdownService } from '@layout/shared/services/user-dropdown.service';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { formatMoney } from '@shared/utils/money-format';\nimport { takeUntil } from 'rxjs/operators';\nimport { JobsService } from '@api/routes/jobs.service';\nimport { JobCurrencyEnum } from '@api/schemas/job/job-currency.enum';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { ICreatedObject } from '@api/schemas/object/created-object.interface';\n\n@Component({\n  selector: 'app-job-preview',\n  templateUrl: './job-preview.component.html',\n  styleUrls: ['./job-preview.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class JobPreviewComponent extends AbstractComponent implements OnInit, OnDestroy {\n  @Input() public job: IJobView;\n  @Input() public isOwner: boolean;\n\n  @Output() public readonly gone: EventEmitter<void> = new EventEmitter<void>();\n  @Output() public readonly goneBookmarked: EventEmitter<[IJobView, string]> = new EventEmitter<[IJobView, string]>();\n\n  public readonly publicationStageEnum: typeof PublicationStageEnum = PublicationStageEnum;\n\n  public get salary(): string {\n    const result = [];\n    if (this.job.info.minSalary) {\n      result.push('от', formatMoney(+this.job.info.minSalary, JobCurrencyEnum[this.job.info.currency]));\n    }\n    if (this.job.info.maxSalary) {\n      result.push('до', formatMoney(+this.job.info.maxSalary, JobCurrencyEnum[this.job.info.currency]));\n    }\n\n    return result.join(' ');\n  }\n\n  constructor(\n    private readonly sessionService: SessionService,\n    private readonly jobsService: JobsService,\n    private readonly changeDetectorRef: ChangeDetectorRef,\n    private readonly showcaseService: ShowcasesService,\n    public readonly userDropdown: UserDropdownService,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.sessionService.user$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((user: IUserViewFull) => {\n      this.isOwner = user && user.meta.id === this.job.company.meta.id;\n      this.changeDetectorRef.markForCheck();\n    });\n  }\n\n  public hide(): void {\n    this.jobsService.hide$(this.job.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(this.gone);\n  }\n\n  public publish(value: boolean): void {\n    if (value) {\n      this.jobsService.publish$(this.job.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.job.info.publicationStage = PublicationStageEnum.PUBLISHED;\n        this.changeDetectorRef.markForCheck();\n      });\n    } else {\n      this.jobsService.withdraw$(this.job.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.job.info.publicationStage = PublicationStageEnum.DRAFT;\n        this.changeDetectorRef.markForCheck();\n      });\n    }\n  }\n\n  public delete(): void {\n    this.jobsService.delete$(this.job.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(this.gone);\n  }\n\n  public showcase(): void {\n    this.jobsService.showcase$(this.job.meta.id).pipe(takeUntil(this.ngOnDestroy$))\n      .subscribe((_: ICreatedObject) => this.showcaseService.navigate$(_));\n  }\n\n  public toggleBookmark(): void {\n    if (this.sessionService.loggedIn$.value) {\n      this.jobsService.bookmark$(this.job.meta.id, this.job.bookmarks.you).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.job.bookmarks.you = !this.job.bookmarks.you;\n        this.job.bookmarks.count += this.job.bookmarks.you ? 1 : -1;\n        this.changeDetectorRef.markForCheck();\n        if (!this.job.bookmarks.you) {\n          this.goneBookmarked.next([this.job, 'job']);\n        }\n      });\n    } else {\n      this.userDropdown.setShowDropdown(true);\n    }\n  }\n}\n","<header class=\"v-center margin-bottom-20\">\n    <app-user-info class=\"margin-right-20\" [user]=\"job.company\"></app-user-info>\n    <span *ngIf=\"job.info.publicationStage !== publicationStageEnum.PUBLISHED\" class=\"overline c-caption\">Не опубликовано</span>\n    <span class=\"date align-right\">{{ job.meta.updatedAt | customDate }}</span>\n</header>\n<main>\n    <h3 class=\"margin-bottom-15 fade-0\"><a [routerLink]=\"['/jobs', job.meta.id]\">{{ job.info.name }}</a></h3>\n    <h5 class=\"margin-bottom-15 fade-2\">{{ job.info.city }} {{ salary ? salary : ('COMMON.INTERVIEW_SALARY' | translate) }}</h5>\n</main>\n<footer class=\"v-center\">\n    <div class=\"v-center event-stats\">\n        <div class=\"v-center margin-right-20\">\n            <svg name=\"bookmark\" class=\"margin-right-4 icon f-gray clickable\" [class.active]=\"job.bookmarks && job.bookmarks.you\" (click)=\"toggleBookmark()\"></svg>\n        </div>\n    </div>\n    <a class=\"align-right subtitle-2 fade-2 v-center\"><a [routerLink]=\"['/jobs', job.meta.id]\">{{ 'COMMON.TO_THE_VACANCY' | translate }}</a>\n        <svg name=\"chevron/right\" class=\"f-gray\"></svg>\n    </a>\n</footer>\n","export enum JobCurrencyEnum {\n    RUB = 'RUB',\n    USD = 'USD',\n    EUR = 'EUR',\n}\n"],"sourceRoot":"webpack:///"}