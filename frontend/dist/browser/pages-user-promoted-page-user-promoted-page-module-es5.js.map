{"version":3,"sources":["webpack:///src/app/modules/user/pages/user-promoted-page/user-promoted-page.module.ts","webpack:///src/app/shared/functions/fetch-articles-with-topics.function.ts","webpack:///src/app/modules/user/pages/user-promoted-page/user-promoted-page-routing.module.ts","webpack:///src/app/modules/user/pages/user-promoted-page/promoted-view-item-type.enum.ts","webpack:///src/app/modules/user/pages/user-promoted-page/user-promoted-page.component.ts","webpack:///src/app/modules/user/pages/user-promoted-page/user-promoted-page.component.html"],"names":["UserPromotedPageModule","declarations","imports","fetchArticlesWithTopics$","page","topicsService","topics","content","forEach","article","length","push","getMultiple$","pipe","topicsRet","find","x","meta","id","routes","path","component","data","query","bookmark","resolve","UserPromotedPageRoutingModule","forChild","exports","PromotedViewItemTypeEnum","UserPromotedPageComponent","activatedRoute","sessionService","feedService","usersService","sidebarWrapperService","eventsService","jobsService","promotedViewItemTypeEnum","pinned","items","articles","events","jobs","isFetching","ngOnInit","setTimeout","params$","next","trending","navigation","live","showSidebar","id$","paramMap","getSingle$","user","ngOnDestroy$","userId$","subscribe","currentId","sessionId","isMe","user$","options","bookmarked","fetchContent","onScroll","window","innerHeight","scrollY","document","body","offsetHeight","fetch","totalPages","feedRequest$","res","getBookmarked$","assignPageable","updateItems","sortItems","sort","a","b","type","ARTICLE","item","status","publishedAt","info","key","total","splice","indexOf","element","EVENT","JOB","remove","removeBookmarked","findIndex","itemIter","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-user-promoted-page-user-promoted-page-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UserPromotedPageRoutingModule } from './user-promoted-page-routing.module';\nimport { UserPromotedPageComponent } from './user-promoted-page.component';\nimport { RangesModule } from '@shared/modules/ranges/ranges.module';\nimport { UserHeaderModule } from '@modules/user/user-header/user-header.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { FeedModule } from '@shared/modules/feed/feed.module';\nimport { EventPreviewModule } from '@modules/events/event-preview/event-preview.module';\nimport { JobPreviewModule } from '@modules/jobs/job-preview/job-preview.module';\n\n\n@NgModule({\n  declarations: [UserPromotedPageComponent],\n  imports: [\n    CommonModule,\n    UserPromotedPageRoutingModule,\n    RangesModule,\n    UserHeaderModule,\n    SharedComponentsModule,\n    FeedModule,\n    EventPreviewModule,\n    JobPreviewModule\n  ]\n})\nexport class UserPromotedPageModule { }\n","import { Observable, of } from 'rxjs';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { map, defaultIfEmpty } from 'rxjs/operators';\nimport { TopicsService } from '@api/routes/topics.service';\n\nexport function fetchArticlesWithTopics$(\n  page: IPageResponse<IArticleView>,\n  topicsService: TopicsService\n): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    const topics: number[] = [];\n    page.content.forEach((article: IArticleView) => {\n        if (article.topics.length > 0) {\n            topics.push(article.topics[0]);\n        }\n    });\n    return page.content.length > 0 ? topicsService.getMultiple$(topics).pipe(defaultIfEmpty([]), map((topicsRet: ITopicViewFull[]) => {\n        const content: [IArticleView, ITopicView][] = [];\n        page.content.forEach((article: IArticleView) => {\n            if (article.topics.length > 0) {\n                content.push([article, topicsRet.find((x: ITopicViewFull) => x.meta.id === article.topics[0]) as ITopicView]);\n            } else {\n                content.push([article, null]);\n            }\n        });\n        return { ...page, content };\n    })) : of({ ...page, content: [] });\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UserPromotedPageComponent } from './user-promoted-page.component';\nimport { UsersResolverService } from '@shared/services/users-resolver.service';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserPromotedPageComponent,\n    data: {\n      query: {\n        bookmark: true,\n      },\n    },\n    resolve: { data: UsersResolverService }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UserPromotedPageRoutingModule { }\n","export enum PromotedViewItemTypeEnum {\n    EVENT = 'EVENT',\n    JOB = 'JOB',\n    ARTICLE = 'ARTICLE'\n}\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { SessionService } from '@app/services/session.service';\nimport { FeedService } from '@api/routes/feed.service';\nimport { UsersService } from '@api/routes/users.service';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { EventsService } from '@api/routes/events.service';\nimport { JobsService } from '@api/routes/jobs.service';\nimport { IJobView } from '@api/schemas/job/job-view.interface';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { Observable, combineLatest, of } from 'rxjs';\nimport { idMap } from '@shared/utils/id-map.operator';\nimport { switchMap, map, takeUntil, tap } from 'rxjs/operators';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { fetchArticlesWithTopics$ } from '@shared/functions/fetch-articles-with-topics.function';\nimport { IPromotedItems } from './promoted-item.interface';\nimport { PromotedViewItemTypeEnum } from './promoted-view-item-type.enum';\nimport { IPromotedViewItem } from './promoted-view-item.interface';\nimport { IUserPostListRouteData } from './user-post-list-route-data.interface';\n\n\n@Component({\n  selector: 'app-user-promoted-page',\n  templateUrl: './user-promoted-page.component.html',\n  styleUrls: ['./user-promoted-page.component.scss']\n})\nexport class UserPromotedPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  public readonly promotedViewItemTypeEnum: typeof PromotedViewItemTypeEnum = PromotedViewItemTypeEnum;\n\n  public pinned: [IArticleView, ITopicView] = null;\n  public items: IPromotedViewItem[] = [];\n  public options: [IUserPostListRouteData, IUserViewFull, number];\n  public data: IPromotedItems = {\n    articles: null,\n    events: null,\n    jobs: null\n  };\n  public page = 0;\n  public id: number;\n  public isFetching = false;\n  public isMe: boolean;\n\n  constructor(\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly sessionService: SessionService,\n    private readonly feedService: FeedService,\n    private readonly usersService: UsersService,\n    private readonly topicsService: TopicsService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly eventsService: EventsService,\n    private readonly jobsService: JobsService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({\n        article: false,\n        trending: true,\n        navigation: true,\n        live: false,\n        showSidebar: true\n      });\n    });\n\n    const id$: Observable<number> = this.activatedRoute.paramMap.pipe(\n      idMap(),\n      switchMap((id: string | number) => this.usersService.getSingle$(id)),\n      map((user: IUserViewFull) => user.meta.id),\n      tap((id: number) => this.id = id),\n      takeUntil(this.ngOnDestroy$),\n    );\n\n    combineLatest([id$, this.sessionService.userId$]).pipe(\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(([currentId, sessionId]: [number, number]) => {\n      this.isMe = currentId === sessionId;\n    });\n\n    combineLatest([this.activatedRoute.data as Observable<IUserPostListRouteData>, this.sessionService.user$, id$]).pipe(\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe((options: [IUserPostListRouteData, IUserViewFull, number]) => {\n      this.items = [];\n      this.options = options;\n      this.options[0].query.bookmarked = this.options[2];\n      this.fetchContent();\n    });\n  }\n\n  @HostListener('window:scroll', []) public onScroll(): void {\n    if (window.innerHeight + window.scrollY + 20 >= document.body.offsetHeight) {\n      this.fetchContent();\n    }\n  }\n\n  private fetchContent(): void {\n    if (!this.isFetching) {\n      this.isFetching = true;\n      const fetch: any[] = [];\n      if (this.page === 0 || this.data?.articles?.totalPages > this.page) {\n        fetch.push(this.feedService.feedRequest$({ ...this.options[0].query, page: this.page }).pipe(\n          switchMap((res: IPageResponse<IArticleView>) => fetchArticlesWithTopics$(res, this.topicsService))\n        ));\n      } else {\n        fetch.push(of(null));\n      }\n      if (this.page === 0 || this.data?.events?.totalPages > this.page) {\n        fetch.push(this.eventsService.getBookmarked$(this.id, this.page));\n      } else {\n        fetch.push(of(null));\n      }\n      if (this.page === 0 || this.data?.jobs?.totalPages > this.page) {\n        fetch.push(this.jobsService.getBookmarked$(this.id, this.page));\n      } else {\n        fetch.push(of(null));\n      }\n      combineLatest(fetch).pipe(takeUntil(this.ngOnDestroy$))\n        .subscribe(([articles, events, jobs]: [\n          IPageResponse<[IArticleView, ITopicView]>,\n          IPageResponse<IEventView>,\n          IPageResponse<IJobView>\n        ]) => {\n          if (articles) {\n            this.assignPageable('articles', articles);\n          }\n          if (events) {\n            this.assignPageable('events', events);\n          }\n          if (jobs) {\n            this.assignPageable('jobs', jobs);\n          }\n          if (jobs || events || articles) {\n            this.updateItems();\n          }\n          this.page++;\n          this.isFetching = false;\n      });\n    }\n  }\n\n  private sortItems(items: IPromotedViewItem[]): IPromotedViewItem[] {\n    // tslint:disable:max-line-length\n    return items.sort((a: IPromotedViewItem, b: IPromotedViewItem) => {\n      if ((a.type === PromotedViewItemTypeEnum.ARTICLE ? a.item[0].status.publishedAt : (a.item as IJobView | IEventView).info.publishedAt)\n        < (b.type === PromotedViewItemTypeEnum.ARTICLE ? b.item[0].status.publishedAt : (b.item as IJobView | IEventView).info.publishedAt)) { return 1; }\n      if ((a.type === PromotedViewItemTypeEnum.ARTICLE ? a.item[0].status.publishedAt : (a.item as IJobView | IEventView).info.publishedAt)\n        > (b.type === PromotedViewItemTypeEnum.ARTICLE ? b.item[0].status.publishedAt : (b.item as IJobView | IEventView).info.publishedAt)) { return -1; }\n      return 0;\n    });\n    // tslint:enable:max-line-length\n  }\n\n  private assignPageable(key: string, data: IPageResponse<any>): void {\n    if (this.data[key]) {\n      this.data[key].content.push(...data.content);\n      this.data[key].page = data.page;\n      this.data[key].total = data.total;\n      this.data[key].totalPages = data.totalPages;\n    } else {\n      this.data[key] = data;\n    }\n  }\n\n  public updateItems(): void {\n    let items: IPromotedViewItem[] = [];\n    if (this.data.articles.content[0] && this.data.articles.content[0][0].pinned) {\n      this.pinned = this.data.articles.content[0];\n      this.data.articles.content.splice(this.data.articles.content.indexOf(this.data.articles.content[0]), 1);\n    }\n    this.data.articles.content.forEach((element: [IArticleView, ITopicView]) => {\n      items.push({ item: element, type: PromotedViewItemTypeEnum.ARTICLE });\n    });\n    this.data.events.content.forEach((element: IEventView) => {\n      items.push({ item: element, type: PromotedViewItemTypeEnum.EVENT });\n    });\n    this.data.jobs.content.forEach((element: IJobView) => {\n      items.push({ item: element, type: PromotedViewItemTypeEnum.JOB });\n    });\n    items = this.sortItems(items);\n    this.items = items;\n  }\n\n  public remove(item: any, type: string): void {\n    this.data[type].content.splice(this.data[type].content.indexOf(item), 1);\n    this.updateItems();\n  }\n\n  public removeBookmarked(item: IArticleView | IEventView | IJobView, type: 'article' | 'job' | 'event'): void {\n    if  (this.isMe) {\n      if  (type === 'article') {\n        this.items.splice(this.items.findIndex(\n          (itemIter: IPromotedViewItem) => itemIter.type === PromotedViewItemTypeEnum.ARTICLE && itemIter.item[0].meta.id === item.meta.id\n        ), 1);\n      }\n      if  (type === 'job') {\n        this.items.splice(this.items.findIndex(\n          (itemIter: IPromotedViewItem) => itemIter.type === PromotedViewItemTypeEnum.JOB && (itemIter.item as any).meta.id === item.meta.id\n        ), 1);\n      }\n      if  (type === 'event') {\n        this.items.splice(this.items.findIndex(\n          (itemIter: IPromotedViewItem) => itemIter.type === PromotedViewItemTypeEnum.EVENT\n            && (itemIter.item as any).meta.id === item.meta.id\n        ), 1);\n      }\n    }\n  }\n}\n","<app-user-header></app-user-header>\n\n<ul *ngIf=\"pinned\" class=\"block-card item-space-20\">\n    <li>\n        <app-feed-article-view [options]=\"{ pinnedMark: true, pictureOn: true, menuOn: true }\" \n                               [data]=\"pinned[0]\" \n                               [topic]=\"pinned[1]\" \n                               (pinned)=\"pinned[0].pinned = false; data.articles.content.push(pinned); updateItems(); pinned=$event;\">\n        </app-feed-article-view>\n    </li>\n</ul>\n<div style=\"margin-bottom: 50px;\"></div>\n\n<ul class=\"block-card item-space-20\">\n    <li *ngFor=\"let item of items; let i = index\" [ngSwitch]=\"item.type\">\n        <app-feed-article-view *ngSwitchCase=\"promotedViewItemTypeEnum.ARTICLE\"\n                               [data]=\"item.item[0]\"\n                               [topic]=\"item.item[1]\"\n                               [options]=\"{ pictureOn: true, menuOn: true }\"\n                               (pinned)=\"pinned=$event; remove(item.item, 'articles'); pinned[0].pinned = true;\"\n                               (goneBookmarked)=\"removeBookmarked($event[0], $event[1])\"\n                               (gone)=\"remove(item.item, 'articles')\">\n        </app-feed-article-view>\n        <app-event-preview *ngSwitchCase=\"promotedViewItemTypeEnum.EVENT\"\n                           [event]=\"item.item\"\n                           (goneBookmarked)=\"removeBookmarked($event[0], $event[1])\"\n                           (gone)=\"remove(item.item, 'events')\">\n        </app-event-preview>\n        <app-job-preview *ngSwitchCase=\"promotedViewItemTypeEnum.JOB\"\n                         [job]=\"item.item\"\n                         (goneBookmarked)=\"removeBookmarked($event[0], $event[1])\"\n                         (gone)=\"remove(item.item, 'jobs')\">\n        </app-job-preview>\n    </li>\n</ul>\n"]}