{"version":3,"sources":["webpack:///src/app/modules/events/all-events/all-events.module.ts","webpack:///src/app/shared/classes/pageable-conetnt.class.ts","webpack:///src/app/modules/events/all-events/all-events-routing.module.ts","webpack:///src/app/modules/events/all-events/all-events-page.component.ts","webpack:///src/app/modules/events/all-events/all-events-page.component.html","webpack:///src/app/modules/events/all-events/event-list/event-filters.const.ts","webpack:///src/app/modules/events/all-events/event-list/event-list.component.ts","webpack:///src/app/modules/events/all-events/event-list/event-list.component.html"],"names":["AllEventsModule","declarations","imports","exports","NO_CONTENT","Symbol","PageableContent","fetchNextFn$","options","isFetching$","content$","end$","content","page","totalPages","fetchCommand$","options$","pipe","_","subscribe","fetchNextPage","fetch","next","reset$","hard","it","splice","length","setOptionsWithReset$","value","response","push","error","AllEventsRoutingModule","forChild","path","pathMatch","component","AllEventsPageComponent","showcaseService","showcaseEBS","sidebarWrapperService","ngOnInit","setTimeout","params$","article","trending","navigation","live","showSidebar","showcase","create$","res","data","info","url","title","subtitle","patch$","id","setId","ngOnDestroy$","toggle","selector","templateUrl","styleUrls","eventFilters","translateService","text","instant","EXHIBITIONS","TRAINING","REGATTAS","FLOTILLAS","PRESENTATIONS","CONFERENCES","FORUMS","OTHER","EventListComponent","sessionService","eventsService","onRangeOrFilter$","selectedFilter$","EVENT_FILTERS","pageable","fetchPageFn$","bind","events","filters","user$","get$","stages","PUBLISHED","types","Object","keys","map","key","after","Date","now","filterEvent","filter","rangeEvent","remove","event","indexOf"],"mappings":"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","file":"all-events-all-events-module-es5.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { EventPreviewModule } from '../event-preview/event-preview.module';\nimport { AllEventsPageComponent } from './all-events-page.component';\nimport { AllEventsRoutingModule } from './all-events-routing.module';\nimport { EventListComponent } from './event-list/event-list.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\nimport { FiltersModule } from '@shared/modules/filters/filters.module';\n\n@NgModule({\n  declarations: [AllEventsPageComponent, EventListComponent],\n  imports: [\n    AllEventsRoutingModule,\n    CommonModule,\n    EventPreviewModule,\n    FiltersModule,\n    CommonDirectivesModule,\n    TranslateModule,\n    SharedUiModule,\n    SharedComponentsModule\n  ],\n  exports: [AllEventsPageComponent],\n})\nexport class AllEventsModule {}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AllEventsPageComponent } from './all-events-page.component';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        pathMatch: 'full',\n        component: AllEventsPageComponent,\n      },\n    ]),\n  ],\n  exports: [RouterModule],\n})\nexport class AllEventsRoutingModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ShowcasesService } from '@api/routes/showcases.service';\nimport { IShowcasePatch } from '@api/schemas/showcase/showcase-patch.interface';\nimport { ShowcaseEditBlockService } from '@layout/sidebar-wrapper/live-content/showcase-edit-block.service';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { ICreatedObject } from '@api/schemas/object/created-object.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\n\n\n@Component({\n  selector: 'app-all-events-page',\n  templateUrl: './all-events-page.component.html',\n  styleUrls: ['./all-events-page.component.scss'],\n})\nexport class AllEventsPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  constructor(\n    private readonly showcaseService: ShowcasesService,\n    private readonly showcaseEBS: ShowcaseEditBlockService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n  }\n\n  public showcase(): void {\n    this.showcaseService.create$().pipe(\n      switchMap((res: ICreatedObject) => {\n        const data: IShowcasePatch = {\n          info: {\n            url: 'https://ru.yachtsmanjournal.com/events',\n            title: 'Все мероприятия',\n            subtitle: 'Перейти ко всем мероприятиям',\n          },\n        };\n        return this.showcaseService.patch$(res.id, data).pipe(tap(() => {\n          this.showcaseEBS.setId(res.id);\n        }));\n      }),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(() => {\n      this.showcaseEBS.toggle();\n    });\n  }\n}\n","<section class=\"all-events\">\n  <section class=\"tag-card\">\n    <app-ui-card [shadow]=\"false\">\n      <div class=\"current-tag\">\n        <span>{{'COMMON.EVENT_' | translate}}</span>\n        <app-ui-dots-menu *appRoleGuard=\"'EDITOR$'\">\n          <app-ui-dots-menu-item *appRoleGuard=\"'EDITOR$'\" icon=\"star\" [text]=\"'COMMON.PLACE_AT_DISPLAY_WINDOW' | translate\" (click)=\"showcase()\">\n          </app-ui-dots-menu-item>\n        </app-ui-dots-menu>\n      </div>\n    </app-ui-card>\n  </section>\n\n  <app-event-list></app-event-list>\n</section>\n","import { TranslateService } from '@ngx-translate/core';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\n\nexport const eventFilters = (translateService: TranslateService): IToggleItem<EventFiltersEnum, IEventQuery>[] => {\n    return [\n        {\n            id: 0,\n            text: translateService.instant('COMMON.ALL'),\n            data: null,\n        },\n        {\n            id: 1,\n            text: translateService.instant('COMMON.EXHIBITS'),\n            data: EventFiltersEnum.EXHIBITIONS,\n        },\n        {\n            id: 2,\n            text: translateService.instant('COMMON.EDUCATION'),\n            data: EventFiltersEnum.TRAINING,\n        },\n        {\n            id: 3,\n            text: translateService.instant('COMMON.REGATTA_'),\n            data: EventFiltersEnum.REGATTAS,\n        },\n        {\n            id: 4,\n            text: translateService.instant('COMMON.FLEET'),\n            data: EventFiltersEnum.FLOTILLAS,\n        },\n        {\n            id: 5,\n            text: translateService.instant('COMMON.PRESENTATIONS'),\n            data: EventFiltersEnum.PRESENTATIONS,\n        },\n        {\n            id: 6,\n            text: translateService.instant('COMMON.PRESS-CONFERENCES'),\n            data: EventFiltersEnum.CONFERENCES,\n        },\n        {\n            id: 7,\n            text: 'Конференции',\n            data: EventFiltersEnum.FORUMS,\n        },\n        {\n            id: 8,\n            text: translateService.instant('COMMON.OTHER'),\n            data: EventFiltersEnum.OTHER,\n        },\n    ];\n};\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { BehaviorSubject, combineLatest, Subject, throwError, Observable } from 'rxjs';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { PageableContent, NO_CONTENT } from '@shared/classes/pageable-conetnt.class';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { SessionService } from '@app/services/session.service';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { eventFilters } from './event-filters.const';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { EventsService } from '@api/routes/events.service';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\n\n@Component({\n  selector: 'app-event-list',\n  templateUrl: './event-list.component.html',\n  styleUrls: ['./event-list.component.scss'],\n})\nexport class EventListComponent extends AbstractComponent implements OnInit, OnDestroy {\n  private readonly onRangeOrFilter$: Subject<void> = new Subject();\n  private readonly selectedFilter$: BehaviorSubject<EventFiltersEnum> = new BehaviorSubject<EventFiltersEnum>(null);\n\n  public readonly EVENT_FILTERS: IToggleItem<EventFiltersEnum, IEventQuery>[] = eventFilters(this.translateService);\n  public readonly pageable: PageableContent<IEventView, [IUserViewFull, EventFiltersEnum]> =\n    new PageableContent<IEventView, [IUserViewFull, EventFiltersEnum]>(this.fetchPageFn$.bind(this), null);\n\n  public events: IEventView[] = [];\n  public filters = this.EVENT_FILTERS;\n\n  constructor(\n    private sessionService: SessionService,\n    private eventsService: EventsService,\n    private readonly translateService: TranslateService,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.pageable.content$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((content: IEventView[]) => {\n      this.events.push(...content);\n    });\n    combineLatest([this.sessionService.user$, this.selectedFilter$])\n      .pipe(\n        tap((options: [IUserViewFull, EventFiltersEnum]) => {\n          this.events.splice(0, this.events.length);\n          this.pageable.options$.next(options);\n        }),\n        switchMap(() => this.pageable.reset$()),\n        takeUntil(this.ngOnDestroy$),\n      )\n      .subscribe(() => {\n        this.pageable.fetch();\n      });\n  }\n\n  private fetchPageFn$(page: number, options: [IUserViewFull, EventFiltersEnum] | null): Observable<IPageResponse<IEventView>> {\n    if (options === null) {\n      return throwError(NO_CONTENT);\n    }\n    return this.eventsService.get$(page, {\n      stages: [PublicationStageEnum.PUBLISHED],\n      types: options[1] ? [Object.keys(EventFiltersEnum).map((key: string) => EventFiltersEnum[key as any])[options[1]] as any] : [],\n      after: Date.now(),\n    });\n  }\n\n  public filterEvent(filter: IToggleItem<EventFiltersEnum>): void {\n    this.selectedFilter$.next(filter.data);\n    this.onRangeOrFilter$.next();\n  }\n\n  public rangeEvent(): void {\n    this.onRangeOrFilter$.next();\n  }\n\n  public remove(event: IEventView): void {\n    this.events.splice(this.events.indexOf(event), 1);\n  }\n}\n","<app-filters [filters]=\"'COMMON.EVENT_FILTERS' | translate\" (toggleFilter)=\"filterEvent($any($event))\"></app-filters>\n<ul class=\"block-card item-space-20\">\n  <li *ngFor=\"let event of events\" class=\"with-border\">\n    <app-event-preview [event]=\"event\" (gone)=\"remove(event)\"></app-event-preview>\n  </li>\n</ul>\n\n<app-pagination [pageable]=\"pageable\" [fireFirstPage]=\"false\"></app-pagination>\n"]}