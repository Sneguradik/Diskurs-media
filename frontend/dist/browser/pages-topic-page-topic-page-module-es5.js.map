{"version":3,"sources":["webpack:///src/app/modules/topics/pages/topic-page/topic-page.module.ts","webpack:///src/app/shared/services/topics-resolver.service.ts","webpack:///src/app/shared/functions/fetch-articles-with-topics.function.ts","webpack:///src/app/modules/topics/pages/topic-page/topic-page-routing.module.ts","webpack:///src/app/shared/classes/pageable-conetnt.class.ts","webpack:///src/app/modules/topics/pages/topic-page/topic-page.component.ts","webpack:///src/app/modules/topics/pages/topic-page/topic-page.component.html"],"names":["TopicPageModule","forChild","declarations","imports","TopicsResolverService","topicsService","router","resolve","route","getOne$","params","id","pipe","providedIn","fetchArticlesWithTopics$","page","topics","content","forEach","article","length","push","getMultiple$","topicsRet","find","x","meta","routes","path","component","data","feed","TopicPageRoutingModule","exports","NO_CONTENT","Symbol","PageableContent","fetchNextFn$","options","isFetching$","content$","end$","totalPages","fetchCommand$","options$","_","subscribe","fetchNextPage","fetch","next","reset$","hard","it","splice","setOptionsWithReset$","value","response","error","BarItemEnum","TopicPageComponent","sessionService","activatedRoute","feedService","sidebarWrapperService","dynamicMetaTagsService","headerStatsSyncService","platformService","pageable","fetch$","bind","barItem$","PUBLICATIONS","barItems","id$","ngOnInit","setTimeout","params$","trending","navigation","live","showSidebar","initOptions","subEvent$","type","topic","status","subscribers","you","ngOnDestroy$","isServer","snapshot","ngOnDestroy","setToDefault","paramMap","get","idNum$","promotedCount$","count$","list","user$","opts","getMainData","feedRequest$","undefined","total","metaInfo$","title","info","name","tags","property","description","picture","url","subFunc","hidden","hide$","subscribe$","switchBar","barItem","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-topic-page-topic-page-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TopicPageRoutingModule } from './topic-page-routing.module';\nimport { TopicPageComponent } from './topic-page.component';\nimport { SvgModule } from '@shared/modules/svg/svg.module';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { InfoHeaderModule } from '@shared/ui/info-header/info-header.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { FeedModule } from '@shared/modules/feed/feed.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\n\n\n@NgModule({\n  declarations: [TopicPageComponent],\n  imports: [\n    CommonModule,\n    TopicPageRoutingModule,\n    SvgModule,\n    SharedPipesModule,\n    SharedUiModule,\n    TranslateModule.forChild(),\n    InfoHeaderModule,\n    SharedComponentsModule,\n    FeedModule,\n    CommonDirectivesModule\n  ]\n})\nexport class TopicPageModule { }\n","import { Injectable } from '@angular/core';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { Resolve, ActivatedRouteSnapshot, Router } from '@angular/router';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { Observable } from 'rxjs';\nimport { notFound } from '@shared/utils/not-found.operator';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TopicsResolverService implements Resolve<ITopicViewFull> {\n  constructor(\n    private readonly topicsService: TopicsService,\n    private readonly router: Router\n  ) { }\n\n  resolve(route: ActivatedRouteSnapshot): Observable<ITopicViewFull> {\n    return this.topicsService.getOne$(route.params.id).pipe(notFound(this.router));\n  }\n}\n","import { Observable, of } from 'rxjs';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { map, defaultIfEmpty } from 'rxjs/operators';\nimport { TopicsService } from '@api/routes/topics.service';\n\nexport function fetchArticlesWithTopics$(\n  page: IPageResponse<IArticleView>,\n  topicsService: TopicsService\n): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    const topics: number[] = [];\n    page.content.forEach((article: IArticleView) => {\n        if (article.topics.length > 0) {\n            topics.push(article.topics[0]);\n        }\n    });\n    return page.content.length > 0 ? topicsService.getMultiple$(topics).pipe(defaultIfEmpty([]), map((topicsRet: ITopicViewFull[]) => {\n        const content: [IArticleView, ITopicView][] = [];\n        page.content.forEach((article: IArticleView) => {\n            if (article.topics.length > 0) {\n                content.push([article, topicsRet.find((x: ITopicViewFull) => x.meta.id === article.topics[0]) as ITopicView]);\n            } else {\n                content.push([article, null]);\n            }\n        });\n        return { ...page, content };\n    })) : of({ ...page, content: [] });\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { TopicPageComponent } from './topic-page.component';\nimport { TopicsResolverService } from '@shared/services/topics-resolver.service';\nimport { FeedResolverService } from '@shared/services/feed-resolver.service';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TopicPageComponent,\n    resolve: { data: TopicsResolverService, feed: FeedResolverService }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TopicPageRoutingModule { }\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { PageableContent } from '@shared/classes/pageable-conetnt.class';\nimport { Observable, BehaviorSubject, of, combineLatest, ReplaySubject } from 'rxjs';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { SessionService } from '@app/services/session.service';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { FeedService } from '@api/routes/feed.service';\nimport { takeUntil, map, catchError, switchMap, tap, filter } from 'rxjs/operators';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { fetchArticlesWithTopics$ } from '@shared/functions/fetch-articles-with-topics.function';\nimport { DynamicMetaTagsService } from '@layout/dynamic-meta-tags/dynamic-meta-tags.service';\nimport { environment } from '@env';\nimport { HeaderStatsSyncService } from '@layout/shared/services/header-stats-sync.service';\nimport { PlatformService } from '@shared/services/platform.service';\n\nenum BarItemEnum {\n  PUBLICATIONS = 'publications',\n  FAVORITES = 'favorites',\n  INFO = 'info',\n}\n\ntype PageableOptions = [number, IUserViewFull | null, BarItemEnum];\n\n@Component({\n  selector: 'app-topic-page',\n  templateUrl: './topic-page.component.html',\n  styleUrls: ['./topic-page.component.scss']\n})\nexport class TopicPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  public readonly pageable: PageableContent<[IArticleView, ITopicView], PageableOptions> =\n    new PageableContent<[IArticleView, ITopicView], PageableOptions>(this.fetch$.bind(this));\n  public readonly barItem$: BehaviorSubject<BarItemEnum> = new BehaviorSubject<BarItemEnum>(BarItemEnum.PUBLICATIONS);\n  public readonly barItems: typeof BarItemEnum = BarItemEnum;\n  public readonly id$: ReplaySubject<number | string> = new ReplaySubject<number | string>(1);\n\n  public topic: ITopicViewFull;\n  public promotedCount$: Observable<number>;\n  public idNum$: Observable<number>;\n\n  constructor(\n    private readonly topicsService: TopicsService,\n    private readonly sessionService: SessionService,\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly feedService: FeedService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly dynamicMetaTagsService: DynamicMetaTagsService,\n    private readonly router: Router,\n    private readonly headerStatsSyncService: HeaderStatsSyncService,\n    private readonly platformService: PlatformService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n    this.initOptions();\n    this.headerStatsSyncService.subEvent$.pipe(\n      filter(([type, id, ]: ['topic' | 'company', number, boolean]) => type === 'topic' && id === this.topic.meta.id),\n      tap(([, , status]: ['topic' | 'company', number, boolean]) => this.topic.subscribers.you = status),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n\n    if (this.platformService.isServer) {\n      this.pageable.content = this.activatedRoute.snapshot.data.feed;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.dynamicMetaTagsService.setToDefault();\n    super.ngOnDestroy();\n  }\n\n  private initOptions(): void {\n    this.topic = this.activatedRoute.snapshot.data.data;\n    this.activatedRoute.paramMap.pipe(\n      map((_: ParamMap) => _.get('id')),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe(this.id$);\n    this.idNum$ = this.id$.pipe(\n      switchMap((id: string | number) => this.topicsService.getOne$(id)),\n      tap((_: ITopicViewFull) => this.topic = _),\n      map((_: any) => _.meta.id),\n      catchError(() => of(null))\n    );\n    this.promotedCount$ = this.idNum$.pipe(switchMap((id: number) => this.feedService.count$({ list: 'default', topic: id })));\n\n    const options$ = combineLatest([this.idNum$, this.sessionService.user$, this.barItem$]);\n\n    options$.pipe(\n      switchMap((opts: [number, IUserViewFull, BarItemEnum]) => this.pageable.setOptionsWithReset$(opts)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n\n    this.getMainData();\n  }\n\n  private fetch$(page: number, options: PageableOptions): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    return options\n      ? this.feedService.feedRequest$({\n          page,\n          topic: options[0],\n          list: options[2] === 'favorites' ? 'default' : undefined,\n        }).pipe(switchMap((_: IPageResponse<IArticleView>) => fetchArticlesWithTopics$(_, this.topicsService)))\n      : of({ page: -1, total: 1, totalPages: 1, content: [] });\n  }\n\n  private getMainData(): void {\n    this.dynamicMetaTagsService.metaInfo$.next({\n      title: this.topic.info.name,\n      tags: [\n        { property: 'og:title', content: this.topic.info.name },\n        { name: 'description', content: this.topic.info.description },\n        { property: 'og:description', content: this.topic.info.description },\n        { property: 'og:image', content: this.topic.info.picture },\n        { property: 'og:url', content: environment.url + this.router.url },\n        { property: 'og:type', content: 'website' },\n        { property: 'og:site_name', content: 'Diskurs.Media' },\n        { name: 'twitter:card', content: 'summary' },\n        { name: 'twitter:title', content: this.topic.info.name },\n        { name: 'twitter:description', content: this.topic.info.description },\n        { name: 'twitter:image', content: this.topic.info.picture }\n      ]\n    });\n  }\n\n  public subFunc(topic: ITopicViewFull): void {\n    if (topic.hidden) {\n      this.topicsService.hide$(topic.meta.id, true).subscribe();\n    }\n    this.topicsService.subscribe$(\n      topic.meta.id,\n      topic.subscribers.you\n    ).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      topic.subscribers.you = !topic.subscribers.you;\n      this.headerStatsSyncService.subEvent$.next(['topic', topic.meta.id, topic.subscribers.you]);\n    });\n  }\n\n  public switchBar(barItem: BarItemEnum): void {\n    this.barItem$.next(barItem);\n  }\n}\n","<ng-container *ngIf=\"topic\">\n    <app-ui-info-header\n        style=\"margin-bottom: 20px;\"\n        [bgImage]=\"topic.profile.cover\"\n        [profileImage]=\"topic.info.picture\"\n        [profileText]=\"topic.info.name\"\n        [subscribed]=\"topic.subscribers.you\"\n        (subscribe)=\"subFunc(topic)\">\n        <div class=\"info-header-name\">{{ topic.info.name }}</div>\n        <div class=\"info-header-name-small\">{{ topic.info.name }}</div>\n        <div class=\"info-header-down\">\n            <div class=\"subs flex-item\">\n                <span class=\"fade-1 subtitle-1 font-1\">{{ 'COMMON.SUBSCRIBERS' | translate }}</span>\n                <span class=\"fade-1 subtitle-1 font-1 blue\" style=\"margin-left: 3px\">{{ topic.subscribers.count }}</span>\n            </div>\n            <app-action-menu-topic *appLoggedIn class=\"flex-item\" [data]=\"topic\"></app-action-menu-topic>\n        </div>\n        <div class=\"info-header-down-small\">\n            <div class=\"subs flex-item\">\n                <span class=\"fade-1 subtitle-1 font-1 blue\">Интересы</span>\n            </div>\n            <div class=\"subs flex-item\">\n                <span class=\"fade-1 subtitle-1 font-1\">{{ 'COMMON.SUBSCRIBERS' | translate }}</span>\n                <span class=\"fade-1 subtitle-1 font-1 blue\" style=\"margin-left: 3px\">{{ topic.subscribers.count }}</span>\n            </div>\n            <app-action-menu-topic *appLoggedIn class=\"flex-item\" [data]=\"topic\"></app-action-menu-topic>\n        </div>\n        <div class=\"info-header-desc\">\n            <span class=\"fade-1 font-2 body-2\">\n                {{ topic.info.description }}\n            </span>\n        </div>\n        <div *ngIf=\"barItem$ | async; let barItem\" class=\"info-header-bar\">\n            <div class=\"flex-item btn\" [ngClass]=\"{ selected: barItem == barItems.PUBLICATIONS }\" (click)=\"switchBar(barItems.PUBLICATIONS)\">\n                <span class=\"font-1 fade-1 h5 button-1\" style=\"margin-bottom: 7px; display: inline-block;\">{{ 'COMMON.PUBLICATIONS_' | translate }}</span>\n                <br />\n                <span class=\"font-1 fade-1 h5 button-1 numbers\" [ngClass]=\"{ blue: barItem == barItems.PUBLICATIONS }\">{{ topic.postCount }}</span>\n            </div>\n                <div class=\"flex-item btn\" [ngClass]=\"{ selected: barItem == barItems.FAVORITES }\" (click)=\"switchBar(barItems.FAVORITES)\">\n                <span class=\"font-1 fade-1 h5 button-1\" style=\"margin-bottom: 7px; display: inline-block;\">{{ 'COMMON.FAVORITES' | translate }}</span>\n                <br />\n                <span class=\"font-1 fade-1 h5 button-1 numbers\" [ngClass]=\"{ blue: barItem == barItems.FAVORITES }\">{{ promotedCount$ | async }}</span>\n            </div>\n            <div class=\"flex-item btn\" [ngClass]=\"{ selected: barItem == barItems.INFO }\" (click)=\"switchBar(barItems.INFO)\">\n                <span class=\"font-1 fade-1 h5 button-1\" style=\"margin-bottom: 6px; display: inline-block;\">{{ 'COMMON.INFORMATION' | translate }}</span>\n                <br>\n                <svg *ngIf=\"!(barItem == barItems.INFO)\" class=\"numbers\" name=\"btn-expand-h\" style=\"width: 20px\"></svg>\n                <svg *ngIf=\"barItem == barItems.INFO\" class=\"numbers\" name=\"btn-expand-v\" style=\"width: 20px\"></svg>\n            </div>\n        </div>\n    </app-ui-info-header>\n    <div style=\"margin-bottom: 45px;\"></div>\n    <ul *ngIf=\"(barItem$ | async) === barItems.PUBLICATIONS || (barItem$ | async) === barItems.FAVORITES\" class=\"block-card item-space-40\">\n        <li *ngFor=\"let article of pageable.content; let i = index\">\n            <app-feed-article-view [data]=\"article[0]\" [topic]=\"article[1]\" [options]=\"{ pictureOn: true, menuOn: true }\"></app-feed-article-view>\n        </li>\n    </ul>\n    <div *ngIf=\"(barItem$ | async) === barItems.INFO\" class=\"block-card\" style=\"width: 100%;\">\n        <span class=\"font-1 fade-1 body-1\" style=\"font-weight: bold;\">{{ 'COMMON.ABOUT_THE_TOPIC' | translate }}</span>\n        <br />\n        <br />\n        <span class=\"fade-1 font-2 body-2\">\n            {{ topic.profile.fullDescription }}\n        </span>\n    </div>\n</ng-container>\n  \n<app-pagination [pageable]=\"pageable\"></app-pagination>\n"]}