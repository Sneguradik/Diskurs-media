{"version":3,"sources":["webpack:///src/app/modules/news/pages/news-edit-page/news-edit-page.module.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-republish/article-republish.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-republish/article-republish.component.html","webpack:///src/app/modules/news/pages/news-edit-page/news-edit-page-routing.module.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/article-editor-topic/article-editor-topic.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/article-editor-topic/article-editor-topic.component.html","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/tag-assign/tag-assign.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/tag-assign/tag-assign.component.html","webpack:///src/app/shared/services/resolve-tags.service.ts","webpack:///src/app/modules/news/pages/news-edit-page/news-edit-page.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/news-edit-page.component.html","webpack:///src/app/modules/news/pages/news-edit-page/article-editor-preview/article-editor-preview.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-editor-preview/article-editor-preview.component.html","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/article-editor.component.ts","webpack:///src/app/modules/news/pages/news-edit-page/article-editor/article-editor.component.html"],"names":["NewsEditPageModule","forChild","declarations","imports","ArticleRepublishComponent","copyReq","refresh","emit","selector","templateUrl","styleUrls","changeDetection","OnPush","routes","path","component","NewsEditPageRoutingModule","exports","ArticleEditorTopicComponent","ref","responsive","allTopics","topicsChange","topicsSaveReq","open","ngOnChanges","changes","article","currentValue","previousValue","setSelected","topics","onClick","event","nativeElement","contains","target","topic","selected","find","_","meta","id","toggleDropdown","onChange","value","it","length","concat","filter","setMainTopic","topicId","includes","TagAssignComponent","tags","suggestions","suggestionsReq","uploadTagsReq","tagsUpdate$","current$","currentId$","next","currentlyEditedId","el","tagObjects","toArray","currentlyEditedTag","firstChild","appendChild","searchResults","ngOnInit","pipe","upload","ngOnDestroy$","subscribe","updateSuggestions","clicked","addBtn","blur","pos","tag","content","remove","change","input","replace","accept","add","list","last","focus","push","i","splice","ResolveTagsService","tagsService","resolveTagIds$","map","result","find$","create$","providedIn","NewsEditPageComponent","route","articlesService","topicsService","sidebarWrapperService","router","resolveTagsService","store","platformsService","responsive$","isSubmitting$","tagsPendingUpload$","suggestions$","openPreview","published","isBrowser","setTimeout","params$","trending","navigation","live","showSidebar","params","x","y","getSource$","getSingle$","source","data","getMultiple$","articleSource","articleData","articleTags","status","publicationStage","PUBLISHED","getTopicsPage","setSuggestions","defaultSuggestions$","get$","order","POST_COUNT","query","loading","page","total","locale","ALL","sort","info","name","localeCompare","totalPages","save$","html","putSource$","updateSummary$","summary","putTopics$","updateTopics","updateCover","cover","updateCover$","updateTitle","title","updateTitle$","updateSummary","putSource","copy","copy$","DRAFT","saveAndPublish","publishOrSubmit$","dispatch","POSTS","navigate","openPreview$","complete","tagsUpload","res","putTags$","error","tagsSuggestions","view","getOne$","preOff","delete$","REVIEWING","submit$","publish$","err","saveAsDraft","ArticleEditorPreviewComponent","ArticleEditorComponent","fb","gone","putSourceReq","updateTopicsReq","updateCoverReq","updateSummaryReq","updateTitleReq","saveAndPublishReq","tagsSuggestionsReq","tagsUploadReq","dataChanged$","wysiwygValueChange$","openEditor","authorId","setData","setForm","setEditorUpdate","initialData","currentArticle","coverSrc","author","group","control","valueChanges","form","openEdit","ed","onCoverUpload","files","reader","FileReader","readAsDataURL","onload","e","username","isMediumResponsive"],"mappings":"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","file":"pages-news-edit-page-news-edit-page-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NewsEditPageRoutingModule } from './news-edit-page-routing.module';\nimport { NewsEditPageComponent } from './news-edit-page.component';\nimport { ArticleEditorComponent } from './article-editor/article-editor.component';\nimport { ArticleEditorPreviewComponent } from './article-editor-preview/article-editor-preview.component';\nimport { ArticleRepublishComponent } from './article-republish/article-republish.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AutosizeModule } from 'ngx-autosize';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { ArticleEditorTopicComponent } from './article-editor/article-editor-topic/article-editor-topic.component';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { NgScrollbarModule } from 'ngx-scrollbar';\nimport { TagAssignComponent } from './article-editor/tag-assign/tag-assign.component';\nimport { SvgModule } from '@shared/modules/svg/svg.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\n\n\n@NgModule({\n  declarations: [\n    NewsEditPageComponent,\n    ArticleEditorComponent,\n    ArticleEditorPreviewComponent,\n    ArticleRepublishComponent,\n    ArticleEditorTopicComponent,\n    TagAssignComponent\n  ],\n  imports: [\n    CommonModule,\n    NewsEditPageRoutingModule,\n    FormsModule,\n    CommonDirectivesModule,\n    ReactiveFormsModule,\n    TranslateModule.forChild(),\n    AutosizeModule,\n    SharedUiModule,\n    SharedComponentsModule,\n    SharedPipesModule,\n    NgScrollbarModule,\n    SvgModule\n  ]\n})\nexport class NewsEditPageModule { }\n","import { Component, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-article-republish',\n  templateUrl: './article-republish.component.html',\n  styleUrls: ['./article-republish.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleRepublishComponent {\n  @Output() public readonly copyReq: EventEmitter<void> = new EventEmitter<void>();\n\n  constructor() {}\n\n  public refresh(): void {\n    this.copyReq.emit();\n  }\n}\n","<div class=\"rect\">\n    <div class=\"w-100\"></div>\n    <div class=\"preview\">\n        <div class=\"system-alert\">\n            <div class=\"system-alert__wrap\">\n                <button class=\"system-alert__close\" title=\"Закрыть\" [routerLink]=\"['/']\">\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.0015 8.98985L13.5371 5.45431C13.816 5.17537 14.2683 5.17537 14.5472 5.45431C14.8262 5.73326 14.8262 6.18552 14.5472 6.46447L11.0117 10L14.5472 13.5355C14.8262 13.8145 14.8262 14.2667 14.5472 14.5457C14.2683 14.8246 13.816 14.8246 13.5371 14.5457L10.0015 11.0102L6.466 14.5457C6.18705 14.8246 5.73479 14.8246 5.45584 14.5457C5.1769 14.2667 5.1769 13.8145 5.45584 13.5355L8.99138 10L5.45584 6.46447C5.1769 6.18552 5.1769 5.73326 5.45584 5.45431C5.73479 5.17537 6.18705 5.17537 6.466 5.45431L10.0015 8.98985Z\" />\n                    </svg>\n                </button>\n                <h2 class=\"system-alert__title\">{{ 'COMMON.EDIT_WARNING' | translate }}</h2>\n                <p class=\"system-alert__txt \">{{ 'COMMON.EDIT_WARNING_' | translate }}</p>\n                <div class=\"system-alert__bar\">\n                    <button class=\"system-alert__confirm\" (click)=\"refresh()\">{{ 'COMMON.WARNING_APPROVE' | translate }}</button>\n                    <button class=\"system-alert__reset\" [routerLink]=\"['/']\">{{ 'COMMON.UNDO' | translate }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n  ","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NewsEditPageComponent } from './news-edit-page.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewsEditPageComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NewsEditPageRoutingModule { }\n","import { Component, Input, EventEmitter, Output, ElementRef, HostListener, OnChanges, SimpleChanges, ChangeDetectionStrategy } from '@angular/core';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ResponsiveService } from '@app/services/responsive.service';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\n\n@Component({\n  selector: 'app-article-editor-topic',\n  templateUrl: './article-editor-topic.component.html',\n  styleUrls: ['./article-editor-topic.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleEditorTopicComponent implements OnChanges {\n  @Input() public article: IArticleViewFull;\n  @Input() public allTopics: ITopicView[] = [];\n\n  @Output() public readonly topicsChange: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @Output() public readonly topicsSaveReq: EventEmitter<number[]> = new EventEmitter<number[]>();\n\n  public open = false;\n  public selected: ITopicView;\n\n  constructor(private readonly ref: ElementRef, public readonly responsive: ResponsiveService) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.allTopics && this.article && changes.allTopics.currentValue !== changes.allTopics.previousValue) {\n      this.setSelected(this.article.topics[0]);\n    }\n  }\n\n  @HostListener('document:click', ['$event']) public onClick(event: Event): void {\n    if (!this.ref.nativeElement.contains(event.target)) {\n      if (this.open) {\n        this.open = false;\n        this.topicsSaveReq.emit(this.article.topics);\n      }\n    }\n  }\n\n  private setSelected(topic: number): void {\n    this.selected = this.allTopics.find((_: ITopicView) => _.meta.id === topic);\n  }\n\n  public toggleDropdown(): void {\n    if (this.open) {\n      this.topicsSaveReq.emit(this.article.topics);\n    }\n    this.open = !this.open;\n  }\n\n  public onChange(topic: ITopicView, value: boolean): void {\n    if (value && !this.article.topics.find((it: number) => it === topic.meta.id) && this.article.topics.length < 4) {\n      this.topicsChange.emit((this.article.topics = this.article.topics.concat(topic.meta.id)));\n    } else if (!value && this.article.topics.find((it: number) => it === topic.meta.id)) {\n      this.topicsChange.emit((this.article.topics = this.article.topics.filter((it: number) => it !== topic.meta.id)));\n    }\n    if (this.article.topics.length === 0) {\n      this.selected = null;\n    } else {\n      this.setSelected(this.article.topics[0]);\n    }\n  }\n\n  public setMainTopic(topicId: number): void {\n    if ((this.article.topics.includes(topicId) && this.article.topics.length <= 4)\n      || (!this.article.topics.includes(topicId) && this.article.topics.length < 4)) {\n      this.topicsChange.emit((this.article.topics = [topicId, ...this.article.topics.filter((id: number) => topicId !== id)]));\n      this.setSelected(topicId);\n    }\n  }\n}\n","<div class=\"container\" [ngClass]=\"{ 'primary-border' : open }\">\n    <div class=\"select btn\" (click)=\"toggleDropdown()\">\n        <div style=\"align-items: center; display: inline-flex;\">\n            <div *ngIf=\"!selected\" class=\"ui-icon-empty\"></div>\n            <span *ngIf=\"!selected\">{{ 'COMMON.CHOOSE_A_TOPIC' | translate }}</span>\n            <app-ui-icon *ngIf=\"selected\" [src]=\"selected.info.picture\" [textAlternative]=\"selected.info.name\" [size]=\"'medium'\"></app-ui-icon>\n            <span *ngIf=\"selected\" class=\"mr-5\">{{ selected.info.name }}</span>\n            <span *ngIf=\"selected && article.topics.length > 1\" class=\"blue-text mr-5\">{{ '+' + (article.topics.length - 1) }}</span>\n            <svg name=\"chevron/down\" class=\"ui-icon\"></svg>\n            <span *ngIf=\"open\" class=\"select-caption\">{{ 'COMMON.SAVE_CHOICE' | translate }}</span>\n        </div>\n        <div class=\"add-info\">\n            <span class=\"f-w-normal mr-20\" [ngClass]=\"{ 'c-primary' : article.author.info.company.isCompany }\">{{ article.author.info | personName }}</span>\n            <span class=\"date\">{{ article.meta.updatedAt | customDate }}</span>\n        </div>\n    </div>\n    <div class=\"sub-info select\">\n        <span *ngIf=\"!responsive.lt.medium\" class=\"grey-text\">{{ 'COMMON.POINT_1_TO_4' | translate }} <svg name=\"star\" class=\"ui-icon\" size=\"15\" style=\"display: inline-block; width: 15px; height: 15px; margin: 0 2px;\"></svg> {{ 'COMMON.POINT_1_TO_4_' | translate }}</span>\n        <span *ngIf=\"responsive.lt.medium\" class=\"grey-text\" style=\"display: inline-block !important;\">{{ 'COMMON.POINT_1_TO_4' | translate }} <svg name=\"star\" class=\"ui-icon\" size=\"15\" style=\"display: inline-block; width: 15px; height: 15px; margin: 0 2px;\"></svg> {{ 'COMMON.POINT_1_TO_4_' | translate }}</span>\n    </div>\n  \n    <ng-scrollbar *ngIf=\"open\" [appearance]=\"'standard'\" thumbClass=\"blue-sb\">\n        <div class=\"dropdown\" [ngClass]=\"{ 'dropdown--active': open }\">\n            <div *ngFor=\"let topic of allTopics\" class=\"dropdown-item\">\n                <div class=\"empty-group\">\n                    <app-ui-icon [src]=\"topic.info.picture\" [textAlternative]=\"topic.info.name\" [size]=\"'medium'\"></app-ui-icon>\n                    <span class=\"dropdown-item-text\">{{ topic.info.name }}</span>\n                </div>\n                <div class=\"actions\">\n                    <svg name=\"star\"\n                        class=\"ui-icon\"\n                        [ngClass]=\"{ 'ui-icon--active': article.topics.indexOf(topic.meta.id) == 0 }\"\n                        (click)=\"setMainTopic(topic.meta.id)\"></svg>\n                    <app-ui-checkbox [checked]=\"article.topics.indexOf(topic.meta.id) >= 0\"\n                                     [disabled]=\"!article.topics.includes(topic.meta.id) && article.topics.length >= 4\" (change)=\"onChange(topic, $event)\"></app-ui-checkbox>\n                </div>\n            </div>\n        </div>\n    </ng-scrollbar>\n</div>\n","import { Component, Input, Output, EventEmitter, ViewChild, ViewChildren, ElementRef, QueryList, HostListener, OnInit, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { first, takeUntil, debounceTime, tap } from 'rxjs/operators';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\n\n@Component({\n  selector: 'app-tag-assign',\n  templateUrl: './tag-assign.component.html',\n  styleUrls: ['./tag-assign.component.scss']\n})\nexport class TagAssignComponent extends AbstractComponent implements OnInit, OnDestroy {\n  @ViewChild('searchResults') private searchResults: ElementRef;\n  @ViewChild('addBtn') private addBtn: ElementRef;\n  @ViewChildren('userTags') private tagObjects: QueryList<ElementRef>;\n\n  @Input() public tags: ITagSimpleView[] = [];\n  @Input() public suggestions: ITagView[] = [];\n\n  @Output() public readonly suggestionsReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly uploadTagsReq: EventEmitter<ITagSimpleView[]> = new EventEmitter<ITagSimpleView[]>();\n\n  private readonly tagsUpdate$: Subject<any> = new Subject<any>();\n\n  private currentlyEditedTag: HTMLInputElement;\n  private currentlyEditedId: number;\n\n  public readonly current$: Subject<string> = new Subject<string>();\n  public readonly currentId$: Subject<number> = new Subject<number>();\n\n  public set currentlyEdited(target: number) {\n    this.currentId$.next(target);\n    this.currentlyEditedId = target;\n    const el = this.tagObjects.toArray()[target].nativeElement as HTMLLIElement;\n    this.currentlyEditedTag = el.firstChild as HTMLInputElement;\n    this.current$.next(this.currentlyEditedTag.value);\n    el.appendChild(this.searchResults.nativeElement);\n  }\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.tagsUpdate$.pipe(\n      debounceTime(1500),\n      tap(() => this.upload()),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n    this.current$.subscribe((tags: string) => this.updateSuggestions(tags));\n  }\n\n  @HostListener('document:click', ['$event']) public clicked(event: Event): void {\n    if (this.addBtn && !this.addBtn.nativeElement.contains(event.target)) {\n      this.blur();\n    }\n  }\n\n  private upload(): void {\n    this.uploadTagsReq.emit(this.tags);\n  }\n\n  private blur(): void {\n    let pos = -1;\n    for (const tag of this.tags) {\n      pos++;\n      if (tag.content === '') {\n        this.remove(pos);\n      }\n    }\n  }\n\n  public change(tag: ITagSimpleView): void {\n    if (tag.content) {\n      tag.id = null;\n      this.tagsUpdate$.next();\n    }\n  }\n\n  public input(event: Event): boolean {\n    const target: HTMLInputElement = event.target as HTMLInputElement;\n    const content: string = target.value.replace(/[^а-яa-z0-9_-]/gi, '');\n    this.current$.next(content);\n    return true;\n  }\n\n  public accept(tag: ITagView): void {\n    if (tag.content) {\n      this.tags[this.currentlyEditedId] = {\n        content: tag.content,\n        id: tag.meta.id,\n      };\n      this.tagsUpdate$.next();\n    }\n  }\n\n  public add(): void {\n    if (this.tags.length < 10) {\n      this.tagObjects.changes.pipe(first(), takeUntil(this.ngOnDestroy$)).subscribe((list: QueryList<ElementRef>) => {\n        list.last.nativeElement.firstChild.focus();\n      });\n      this.tags.push({ content: '', id: null });\n      this.updateSuggestions('');\n    }\n  }\n\n  public remove(i: number): void {\n    this.tags.length > 1 ? this.tags.splice(i, 1) : (this.tags = []);\n    this.upload();\n  }\n\n  public updateSuggestions(content: string): void {\n    this.suggestionsReq.emit(content);\n  }\n}\n","<ul class=\"c-primary structural item-space-10 subtitle-1\">\n    <li #userTags *ngFor=\"let tag of tags; let i = index\" style='position: relative!important;' class=\"v-center\">\n        <input class=\"subtitle-2 margin-right-4 c-primary\"\n               spellcheck=\"false\"\n               type=\"text\"\n               maxlength=\"32\"\n               [(ngModel)]=\"tag.content\"\n               (input)=\"input($event)\"\n               (focus)=\"currentlyEdited = i\"\n               (change)=\"change(tag)\"\n               (keyup.Space)=\"add()\"\n               (keydown.Enter)=\"$event.preventDefault()\"\n               (keyup.Enter)=\"add()\">\n        <svg name=\"report\" class=\"f-primary clickable\" size=\"14\" (click)=\"remove(i)\"></svg>\n    </li>\n    <li #addBtn *ngIf=\"tags.length < 10\" (click)=\"add()\">\n        <span class=\"subtitle-1 clickable\">{{ ('COMMON.ADD_TAG' | translate) + ' (' + ('COMMON.MORE' | translate) + ' ' + (10 - tags.length) + ')' }}</span>\n    </li>\n</ul>\n\n<ng-container *ngIf=\"(suggestions || []) as data\">\n    <ul #searchResults class=\"search-results block-card fade-1 subtitle-1 item-space-10\"\n        [class.shown]=\"data.length\">\n        <li *ngFor=\"let s of data\" class=\"clickable\" (mousedown)=\"accept(s)\">\n            {{ s.content + ' (' + s.postCount + ')' }}\n        </li>\n    </ul>\n</ng-container>\n","import { Injectable } from '@angular/core';\nimport { TagsService } from '@api/routes/tags.service';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { Observable, forkJoin, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResolveTagsService {\n  constructor(private readonly tagsService: TagsService) { }\n\n  public resolveTagIds$(tags: ITagSimpleView[]): Observable<number[]> {\n    return tags.length > 0\n      ? forkJoin(\n          tags.map((tag: ITagSimpleView) => {\n            let result: Observable<number>;\n            if (!tag.id) {\n              result = this.tagsService.find$(tag.content).pipe(\n                switchMap((_: number) => _ ? of(_) : this.tagsService.create$(tag.content)),\n              );\n            } else if (typeof tag.id === 'number') {\n              result = of(tag.id);\n            }\n            return result;\n          }),\n        )\n      : of([]);\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { PlatformService } from '@shared/services/platform.service';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  distinctUntilChanged,\n  map,\n  mapTo,\n  catchError,\n  takeUntil,\n  debounceTime,\n  tap,\n  first,\n  filter,\n  defaultIfEmpty,\n  switchMap,\n  concatMap\n} from 'rxjs/operators';\nimport { combineLatest, BehaviorSubject, of, Observable, forkJoin, ReplaySubject, from } from 'rxjs';\nimport { ArticlesService } from '@api/routes/articles.service';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { TagsService } from '@api/routes/tags.service';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { TagOrderEnum } from '@api/schemas/tags/tag-order.enum';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { ResponsiveService } from '@app/services/responsive.service';\nimport { TopicParams } from './topic-params.type';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { LocaleEnum } from '@api/schemas/locale/locale.enum';\nimport { ResolveTagsService } from '@shared/services/resolve-tags.service';\nimport { Store } from '@ngxs/store';\nimport { AddToProperty } from '@app/store/user-stats/actions/add-to-property.action';\nimport { EUserStatsProperty } from '@app/store/user-stats/enums/user-stats-property.enum';\n\n\n@Component({\n  selector: 'app-news-edit-page',\n  templateUrl: './news-edit-page.component.html',\n  styleUrls: ['./news-edit-page.component.scss']\n})\nexport class NewsEditPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  private readonly isSubmitting$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  private readonly tagsPendingUpload$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n\n  public readonly suggestions$: ReplaySubject<ITagView[]> = new ReplaySubject<ITagView[]>(1);\n  public readonly current$: ReplaySubject<string> = new ReplaySubject<string>(1);\n\n  public articleSource: string;\n  public articleData: IArticleViewFull;\n  public articleTags: ITagView[];\n  public allTopics: ITopicView[] = [];\n  public article: IArticleView;\n  public topic: ITopicView;\n  public openPreview = false;\n  public published = false;\n\n  constructor(\n    private readonly route: ActivatedRoute,\n    private readonly articlesService: ArticlesService,\n    private readonly topicsService: TopicsService,\n    private readonly tagsService: TagsService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly router: Router,\n    private readonly resolveTagsService: ResolveTagsService,\n    private readonly store: Store,\n    public readonly platformsService: PlatformService,\n    public readonly responsive$: ResponsiveService,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (this.platformsService.isBrowser) {\n      setTimeout(() => {\n        this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n      });\n\n      this.isSubmitting$.next(false);\n      this.route.params.pipe(\n        distinctUntilChanged((x: any, y: any) => x.id === y.id),\n        map((_: any) => +_.id),\n        switchMap((_: number) => combineLatest([this.articlesService.getSource$(_), this.articlesService.getSingle$(_)])),\n        concatMap(([source, data]: [string, IArticleViewFull]) => {\n          return this.tagsService.getMultiple$(data.tags).pipe(\n            defaultIfEmpty([]),\n            map((tags: ITagView[]) => [source, data, tags])\n          );\n        }),\n        takeUntil(this.ngOnDestroy$),\n      ).subscribe(([source, data, tags]: [string, IArticleViewFull, ITagView[]]) => {\n        this.articleSource = source;\n        this.articleData = data;\n        this.articleTags = tags;\n        this.published = data.status.publicationStage === PublicationStageEnum.PUBLISHED;\n      });\n      this.getTopicsPage();\n      this.setSuggestions();\n    }\n  }\n\n  private setSuggestions(): void {\n    const defaultSuggestions$: ReplaySubject<IPageResponse<ITagView>> = new ReplaySubject<IPageResponse<ITagView>>(1);\n\n    this.tagsService.get$(0, { order: TagOrderEnum.POST_COUNT }).pipe(\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(defaultSuggestions$);\n\n    this.current$.pipe(\n      distinctUntilChanged(),\n      debounceTime(500),\n      switchMap((_: string) => _ === '' || !_ ? defaultSuggestions$ : this.tagsService.get$(0, { query: _ })),\n      map((_: IPageResponse<ITagView>) => _.content as ITagView[]),\n      catchError(() => of([])),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(this.suggestions$);\n  }\n\n  private getTopicsPage(params: TopicParams = { loading: false, page: 0, total: 1 }): void {\n    params.loading = true;\n    this.topicsService.get$(params.page, { locale: LocaleEnum.ALL })\n      .pipe(takeUntil(this.ngOnDestroy$))\n      .subscribe((_: IPageResponse<ITopicView>) => {\n      const result: ITopicView[] = [...this.allTopics];\n      result.push(..._.content);\n      this.allTopics = result.sort((x: ITopicView, y: ITopicView) => x.info.name.localeCompare(y.info.name));\n      params.total = _.totalPages;\n      params.loading = false;\n      params.page++;\n      if (params.page < params.total) {\n        this.getTopicsPage(params);\n      }\n    });\n  }\n\n  private save$(article: IArticleViewFull): Observable<any> {\n    return forkJoin([\n      article.html !== '' ? this.articlesService.putSource$(this.articleData.meta.id, article.html) : of(null),\n      this.articlesService.updateSummary$(this.articleData.meta.id, article.info.summary),\n      this.articlesService.putTopics$(this.articleData.meta.id, article.topics),\n      this.tagsPendingUpload$.pipe(\n        filter((_: boolean) => !_),\n        first(),\n      ),\n    ]);\n  }\n\n  public updateTopics(topics: number[]): void {\n    this.articlesService.putTopics$(this.articleData.meta.id, topics).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateCover(cover: File): void {\n    this.articlesService.updateCover$(this.articleData.meta.id, cover).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateTitle(title: string): void {\n    this.articlesService.updateTitle$(this.articleData.meta.id, title).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateSummary(summary: string): void {\n    this.articlesService.updateSummary$(this.articleData.meta.id, summary).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public putSource(source: string): void {\n    this.articlesService.putSource$(this.articleData.meta.id, source).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public copy(): void {\n    this.articlesService.copy$(this.articleData.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.published = false;\n      this.articleData.status.publicationStage = PublicationStageEnum.DRAFT;\n    });\n  }\n\n  public saveAndPublish(article: IArticleViewFull): void {\n    this.isSubmitting$.next(true);\n    this.article = { ...article } as IArticleView;\n    this.topic = this.allTopics.find((_: ITopicView) => _.meta.id === (this.articleData.topics ? this.articleData.topics[0] : []));\n    this.save$(article)\n      .pipe(\n        switchMap(() => {\n          if (this.articleData.status.publicationStage === PublicationStageEnum.DRAFT) {\n            return this.publishOrSubmit$();\n          } else {\n            return of(true);\n          }\n        }),\n        switchMap((published: boolean) => {\n          return published\n            ? (() => {\n                this.store.dispatch(new AddToProperty(1, EUserStatsProperty.POSTS));\n                return from(this.router.navigate(['/', 'news', article.meta.id]));\n              })()\n            : this.openPreview$();\n        }),\n        takeUntil(this.ngOnDestroy$))\n      .subscribe({\n        complete: () => this.isSubmitting$.next(false),\n      });\n  }\n\n  public tagsUpload(tags: ITagSimpleView[]): void {\n    this.tagsPendingUpload$.next(true);\n    this.resolveTagsService.resolveTagIds$(tags).pipe(\n      first(),\n      switchMap((res: number[]) => {\n        return this.articlesService.putTags$(this.articleData.meta.id, res).pipe();\n      }),\n      catchError((error: any) => {\n        this.tagsPendingUpload$.next(false);\n        throw error;\n      }),\n      tap(() => this.tagsPendingUpload$.next(false)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n  }\n\n  public tagsSuggestions(tag: string): void {\n    this.current$.next(tag);\n  }\n\n  public openPreview$(): Observable<any> {\n    return this.articlesService.getSingle$(this.article.meta.id).pipe(\n      switchMap((view: IArticleViewFull) => {\n        if (view.topics[0]) { return this.topicsService.getOne$(view.topics[0]).pipe(map((topic: ITopicViewFull) => ({ view, topic }))); }\n        return of({ view, topic: null });\n      }),\n      tap((_: { view: IArticleViewFull, topic: ITopicViewFull }) => {\n        this.article = _.view;\n        this.topic = _.topic;\n        this.openPreview = true;\n      }),\n      takeUntil(this.ngOnDestroy$)\n    );\n  }\n\n  public preOff(): void {\n    this.articlesService.getSingle$(this.article.meta.id).pipe(\n      switchMap((_: IArticleViewFull) => {\n        if (_.status.publicationStage === PublicationStageEnum.PUBLISHED) {\n          return this.articlesService.copy$(this.article.meta.id).pipe(\n            switchMap((id: number) => this.articlesService.delete$(this.article.meta.id).pipe(\n              tap(() => this.router.navigate(['/news', id, 'edit']))\n            )),\n          );\n        } else if (_.status.publicationStage === PublicationStageEnum.REVIEWING) {\n          return this.articlesService.submit$(this.article.meta.id, true).pipe(\n            tap(() => this.openPreview = false)\n          );\n        }\n      }),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n  }\n\n  public publishOrSubmit$(): Observable<boolean> {\n    return this.articlesService.publish$(this.articleData.meta.id).pipe(\n      mapTo(true),\n      catchError((err: any) => {\n        if (err.status === 403) {\n          return this.articlesService.submit$(this.articleData.meta.id).pipe(mapTo(false));\n        }\n        throw err;\n      }),\n    );\n  }\n\n  public saveAsDraft(article: IArticleViewFull): void {\n    this.isSubmitting$.next(true);\n    this.save$(article).pipe(\n      tap(() => this.router.navigate(['/', 'user', 'me', 'drafts'])),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe({\n      complete: () => this.isSubmitting$.next(false),\n    });\n  }\n}\n","<div *ngIf=\"platformsService.isBrowser\">\n    <app-article-editor \n        *appLet=\"responsive$.lt.medium | async as isMediumResponsive\"\n        [isMediumResponsive]=\"isMediumResponsive\"\n        [article]=\"articleData\" \n        [initialData]=\"articleSource\" \n        [allTopics]=\"allTopics\" \n        [tags]=\"articleTags\"\n        [suggestions]=\"suggestions$ | async\"\n        (putSourceReq)=\"putSource($event)\"\n        (updateTopicsReq)=\"updateTopics($event)\"\n        (updateCoverReq)=\"updateCover($event)\"\n        (updateSummaryReq)=\"updateSummary($event)\"\n        (updateTitleReq)=\"updateTitle($event)\"\n        (saveAndPublishReq)=\"saveAndPublish($event)\"\n        (tagsSuggestionsReq)=\"tagsSuggestions($event)\"\n        (tagsUploadReq)=\"tagsUpload($event)\">\n    </app-article-editor>\n\n    <app-article-editor-preview *ngIf=\"openPreview\" [article]=\"article\" [topic]=\"topic\"></app-article-editor-preview>\n\n    <app-article-republish *ngIf=\"published\" (copyReq)=\"copy()\"></app-article-republish>\n</div>\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\n\n@Component({\n  selector: 'app-article-editor-preview',\n  templateUrl: './article-editor-preview.component.html',\n  styleUrls: ['../article-editor-shared-styles.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleEditorPreviewComponent {\n  @Input() public article: IArticleView;\n  @Input() public topic: ITopicView;\n\n  constructor() { }\n}\n","<div class=\"rect\">\n    <div class=\"w-100\"></div>\n    <div class=\"on-moderation\">\n        <div class=\"on-moderation__wrap\">\n            <button class=\"on-moderation__close\" title=\"Закрыть\" [routerLink]=\"['/']\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.0015 8.98985L13.5371 5.45431C13.816 5.17537 14.2683 5.17537 14.5472 5.45431C14.8262 5.73326 14.8262 6.18552 14.5472 6.46447L11.0117 10L14.5472 13.5355C14.8262 13.8145 14.8262 14.2667 14.5472 14.5457C14.2683 14.8246 13.816 14.8246 13.5371 14.5457L10.0015 11.0102L6.466 14.5457C6.18705 14.8246 5.73479 14.8246 5.45584 14.5457C5.1769 14.2667 5.1769 13.8145 5.45584 13.5355L8.99138 10L5.45584 6.46447C5.1769 6.18552 5.1769 5.73326 5.45584 5.45431C5.73479 5.17537 6.18705 5.17537 6.466 5.45431L10.0015 8.98985Z\" />\n                </svg>\n            </button>\n            <h2 class=\"on-moderation__title\">Благодарим Вас за публикацию!</h2>\n            <div class=\"on-moderation__row\">\n                <div *ngIf=\"topic\" class=\"on-moderation__category\">\n                    <app-ui-icon class=\"margin-right-10\" [src]=\"topic.info.picture || ''\"\n                                 [textAlternative]=\"topic.info.name || ''\"\n                                 [size]=\"'medium'\"></app-ui-icon>\n                    <div class=\"on-moderation__category-txt\">{{ topic.info.name }}</div>\n                </div>\n                <div class=\"on-moderation__row-bar\">\n                <div *ngIf=\"!article.author.info.company.isCompany\" class=\"on-moderation__author\">{{ article.author.info | personName }}</div>\n                <div *ngIf=\"article.author.info.company.isCompany\" class=\"on-moderation__company\">{{ article.author.info | personName }}</div>\n                    <time class=\"on-moderation__time\" datetime=\"2020-04-06 12:16:50+03:00\">{{ article.status.publishedAt | customDate }}</time>\n                </div>\n            </div>\n            <div class=\"on-moderation__prev-title system-alert__title\">{{ article.info.title }}</div>\n            <div class=\"on-moderation__prev-txt system-alert__txt\">\n                Редактор проверит публикацию на соответствие правилам портала и\n                совсем скоро разместит в ленте. В дальнейшем Ваши материалы могут\n                размещаться без премодерации. \n            </div>\n            <div class=\"on-moderation__bar\">\n                <button class=\"system-alert__confirm\" [routerLink]=\"['/news', article.meta.id]\">Посмотреть публикацию</button>\n                <button class=\"system-alert__reset\" [routerLink]=\"['/all']\">В ленту публикаций</button>\n            </div>\n        </div>\n    </div>\n</div>\n","import {\n  Component,\n  OnInit,\n  ViewChild,\n  Output,\n  EventEmitter,\n  Input,\n  SimpleChanges,\n  OnDestroy,\n  OnChanges,\n} from '@angular/core';\nimport { asyncScheduler, BehaviorSubject, ReplaySubject } from 'rxjs';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\nimport { CKEditorComponent } from '@ckeditor/ckeditor5-angular';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { debounceTime, filter, tap, takeUntil } from 'rxjs/operators';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-article-editor',\n  templateUrl: './article-editor.component.html',\n  styleUrls: ['../article-editor-shared-styles.scss']\n})\nexport class ArticleEditorComponent extends AbstractComponent implements OnInit, OnDestroy, OnChanges {\n  @ViewChild('editor') public ed: any;\n\n  @Input() public article: IArticleViewFull;\n  @Input() public initialData: string;\n  @Input() public tags: ITagView[] = [];\n  @Input() public allTopics: ITopicView;\n  @Input() public suggestions: ITopicView[];\n  @Input() public isMediumResponsive: boolean;\n\n  @Output() public readonly gone: EventEmitter<any> = new EventEmitter<any>();\n  @Output() public readonly putSourceReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly updateTopicsReq: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @Output() public readonly updateCoverReq: EventEmitter<File> = new EventEmitter<File>();\n  @Output() public readonly updateSummaryReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly updateTitleReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly saveAndPublishReq: EventEmitter<IArticleView> = new EventEmitter<IArticleView>();\n  @Output() public readonly tagsSuggestionsReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly tagsUploadReq: EventEmitter<ITagSimpleView[]> = new EventEmitter<ITagSimpleView[]>();\n\n  public readonly dataChanged$: ReplaySubject<void> = new ReplaySubject<void>(1);\n  public readonly isSubmitting$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly wysiwygValueChange$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  public editor: CKEditorComponent;\n  public form: FormGroup;\n  public coverSrc: string;\n  public openEditor = false;\n\n  public currentArticle: IArticleView;\n\n  public published: boolean;\n\n  public authorId = -1;\n  public topicPrev: ITopicView;\n\n  public id: number;\n\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly router: Router\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.dataChanged$.pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.setData();\n      this.setForm();\n    });\n    this.setEditorUpdate();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ((changes.article || changes.initialData) && this.article) {\n      this.dataChanged$.next();\n    }\n  }\n\n  private setData(): void {\n    this.currentArticle = this.article;\n    this.published = this.article.status.publicationStage === PublicationStageEnum.PUBLISHED;\n    if (this.article.info.cover !== null) {\n      this.coverSrc = this.article.info.cover;\n    }\n    this.authorId = this.article.author.meta.id;\n    this.currentArticle.topics = this.article.topics;\n  }\n\n  private setEditorUpdate(): void {\n    this.wysiwygValueChange$.pipe(\n      debounceTime(300),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe((value: string) => {\n      if (value !== '') {\n        this.putSourceReq.emit(value);\n        this.article.html = value;\n      }\n    });\n  }\n\n  private setForm(): void {\n    const group: FormGroup = this.fb.group({\n      title: this.fb.control(this.article.info.title),\n      summary: this.fb.control(this.article.info.summary),\n      cover: this.fb.control(this.article.info.cover),\n    });\n\n    group.valueChanges.pipe(\n      debounceTime(300, asyncScheduler),\n      filter((_: any) => _.title !== this.currentArticle.info.title || _.summary !== this.currentArticle.info.summary),\n      tap((_: any) => {\n        if (_.title !== this.currentArticle.info.title) {\n          this.updateTitleReq.emit(_.title);\n          this.currentArticle.info.title = _.title;\n        }\n        if (_.summary !== this.currentArticle.info.summary) {\n          this.updateSummaryReq.emit(_.summary);\n          this.currentArticle.info.summary = _.summary;\n        }\n      }),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n\n    this.form = group;\n  }\n\n  public openEdit(): void {\n    this.openEditor = true;\n    setTimeout(() => {\n      this.ed.focus();\n    });\n  }\n\n  public tagsSuggestions(tags: string): void {\n    this.tagsSuggestionsReq.emit(tags);\n  }\n\n  public tagsUpload(tags: ITagSimpleView[]): void {\n    this.tagsUploadReq.emit(tags);\n  }\n\n  public updateTopics(topics?: number[]): void {\n    this.updateTopicsReq.emit(topics ? topics : this.currentArticle.topics);\n  }\n\n  public onCoverUpload(files: FileList): void {\n    const cover: File = files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(files[0]);\n    reader.onload = (e: any) => {\n      this.coverSrc = e.target.result;\n    };\n    this.updateCoverReq.emit(cover);\n  }\n\n  public saveAndPublish(): void {\n    this.saveAndPublishReq.emit(this.currentArticle);\n  }\n\n  public saveAsDraft(): void {\n    this.router.navigate(['/user', this.currentArticle.author.info.username\n      ? this.currentArticle.author.info.username : this.currentArticle.author.meta.id, 'drafts']);\n  }\n\n  public topicsChange(topics: number[]): void {\n    this.currentArticle.topics = topics;\n  }\n}\n","<app-ui-card>\n    <form *ngIf=\"form\" [formGroup]=\"form\" (ngSubmit)=\"saveAndPublish()\">\n        <div class=\"name\">\n            <app-ui-form-control>\n                <div class=\"form-textarea\">\n                    <textarea class=\"ui-input-h1\" autosize [minRows]=\"1\" formControlName=\"title\" [placeholder]=\"'COMMON.PUBLICATION_TITLE' | translate\" maxlength=\"100\"></textarea>\n                    <div *ngIf=\"!(isMediumResponsive)\" class=\"counter head-counter-resp\"><span>{{ 100 - (form.get('title').value ? form.get('title').value.length : 0) + '/100' }}</span></div>\n                    <div *ngIf=\"isMediumResponsive\" class=\"counter head-counter-resp\"><span>{{ 100 - (form.get('title').value ? form.get('title').value.length : 0) }}</span></div>\n                </div>\n            </app-ui-form-control>\n        </div>\n\n        <app-article-editor-topic [article]=\"currentArticle\" [allTopics]=\"allTopics\" (topicsChange)=\"topicsChange($event)\" (topicsSaveReq)=\"updateTopics($event)\"></app-article-editor-topic>\n\n        <app-ui-form-control class=\"counter-in\">\n            <span #formControlHeader class=\"label\">{{ 'COMMON.PUBLICATIONS_ANNOUNCEMENT' | translate }}</span>\n            <div class=\"form-textarea\">\n                <textarea #formControlAction\n                          class=\"form-textarea\"\n                          autosize\n                          [minRows]=\"1\"\n                          formControlName=\"summary\"\n                          [placeholder]=\"'COMMON.WRITE_AN_ANNOUNCEMENT' | translate\"\n                          maxlength=\"300\">\n                </textarea>\n                <div *ngIf=\"!(isMediumResponsive)\" class=\"counter head-counter-resp\"><span>{{ 300 - (form.get('summary').value ? form.get('summary').value.length : 0) + '/300' }}</span></div>\n                <div *ngIf=\"isMediumResponsive\" class=\"counter head-counter-resp\"><span>{{ 300 - (form.get('summary').value ? form.get('summary').value.length : 0) }}</span></div>\n            </div>\n        </app-ui-form-control>\n\n        <app-ui-form-control>\n            <span #formControlHeader class=\"label\">{{ 'COMMON.PUBLICATION_TEXT' | translate }}</span>\n            <app-wysiwyg-editor #editor\n                                #formControlAction\n                                *ngIf=\"(initialData !== '' && initialData !== null) || openEditor\" [initialData]=\"initialData\"\n                                (valueChange)=\"wysiwygValueChange$.next($event)\">\n            </app-wysiwyg-editor>\n            <div *ngIf=\"(initialData === '' || initialData === null) && !openEditor\" (mousedown)=\"openEdit()\">\n                <textarea class=\"form-textarea\" autosize [minRows]=\"1\" [placeholder]=\"'COMMON.CREATE_PUBLICATION' | translate\" readonly></textarea>\n            </div>\n        </app-ui-form-control>\n\n        <app-ui-form-control>\n            <p class=\"label margin-bottom-15\">{{ 'COMMON.PUBLICATION_TAGS' | translate }}</p>\n            <app-tag-assign *ngIf=\"article\"\n                            [tags]=\"tags\"\n                            [suggestions]=\"suggestions\"\n                            (suggestionsReq)=\"tagsSuggestions($event)\"\n                            (uploadTagsReq)=\"tagsUpload($event)\">\n            </app-tag-assign>\n        </app-ui-form-control>\n\n        <hr class=\"blue-line margin-bottom-30\"/>\n\n        <img *ngIf=\"coverSrc\" src=\"{{ coverSrc }}\" style=\"width: 100%; margin-bottom: 5px; object-fit: cover;\" />\n        <div class=\"caption c-caption margin-bottom-15\">\n            <span>{{ 'COMMON.RECOMMENDED_IMAGE_SIZE' | translate }}</span>\n        </div>\n\n        <div class=\"form-actions\">\n            <div class=\"cover-upload\">\n                <svg name=\"attach\"></svg>\n                <label for=\"cover\">{{ 'COMMON.PUBLICATION_IMAGE' | translate }}</label>\n                <input id=\"cover\" type=\"file\"\n                    accept=\"image/*\"\n                    (change)=\"onCoverUpload($any($event).target.files)\">\n            </div>\n            <div class=\"buttons\">\n                <button class=\"drafts button-1\" type=\"button\" (click)=\"saveAsDraft()\" [disabled]=\"isSubmitting$ | async\">\n                    <span>{{ 'COMMON.TO_DRAFTS' | translate }}</span>\n                    <svg name=\"drafts\"></svg>\n                </button>\n                <button class=\"submit button-1\" type=\"submit\" [disabled]=\"isSubmitting$ | async\">\n                    <span>{{ 'COMMON.PUBLISH' | translate }}</span>\n                    <svg name=\"paper-airplane\" fill=\"#00B7FF\"></svg>\n                </button>\n            </div>\n        </div>\n    </form>\n</app-ui-card>\n"]}