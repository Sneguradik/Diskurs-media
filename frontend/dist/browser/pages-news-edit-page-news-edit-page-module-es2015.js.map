{"version":3,"sources":["./src/app/modules/news/pages/news-edit-page/news-edit-page.module.ts","./src/app/modules/news/pages/news-edit-page/article-republish/article-republish.component.ts","./src/app/modules/news/pages/news-edit-page/article-republish/article-republish.component.html","./src/app/modules/news/pages/news-edit-page/news-edit-page-routing.module.ts","./src/app/modules/news/pages/news-edit-page/article-editor/article-editor-topic/article-editor-topic.component.ts","./src/app/modules/news/pages/news-edit-page/article-editor/article-editor-topic/article-editor-topic.component.html","./src/app/modules/news/pages/news-edit-page/article-editor/tag-assign/tag-assign.component.ts","./src/app/modules/news/pages/news-edit-page/article-editor/tag-assign/tag-assign.component.html","./src/app/shared/services/resolve-tags.service.ts","./src/app/modules/news/pages/news-edit-page/news-edit-page.component.ts","./src/app/modules/news/pages/news-edit-page/news-edit-page.component.html","./src/app/modules/news/pages/news-edit-page/article-editor-preview/article-editor-preview.component.ts","./src/app/modules/news/pages/news-edit-page/article-editor-preview/article-editor-preview.component.html","./src/app/modules/news/pages/news-edit-page/article-editor/article-editor.component.ts","./src/app/modules/news/pages/news-edit-page/article-editor/article-editor.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AAE6B;AACT;AACgB;AACuB;AACd;AAC1B;AACZ;AACR;AACe;AACwB;AAC8B;AAC7C;AACpB;AACoC;AAC3B;AACmB;;;AA2BvE,MAAM,kBAAkB;;mMAAlB,kBAAkB;oMAAlB,kBAAkB,iBAtB3B,+EAAqB;QACrB,+FAAsB;QACtB,sHAA6B;QAC7B,wGAAyB;QACzB,gIAA2B;QAC3B,mGAAkB,aAGlB,4DAAY;QACZ,wFAAyB;QACzB,0DAAW;QACX,4FAAsB;QACtB,kEAAmB,uEAEnB,2DAAc;QACd,2EAAc;QACd,mGAAsB;QACtB,oFAAiB;QACjB,gEAAiB;QACjB,yEAAS;oMAGA,kBAAkB,YAfpB;YACP,4DAAY;YACZ,wFAAyB;YACzB,0DAAW;YACX,4FAAsB;YACtB,kEAAmB;YACnB,mEAAe,CAAC,QAAQ,EAAE;YAC1B,2DAAc;YACd,2EAAc;YACd,mGAAsB;YACtB,oFAAiB;YACjB,gEAAiB;YACjB,yEAAS;SACV;+KAEU,kBAAkB;kBAxB9B,sDAAQ;mBAAC;oBACR,YAAY,EAAE;wBACZ,+EAAqB;wBACrB,+FAAsB;wBACtB,sHAA6B;wBAC7B,wGAAyB;wBACzB,gIAA2B;wBAC3B,mGAAkB;qBACnB;oBACD,OAAO,EAAE;wBACP,4DAAY;wBACZ,wFAAyB;wBACzB,0DAAW;wBACX,4FAAsB;wBACtB,kEAAmB;wBACnB,mEAAe,CAAC,QAAQ,EAAE;wBAC1B,2DAAc;wBACd,2EAAc;wBACd,mGAAsB;wBACtB,oFAAiB;wBACjB,gEAAiB;wBACjB,yEAAS;qBACV;iBACF;;;;;;;;;;;;;;AC5CD;AAAA;AAAA;AAAA;AAAA;AAAyF;;;;AAQlF,MAAM,yBAAyB;IAGpC;QAF0B,YAAO,GAAuB,IAAI,0DAAY,EAAQ,CAAC;IAElE,CAAC;IAET,OAAO;QACZ,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;;0MAPU,yBAAyB;sJAAzB,yBAAyB,sICRtC,0kDAoBE;+KDZW,yBAAyB;kBANrC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,oCAAoC;oBACjD,SAAS,EAAE,CAAC,oCAAoC,CAAC;oBACjD,eAAe,EAAE,qEAAuB,CAAC,MAAM;iBAChD;0EAE2B,OAAO;sBAAhC,oDAAM;;;;;;;;;;;;;;AETT;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACY;;;AAGnE,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+EAAqB;KACjC;CACF,CAAC;AAMK,MAAM,yBAAyB;;0MAAzB,yBAAyB;2MAAzB,yBAAyB,qFAF1B,4DAAY;2MAEX,yBAAyB,YAH3B,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;+KAEX,yBAAyB;kBAJrC,sDAAQ;mBAAC;oBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;oBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;iBACxB;;;;;;;;;;;;;;ACfD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoJ;;;;;;;;;;;AAW7I,MAAM,2BAA2B;IAUtC,YAA6B,GAAe,EAAkB,UAA6B;QAA9D,QAAG,GAAH,GAAG,CAAY;QAAkB,eAAU,GAAV,UAAU,CAAmB;QAR3E,cAAS,GAAiB,EAAE,CAAC;QAEnB,iBAAY,GAA2B,IAAI,0DAAY,EAAY,CAAC;QACpE,kBAAa,GAA2B,IAAI,0DAAY,EAAY,CAAC;QAExF,SAAI,GAAG,KAAK,CAAC;IAG0E,CAAC;IAE/F,WAAW,CAAC,OAAsB;QAChC,IAAI,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,YAAY,KAAK,OAAO,CAAC,SAAS,CAAC,aAAa,EAAE;YAC3G,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1C;IACH,CAAC;IAEkD,OAAO,CAAC,KAAY;QACrE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YAClD,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;gBAClB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aAC9C;SACF;IACH,CAAC;IAEO,WAAW,CAAC,KAAa;QAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAa,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;IAC9E,CAAC;IAEM,cAAc;QACnB,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SAC9C;QACD,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;IACzB,CAAC;IAEM,QAAQ,CAAC,KAAiB,EAAE,KAAc;QAC/C,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9G,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;SAC3F;aAAM,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;YACnF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;SAClH;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1C;IACH,CAAC;IAEM,YAAY,CAAC,OAAe;QACjC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;eACzE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE;YAC/E,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACzH,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;SAC3B;IACH,CAAC;;4MAzDU,2BAA2B;wJAA3B,2BAA2B,8TCXxC,ihGAwCA;+KD7Ba,2BAA2B;kBANvC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,0BAA0B;oBACpC,WAAW,EAAE,uCAAuC;oBACpD,SAAS,EAAE,CAAC,uCAAuC,CAAC;oBACpD,eAAe,EAAE,qEAAuB,CAAC,MAAM;iBAChD;0OAEiB,OAAO;sBAAtB,mDAAK;gBACU,SAAS;sBAAxB,mDAAK;gBAEoB,YAAY;sBAArC,oDAAM;gBACmB,aAAa;sBAAtC,oDAAM;gBAa4C,OAAO;sBAAzD,0DAAY;uBAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;AE7B5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwJ;AACzH;AAE8C;AACR;;;;;;AAQ9D,MAAM,kBAAmB,SAAQ,0FAAiB;IA4BvD;QACE,KAAK,EAAE,CAAC;QAxBM,SAAI,GAAqB,EAAE,CAAC;QAC5B,gBAAW,GAAe,EAAE,CAAC;QAEnB,mBAAc,GAAyB,IAAI,0DAAY,EAAU,CAAC;QAClE,kBAAa,GAAmC,IAAI,0DAAY,EAAoB,CAAC;QAE9F,gBAAW,GAAiB,IAAI,4CAAO,EAAO,CAAC;QAKhD,aAAQ,GAAoB,IAAI,4CAAO,EAAU,CAAC;QAClD,eAAU,GAAoB,IAAI,4CAAO,EAAU,CAAC;IAapE,CAAC;IAXD,IAAW,eAAe,CAAC,MAAc;QACvC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC;QAChC,MAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,aAA8B,CAAC;QAC5E,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC,UAA8B,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAClD,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IACnD,CAAC;IAMD,QAAQ;QACN,IAAI,CAAC,WAAW,CAAC,IAAI,CACnB,mEAAY,CAAC,IAAI,CAAC,EAClB,0DAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EACxB,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1E,CAAC;IAEkD,OAAO,CAAC,KAAY;QACrE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YACpE,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;IACH,CAAC;IAEO,MAAM;QACZ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAEO,IAAI;QACV,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC;QACb,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;YAC3B,GAAG,EAAE,CAAC;YACN,IAAI,GAAG,CAAC,OAAO,KAAK,EAAE,EAAE;gBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aAClB;SACF;IACH,CAAC;IAEM,MAAM,CAAC,GAAmB;QAC/B,IAAI,GAAG,CAAC,OAAO,EAAE;YACf,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC;YACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;SACzB;IACH,CAAC;IAEM,KAAK,CAAC,KAAY;QACvB,MAAM,MAAM,GAAqB,KAAK,CAAC,MAA0B,CAAC;QAClE,MAAM,OAAO,GAAW,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,GAAa;QACzB,IAAI,GAAG,CAAC,OAAO,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG;gBAClC,OAAO,EAAE,GAAG,CAAC,OAAO;gBACpB,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE;aAChB,CAAC;YACF,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;SACzB;IACH,CAAC;IAEM,GAAG;QACR,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,EAAE;YACzB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,4DAAK,EAAE,EAAE,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAA2B,EAAE,EAAE;gBAC5G,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;YAC7C,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;YAC1C,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;SAC5B;IACH,CAAC;IAEM,MAAM,CAAC,CAAS;QACrB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;QACjE,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEM,iBAAiB,CAAC,OAAe;QACtC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;;mMAtGU,kBAAkB;+IAAlB,kBAAkB,ukBCZ/B,02CA4BA;+KDhBa,kBAAkB;kBAL9B,uDAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,WAAW,EAAE,6BAA6B;oBAC1C,SAAS,EAAE,CAAC,6BAA6B,CAAC;iBAC3C;0EAEqC,aAAa;sBAAhD,uDAAS;uBAAC,eAAe;gBACG,MAAM;sBAAlC,uDAAS;uBAAC,QAAQ;gBACe,UAAU;sBAA3C,0DAAY;uBAAC,UAAU;gBAER,IAAI;sBAAnB,mDAAK;gBACU,WAAW;sBAA1B,mDAAK;gBAEoB,cAAc;sBAAvC,oDAAM;gBACmB,aAAa;sBAAtC,oDAAM;gBAgC4C,OAAO;sBAAzD,0DAAY;uBAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;AErD5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAGK;AACL;;;AAKpC,MAAM,kBAAkB;IAC7B,YAA6B,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;IAAI,CAAC;IAEnD,cAAc,CAAC,IAAsB;QAC1C,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC;YACpB,CAAC,CAAC,qDAAQ,CACN,IAAI,CAAC,GAAG,CAAC,CAAC,GAAmB,EAAE,EAAE;gBAC/B,IAAI,MAA0B,CAAC;gBAC/B,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;oBACX,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAC/C,gEAAS,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,+CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAC5E,CAAC;iBACH;qBAAM,IAAI,OAAO,GAAG,CAAC,EAAE,KAAK,QAAQ,EAAE;oBACrC,MAAM,GAAG,+CAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;iBACrB;gBACD,OAAO,MAAM,CAAC;YAChB,CAAC,CAAC,CACH;YACH,CAAC,CAAC,+CAAE,CAAC,EAAE,CAAC,CAAC;IACb,CAAC;;mMAnBU,kBAAkB;uMAAlB,kBAAkB,cAFjB,MAAM;+KAEP,kBAAkB;kBAH9B,wDAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;;;;;;;;;;;;ACRD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AAiBrC;AAC6E;AAOlB;AACnB;AACa;AAOhB;AAGwB;AACK;;;;;;;;;;;;;;;;AAQnF,MAAM,qBAAsB,SAAQ,0FAAiB;IAgB1D,YACmB,KAAqB,EACrB,eAAgC,EAChC,aAA4B,EAC5B,WAAwB,EACxB,qBAA4C,EAC5C,MAAc,EACd,kBAAsC,EACtC,KAAY,EACb,gBAAiC,EACjC,WAA8B;QAE9C,KAAK,EAAE,CAAC;QAXS,UAAK,GAAL,KAAK,CAAgB;QACrB,oBAAe,GAAf,eAAe,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,WAAM,GAAN,MAAM,CAAQ;QACd,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,UAAK,GAAL,KAAK,CAAO;QACb,qBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,gBAAW,GAAX,WAAW,CAAmB;QAzB/B,kBAAa,GAA6B,IAAI,oDAAe,CAAU,KAAK,CAAC,CAAC;QAC9E,uBAAkB,GAA6B,IAAI,oDAAe,CAAU,KAAK,CAAC,CAAC;QAEpF,iBAAY,GAA8B,IAAI,kDAAa,CAAa,CAAC,CAAC,CAAC;QAC3E,aAAQ,GAA0B,IAAI,kDAAa,CAAS,CAAC,CAAC,CAAC;QAKxE,cAAS,GAAiB,EAAE,CAAC;QAG7B,gBAAW,GAAG,KAAK,CAAC;QACpB,cAAS,GAAG,KAAK,CAAC;IAezB,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE;YACnC,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;YAChI,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CACpB,2EAAoB,CAAC,CAAC,CAAM,EAAE,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,EACvD,0DAAG,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EACtB,gEAAS,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,0DAAa,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACjH,gEAAS,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAA6B,EAAE,EAAE;gBACvD,OAAO,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAClD,qEAAc,CAAC,EAAE,CAAC,EAClB,0DAAG,CAAC,CAAC,IAAgB,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAChD,CAAC;YACJ,CAAC,CAAC,EACF,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAyC,EAAE,EAAE;gBAC3E,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;gBAC5B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,KAAK,gGAAoB,CAAC,SAAS,CAAC;YACnF,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IAEO,cAAc;QACpB,MAAM,mBAAmB,GAA2C,IAAI,kDAAa,CAA0B,CAAC,CAAC,CAAC;QAElH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,KAAK,EAAE,6EAAY,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,CAC/D,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;QAEjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAChB,2EAAoB,EAAE,EACtB,mEAAY,CAAC,GAAG,CAAC,EACjB,gEAAS,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,EACvG,0DAAG,CAAC,CAAC,CAA0B,EAAE,EAAE,CAAC,CAAC,CAAC,OAAqB,CAAC,EAC5D,iEAAU,CAAC,GAAG,EAAE,CAAC,+CAAE,CAAC,EAAE,CAAC,CAAC,EACxB,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACjC,CAAC;IAEO,aAAa,CAAC,SAAsB,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE;QAC/E,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,0EAAU,CAAC,GAAG,EAAE,CAAC;aAC7D,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAClC,SAAS,CAAC,CAAC,CAA4B,EAAE,EAAE;YAC5C,MAAM,MAAM,GAAiB,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;YACjD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;YAC1B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAa,EAAE,CAAa,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACvG,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,UAAU,CAAC;YAC5B,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;YACvB,MAAM,CAAC,IAAI,EAAE,CAAC;YACd,IAAI,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE;gBAC9B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAC5B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,KAAK,CAAC,OAAyB;QACrC,OAAO,qDAAQ,CAAC;YACd,OAAO,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,+CAAE,CAAC,IAAI,CAAC;YACxG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC;YACnF,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,MAAM,CAAC;YACzE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAC1B,6DAAM,CAAC,CAAC,CAAU,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAC1B,4DAAK,EAAE,CACR;SACF,CAAC,CAAC;IACL,CAAC;IAEM,YAAY,CAAC,MAAgB;QAClC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IACnH,CAAC;IAEM,WAAW,CAAC,KAAW;QAC5B,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IACpH,CAAC;IAEM,WAAW,CAAC,KAAa;QAC9B,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IACpH,CAAC;IAEM,aAAa,CAAC,OAAe;QAClC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IACxH,CAAC;IAEM,SAAS,CAAC,MAAc;QAC7B,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IACnH,CAAC;IAEM,IAAI;QACT,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YACrG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,gBAAgB,GAAG,gGAAoB,CAAC,KAAK,CAAC;QACxE,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,cAAc,CAAC,OAAyB;QAC7C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,CAAC,OAAO,GAAG,kBAAK,OAAO,CAAkB,CAAC;QAC9C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAa,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/H,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;aAChB,IAAI,CACH,gEAAS,CAAC,GAAG,EAAE;YACb,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,gBAAgB,KAAK,gGAAoB,CAAC,KAAK,EAAE;gBAC3E,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAChC;iBAAM;gBACL,OAAO,+CAAE,CAAC,IAAI,CAAC,CAAC;aACjB;QACH,CAAC,CAAC,EACF,gEAAS,CAAC,CAAC,SAAkB,EAAE,EAAE;YAC/B,OAAO,SAAS;gBACd,CAAC,CAAC,CAAC,GAAG,EAAE;oBACJ,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,kGAAa,CAAC,CAAC,EAAE,uGAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpE,OAAO,iDAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC,EAAE;gBACN,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1B,CAAC,CAAC,EACF,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAC9B,SAAS,CAAC;YACT,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC;SAC/C,CAAC,CAAC;IACP,CAAC;IAEM,UAAU,CAAC,IAAsB;QACtC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAC/C,4DAAK,EAAE,EACP,gEAAS,CAAC,CAAC,GAAa,EAAE,EAAE;YAC1B,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;QAC7E,CAAC,CAAC,EACF,iEAAU,CAAC,CAAC,KAAU,EAAE,EAAE;YACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACpC,MAAM,KAAK,CAAC;QACd,CAAC,CAAC,EACF,0DAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAC9C,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,EAAE,CAAC;IAChB,CAAC;IAEM,eAAe,CAAC,GAAW;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAEM,YAAY;QACjB,OAAO,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAC/D,gEAAS,CAAC,CAAC,IAAsB,EAAE,EAAE;YACnC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;gBAAE,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,0DAAG,CAAC,CAAC,KAAqB,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;aAAE;YAClI,OAAO,+CAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;QACnC,CAAC,CAAC,EACF,0DAAG,CAAC,CAAC,CAAoD,EAAE,EAAE;YAC3D,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC,CAAC,EACF,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC;IACJ,CAAC;IAEM,MAAM;QACX,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CACxD,gEAAS,CAAC,CAAC,CAAmB,EAAE,EAAE;YAChC,IAAI,CAAC,CAAC,MAAM,CAAC,gBAAgB,KAAK,gGAAoB,CAAC,SAAS,EAAE;gBAChE,OAAO,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAC1D,gEAAS,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAC/E,0DAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CACvD,CAAC,CACH,CAAC;aACH;iBAAM,IAAI,CAAC,CAAC,MAAM,CAAC,gBAAgB,KAAK,gGAAoB,CAAC,SAAS,EAAE;gBACvE,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,IAAI,CAClE,0DAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CACpC,CAAC;aACH;QACH,CAAC,CAAC,EACF,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,EAAE,CAAC;IAChB,CAAC;IAEM,gBAAgB;QACrB,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CACjE,4DAAK,CAAC,IAAI,CAAC,EACX,iEAAU,CAAC,CAAC,GAAQ,EAAE,EAAE;YACtB,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACtB,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,4DAAK,CAAC,KAAK,CAAC,CAAC,CAAC;aAClF;YACD,MAAM,GAAG,CAAC;QACZ,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IAEM,WAAW,CAAC,OAAyB;QAC1C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CACtB,0DAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,EAC9D,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,CAAC;YACV,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC;SAC/C,CAAC,CAAC;IACL,CAAC;;sMA1OU,qBAAqB;kJAArB,qBAAqB,yHC9ClC,yiCAuBA;+KDuBa,qBAAqB;kBALjC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,WAAW,EAAE,iCAAiC;oBAC9C,SAAS,EAAE,CAAC,iCAAiC,CAAC;iBAC/C;;;;;;;;;;;;;;AE7CD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0E;;;;;;;AAUnE,MAAM,6BAA6B;IAIxC,gBAAgB,CAAC;;8MAJN,6BAA6B;0JAA7B,6BAA6B,0JCV1C,ivHAoCA;+KD1Ba,6BAA6B;kBANzC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,4BAA4B;oBACtC,WAAW,EAAE,yCAAyC;oBACtD,SAAS,EAAE,CAAC,sCAAsC,CAAC;oBACnD,eAAe,EAAE,qEAAuB,CAAC,MAAM;iBAChD;0EAEiB,OAAO;sBAAtB,mDAAK;gBACU,KAAK;sBAApB,mDAAK;;;;;;;;;;;;;;AEZR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUuB;AAC+C;AAIa;AACb;AACO;;;;;;;;;;;;;AAYtE,MAAM,sBAAuB,SAAQ,0FAAiB;IAsC3D,YACmB,EAAe,EACf,MAAc;QAE/B,KAAK,EAAE,CAAC;QAHS,OAAE,GAAF,EAAE,CAAa;QACf,WAAM,GAAN,MAAM,CAAQ;QAnCjB,SAAI,GAAe,EAAE,CAAC;QAKZ,SAAI,GAAsB,IAAI,0DAAY,EAAO,CAAC;QAClD,iBAAY,GAAyB,IAAI,0DAAY,EAAU,CAAC;QAChE,oBAAe,GAA2B,IAAI,0DAAY,EAAY,CAAC;QACvE,mBAAc,GAAuB,IAAI,0DAAY,EAAQ,CAAC;QAC9D,qBAAgB,GAAyB,IAAI,0DAAY,EAAU,CAAC;QACpE,mBAAc,GAAyB,IAAI,0DAAY,EAAU,CAAC;QAClE,sBAAiB,GAA+B,IAAI,0DAAY,EAAgB,CAAC;QACjF,uBAAkB,GAAyB,IAAI,0DAAY,EAAU,CAAC;QACtE,kBAAa,GAAmC,IAAI,0DAAY,EAAoB,CAAC;QAE/F,iBAAY,GAAwB,IAAI,kDAAa,CAAO,CAAC,CAAC,CAAC;QAC/D,kBAAa,GAA6B,IAAI,oDAAe,CAAU,KAAK,CAAC,CAAC;QAC9E,wBAAmB,GAA4B,IAAI,oDAAe,CAAS,EAAE,CAAC,CAAC;QAKxF,eAAU,GAAG,KAAK,CAAC;QAMnB,aAAQ,GAAG,CAAC,CAAC,CAAC;IAUrB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAClE,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;YAC5D,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;SAC1B;IACH,CAAC;IAEO,OAAO;QACb,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC;QACnC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,KAAK,gGAAoB,CAAC,SAAS,CAAC;QACzF,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;YACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;SACzC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;QAC5C,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IACnD,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAC3B,mEAAY,CAAC,GAAG,CAAC,EACjB,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,CAAC,CAAC,KAAa,EAAE,EAAE;YAC5B,IAAI,KAAK,KAAK,EAAE,EAAE;gBAChB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC;aAC3B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,OAAO;QACb,MAAM,KAAK,GAAc,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YACrC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;YAC/C,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC;YACnD,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;SAChD,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC,IAAI,CACrB,mEAAY,CAAC,GAAG,EAAE,mDAAc,CAAC,EACjC,6DAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAChH,0DAAG,CAAC,CAAC,CAAM,EAAE,EAAE;YACb,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE;gBAC9C,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBAClC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;aAC1C;YACD,IAAI,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE;gBAClD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;gBACtC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;aAC9C;QACH,CAAC,CAAC,EACF,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B,CAAC,SAAS,EAAE,CAAC;QAEd,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IACpB,CAAC;IAEM,QAAQ;QACb,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,eAAe,CAAC,IAAY;QACjC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAEM,UAAU,CAAC,IAAsB;QACtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAEM,YAAY,CAAC,MAAiB;QACnC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAC1E,CAAC;IAEM,aAAa,CAAC,KAAe;QAClC,MAAM,KAAK,GAAS,KAAK,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAChC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,MAAM,GAAG,CAAC,CAAM,EAAE,EAAE;YACzB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;QAClC,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;IAEM,cAAc;QACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACnD,CAAC;IAEM,WAAW;QAChB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ;gBACrE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC;IAChG,CAAC;IAEM,YAAY,CAAC,MAAgB;QAClC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,MAAM,CAAC;IACtC,CAAC;;uMAnJU,sBAAsB;mJAAtB,sBAAsB,6sBC7BnC,4qJAgFA;+KDnDa,sBAAsB;kBALlC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,WAAW,EAAE,iCAAiC;oBAC9C,SAAS,EAAE,CAAC,sCAAsC,CAAC;iBACpD;gNAE6B,EAAE;sBAA7B,uDAAS;uBAAC,QAAQ;gBAEH,OAAO;sBAAtB,mDAAK;gBACU,WAAW;sBAA1B,mDAAK;gBACU,IAAI;sBAAnB,mDAAK;gBACU,SAAS;sBAAxB,mDAAK;gBACU,WAAW;sBAA1B,mDAAK;gBACU,kBAAkB;sBAAjC,mDAAK;gBAEoB,IAAI;sBAA7B,oDAAM;gBACmB,YAAY;sBAArC,oDAAM;gBACmB,eAAe;sBAAxC,oDAAM;gBACmB,cAAc;sBAAvC,oDAAM;gBACmB,gBAAgB;sBAAzC,oDAAM;gBACmB,cAAc;sBAAvC,oDAAM;gBACmB,iBAAiB;sBAA1C,oDAAM;gBACmB,kBAAkB;sBAA3C,oDAAM;gBACmB,aAAa;sBAAtC,oDAAM","file":"pages-news-edit-page-news-edit-page-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NewsEditPageRoutingModule } from './news-edit-page-routing.module';\nimport { NewsEditPageComponent } from './news-edit-page.component';\nimport { ArticleEditorComponent } from './article-editor/article-editor.component';\nimport { ArticleEditorPreviewComponent } from './article-editor-preview/article-editor-preview.component';\nimport { ArticleRepublishComponent } from './article-republish/article-republish.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AutosizeModule } from 'ngx-autosize';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { ArticleEditorTopicComponent } from './article-editor/article-editor-topic/article-editor-topic.component';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { NgScrollbarModule } from 'ngx-scrollbar';\nimport { TagAssignComponent } from './article-editor/tag-assign/tag-assign.component';\nimport { SvgModule } from '@shared/modules/svg/svg.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\n\n\n@NgModule({\n  declarations: [\n    NewsEditPageComponent,\n    ArticleEditorComponent,\n    ArticleEditorPreviewComponent,\n    ArticleRepublishComponent,\n    ArticleEditorTopicComponent,\n    TagAssignComponent\n  ],\n  imports: [\n    CommonModule,\n    NewsEditPageRoutingModule,\n    FormsModule,\n    CommonDirectivesModule,\n    ReactiveFormsModule,\n    TranslateModule.forChild(),\n    AutosizeModule,\n    SharedUiModule,\n    SharedComponentsModule,\n    SharedPipesModule,\n    NgScrollbarModule,\n    SvgModule\n  ]\n})\nexport class NewsEditPageModule { }\n","import { Component, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-article-republish',\n  templateUrl: './article-republish.component.html',\n  styleUrls: ['./article-republish.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleRepublishComponent {\n  @Output() public readonly copyReq: EventEmitter<void> = new EventEmitter<void>();\n\n  constructor() {}\n\n  public refresh(): void {\n    this.copyReq.emit();\n  }\n}\n","<div class=\"rect\">\n    <div class=\"w-100\"></div>\n    <div class=\"preview\">\n        <div class=\"system-alert\">\n            <div class=\"system-alert__wrap\">\n                <button class=\"system-alert__close\" title=\"Закрыть\" [routerLink]=\"['/']\">\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.0015 8.98985L13.5371 5.45431C13.816 5.17537 14.2683 5.17537 14.5472 5.45431C14.8262 5.73326 14.8262 6.18552 14.5472 6.46447L11.0117 10L14.5472 13.5355C14.8262 13.8145 14.8262 14.2667 14.5472 14.5457C14.2683 14.8246 13.816 14.8246 13.5371 14.5457L10.0015 11.0102L6.466 14.5457C6.18705 14.8246 5.73479 14.8246 5.45584 14.5457C5.1769 14.2667 5.1769 13.8145 5.45584 13.5355L8.99138 10L5.45584 6.46447C5.1769 6.18552 5.1769 5.73326 5.45584 5.45431C5.73479 5.17537 6.18705 5.17537 6.466 5.45431L10.0015 8.98985Z\" />\n                    </svg>\n                </button>\n                <h2 class=\"system-alert__title\">{{ 'COMMON.EDIT_WARNING' | translate }}</h2>\n                <p class=\"system-alert__txt \">{{ 'COMMON.EDIT_WARNING_' | translate }}</p>\n                <div class=\"system-alert__bar\">\n                    <button class=\"system-alert__confirm\" (click)=\"refresh()\">{{ 'COMMON.WARNING_APPROVE' | translate }}</button>\n                    <button class=\"system-alert__reset\" [routerLink]=\"['/']\">{{ 'COMMON.UNDO' | translate }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n  ","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NewsEditPageComponent } from './news-edit-page.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewsEditPageComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NewsEditPageRoutingModule { }\n","import { Component, Input, EventEmitter, Output, ElementRef, HostListener, OnChanges, SimpleChanges, ChangeDetectionStrategy } from '@angular/core';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ResponsiveService } from '@app/services/responsive.service';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\n\n@Component({\n  selector: 'app-article-editor-topic',\n  templateUrl: './article-editor-topic.component.html',\n  styleUrls: ['./article-editor-topic.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleEditorTopicComponent implements OnChanges {\n  @Input() public article: IArticleViewFull;\n  @Input() public allTopics: ITopicView[] = [];\n\n  @Output() public readonly topicsChange: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @Output() public readonly topicsSaveReq: EventEmitter<number[]> = new EventEmitter<number[]>();\n\n  public open = false;\n  public selected: ITopicView;\n\n  constructor(private readonly ref: ElementRef, public readonly responsive: ResponsiveService) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.allTopics && this.article && changes.allTopics.currentValue !== changes.allTopics.previousValue) {\n      this.setSelected(this.article.topics[0]);\n    }\n  }\n\n  @HostListener('document:click', ['$event']) public onClick(event: Event): void {\n    if (!this.ref.nativeElement.contains(event.target)) {\n      if (this.open) {\n        this.open = false;\n        this.topicsSaveReq.emit(this.article.topics);\n      }\n    }\n  }\n\n  private setSelected(topic: number): void {\n    this.selected = this.allTopics.find((_: ITopicView) => _.meta.id === topic);\n  }\n\n  public toggleDropdown(): void {\n    if (this.open) {\n      this.topicsSaveReq.emit(this.article.topics);\n    }\n    this.open = !this.open;\n  }\n\n  public onChange(topic: ITopicView, value: boolean): void {\n    if (value && !this.article.topics.find((it: number) => it === topic.meta.id) && this.article.topics.length < 4) {\n      this.topicsChange.emit((this.article.topics = this.article.topics.concat(topic.meta.id)));\n    } else if (!value && this.article.topics.find((it: number) => it === topic.meta.id)) {\n      this.topicsChange.emit((this.article.topics = this.article.topics.filter((it: number) => it !== topic.meta.id)));\n    }\n    if (this.article.topics.length === 0) {\n      this.selected = null;\n    } else {\n      this.setSelected(this.article.topics[0]);\n    }\n  }\n\n  public setMainTopic(topicId: number): void {\n    if ((this.article.topics.includes(topicId) && this.article.topics.length <= 4)\n      || (!this.article.topics.includes(topicId) && this.article.topics.length < 4)) {\n      this.topicsChange.emit((this.article.topics = [topicId, ...this.article.topics.filter((id: number) => topicId !== id)]));\n      this.setSelected(topicId);\n    }\n  }\n}\n","<div class=\"container\" [ngClass]=\"{ 'primary-border' : open }\">\n    <div class=\"select btn\" (click)=\"toggleDropdown()\">\n        <div style=\"align-items: center; display: inline-flex;\">\n            <div *ngIf=\"!selected\" class=\"ui-icon-empty\"></div>\n            <span *ngIf=\"!selected\">{{ 'COMMON.CHOOSE_A_TOPIC' | translate }}</span>\n            <app-ui-icon *ngIf=\"selected\" [src]=\"selected.info.picture\" [textAlternative]=\"selected.info.name\" [size]=\"'medium'\"></app-ui-icon>\n            <span *ngIf=\"selected\" class=\"mr-5\">{{ selected.info.name }}</span>\n            <span *ngIf=\"selected && article.topics.length > 1\" class=\"blue-text mr-5\">{{ '+' + (article.topics.length - 1) }}</span>\n            <svg name=\"chevron/down\" class=\"ui-icon\"></svg>\n            <span *ngIf=\"open\" class=\"select-caption\">{{ 'COMMON.SAVE_CHOICE' | translate }}</span>\n        </div>\n        <div class=\"add-info\">\n            <span class=\"f-w-normal mr-20\" [ngClass]=\"{ 'c-primary' : article.author.info.company.isCompany }\">{{ article.author.info | personName }}</span>\n            <span class=\"date\">{{ article.meta.updatedAt | customDate }}</span>\n        </div>\n    </div>\n    <div class=\"sub-info select\">\n        <span *ngIf=\"!responsive.lt.medium\" class=\"grey-text\">{{ 'COMMON.POINT_1_TO_4' | translate }} <svg name=\"star\" class=\"ui-icon\" size=\"15\" style=\"display: inline-block; width: 15px; height: 15px; margin: 0 2px;\"></svg> {{ 'COMMON.POINT_1_TO_4_' | translate }}</span>\n        <span *ngIf=\"responsive.lt.medium\" class=\"grey-text\" style=\"display: inline-block !important;\">{{ 'COMMON.POINT_1_TO_4' | translate }} <svg name=\"star\" class=\"ui-icon\" size=\"15\" style=\"display: inline-block; width: 15px; height: 15px; margin: 0 2px;\"></svg> {{ 'COMMON.POINT_1_TO_4_' | translate }}</span>\n    </div>\n  \n    <ng-scrollbar *ngIf=\"open\" [appearance]=\"'standard'\" thumbClass=\"blue-sb\">\n        <div class=\"dropdown\" [ngClass]=\"{ 'dropdown--active': open }\">\n            <div *ngFor=\"let topic of allTopics\" class=\"dropdown-item\">\n                <div class=\"empty-group\">\n                    <app-ui-icon [src]=\"topic.info.picture\" [textAlternative]=\"topic.info.name\" [size]=\"'medium'\"></app-ui-icon>\n                    <span class=\"dropdown-item-text\">{{ topic.info.name }}</span>\n                </div>\n                <div class=\"actions\">\n                    <svg name=\"star\"\n                        class=\"ui-icon\"\n                        [ngClass]=\"{ 'ui-icon--active': article.topics.indexOf(topic.meta.id) == 0 }\"\n                        (click)=\"setMainTopic(topic.meta.id)\"></svg>\n                    <app-ui-checkbox [checked]=\"article.topics.indexOf(topic.meta.id) >= 0\"\n                                     [disabled]=\"!article.topics.includes(topic.meta.id) && article.topics.length >= 4\" (change)=\"onChange(topic, $event)\"></app-ui-checkbox>\n                </div>\n            </div>\n        </div>\n    </ng-scrollbar>\n</div>\n","import { Component, Input, Output, EventEmitter, ViewChild, ViewChildren, ElementRef, QueryList, HostListener, OnInit, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { first, takeUntil, debounceTime, tap } from 'rxjs/operators';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\n\n@Component({\n  selector: 'app-tag-assign',\n  templateUrl: './tag-assign.component.html',\n  styleUrls: ['./tag-assign.component.scss']\n})\nexport class TagAssignComponent extends AbstractComponent implements OnInit, OnDestroy {\n  @ViewChild('searchResults') private searchResults: ElementRef;\n  @ViewChild('addBtn') private addBtn: ElementRef;\n  @ViewChildren('userTags') private tagObjects: QueryList<ElementRef>;\n\n  @Input() public tags: ITagSimpleView[] = [];\n  @Input() public suggestions: ITagView[] = [];\n\n  @Output() public readonly suggestionsReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly uploadTagsReq: EventEmitter<ITagSimpleView[]> = new EventEmitter<ITagSimpleView[]>();\n\n  private readonly tagsUpdate$: Subject<any> = new Subject<any>();\n\n  private currentlyEditedTag: HTMLInputElement;\n  private currentlyEditedId: number;\n\n  public readonly current$: Subject<string> = new Subject<string>();\n  public readonly currentId$: Subject<number> = new Subject<number>();\n\n  public set currentlyEdited(target: number) {\n    this.currentId$.next(target);\n    this.currentlyEditedId = target;\n    const el = this.tagObjects.toArray()[target].nativeElement as HTMLLIElement;\n    this.currentlyEditedTag = el.firstChild as HTMLInputElement;\n    this.current$.next(this.currentlyEditedTag.value);\n    el.appendChild(this.searchResults.nativeElement);\n  }\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.tagsUpdate$.pipe(\n      debounceTime(1500),\n      tap(() => this.upload()),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n    this.current$.subscribe((tags: string) => this.updateSuggestions(tags));\n  }\n\n  @HostListener('document:click', ['$event']) public clicked(event: Event): void {\n    if (this.addBtn && !this.addBtn.nativeElement.contains(event.target)) {\n      this.blur();\n    }\n  }\n\n  private upload(): void {\n    this.uploadTagsReq.emit(this.tags);\n  }\n\n  private blur(): void {\n    let pos = -1;\n    for (const tag of this.tags) {\n      pos++;\n      if (tag.content === '') {\n        this.remove(pos);\n      }\n    }\n  }\n\n  public change(tag: ITagSimpleView): void {\n    if (tag.content) {\n      tag.id = null;\n      this.tagsUpdate$.next();\n    }\n  }\n\n  public input(event: Event): boolean {\n    const target: HTMLInputElement = event.target as HTMLInputElement;\n    const content: string = target.value.replace(/[^а-яa-z0-9_-]/gi, '');\n    this.current$.next(content);\n    return true;\n  }\n\n  public accept(tag: ITagView): void {\n    if (tag.content) {\n      this.tags[this.currentlyEditedId] = {\n        content: tag.content,\n        id: tag.meta.id,\n      };\n      this.tagsUpdate$.next();\n    }\n  }\n\n  public add(): void {\n    if (this.tags.length < 10) {\n      this.tagObjects.changes.pipe(first(), takeUntil(this.ngOnDestroy$)).subscribe((list: QueryList<ElementRef>) => {\n        list.last.nativeElement.firstChild.focus();\n      });\n      this.tags.push({ content: '', id: null });\n      this.updateSuggestions('');\n    }\n  }\n\n  public remove(i: number): void {\n    this.tags.length > 1 ? this.tags.splice(i, 1) : (this.tags = []);\n    this.upload();\n  }\n\n  public updateSuggestions(content: string): void {\n    this.suggestionsReq.emit(content);\n  }\n}\n","<ul class=\"c-primary structural item-space-10 subtitle-1\">\n    <li #userTags *ngFor=\"let tag of tags; let i = index\" style='position: relative!important;' class=\"v-center\">\n        <input class=\"subtitle-2 margin-right-4 c-primary\"\n               spellcheck=\"false\"\n               type=\"text\"\n               maxlength=\"32\"\n               [(ngModel)]=\"tag.content\"\n               (input)=\"input($event)\"\n               (focus)=\"currentlyEdited = i\"\n               (change)=\"change(tag)\"\n               (keyup.Space)=\"add()\"\n               (keydown.Enter)=\"$event.preventDefault()\"\n               (keyup.Enter)=\"add()\">\n        <svg name=\"report\" class=\"f-primary clickable\" size=\"14\" (click)=\"remove(i)\"></svg>\n    </li>\n    <li #addBtn *ngIf=\"tags.length < 10\" (click)=\"add()\">\n        <span class=\"subtitle-1 clickable\">{{ ('COMMON.ADD_TAG' | translate) + ' (' + ('COMMON.MORE' | translate) + ' ' + (10 - tags.length) + ')' }}</span>\n    </li>\n</ul>\n\n<ng-container *ngIf=\"(suggestions || []) as data\">\n    <ul #searchResults class=\"search-results block-card fade-1 subtitle-1 item-space-10\"\n        [class.shown]=\"data.length\">\n        <li *ngFor=\"let s of data\" class=\"clickable\" (mousedown)=\"accept(s)\">\n            {{ s.content + ' (' + s.postCount + ')' }}\n        </li>\n    </ul>\n</ng-container>\n","import { Injectable } from '@angular/core';\nimport { TagsService } from '@api/routes/tags.service';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { Observable, forkJoin, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResolveTagsService {\n  constructor(private readonly tagsService: TagsService) { }\n\n  public resolveTagIds$(tags: ITagSimpleView[]): Observable<number[]> {\n    return tags.length > 0\n      ? forkJoin(\n          tags.map((tag: ITagSimpleView) => {\n            let result: Observable<number>;\n            if (!tag.id) {\n              result = this.tagsService.find$(tag.content).pipe(\n                switchMap((_: number) => _ ? of(_) : this.tagsService.create$(tag.content)),\n              );\n            } else if (typeof tag.id === 'number') {\n              result = of(tag.id);\n            }\n            return result;\n          }),\n        )\n      : of([]);\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { PlatformService } from '@shared/services/platform.service';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  distinctUntilChanged,\n  map,\n  mapTo,\n  catchError,\n  takeUntil,\n  debounceTime,\n  tap,\n  first,\n  filter,\n  defaultIfEmpty,\n  switchMap,\n  concatMap\n} from 'rxjs/operators';\nimport { combineLatest, BehaviorSubject, of, Observable, forkJoin, ReplaySubject, from } from 'rxjs';\nimport { ArticlesService } from '@api/routes/articles.service';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { TagsService } from '@api/routes/tags.service';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { TagOrderEnum } from '@api/schemas/tags/tag-order.enum';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { ResponsiveService } from '@app/services/responsive.service';\nimport { TopicParams } from './topic-params.type';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { LocaleEnum } from '@api/schemas/locale/locale.enum';\nimport { ResolveTagsService } from '@shared/services/resolve-tags.service';\nimport { Store } from '@ngxs/store';\nimport { AddToProperty } from '@app/store/user-stats/actions/add-to-property.action';\nimport { EUserStatsProperty } from '@app/store/user-stats/enums/user-stats-property.enum';\n\n\n@Component({\n  selector: 'app-news-edit-page',\n  templateUrl: './news-edit-page.component.html',\n  styleUrls: ['./news-edit-page.component.scss']\n})\nexport class NewsEditPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  private readonly isSubmitting$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  private readonly tagsPendingUpload$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n\n  public readonly suggestions$: ReplaySubject<ITagView[]> = new ReplaySubject<ITagView[]>(1);\n  public readonly current$: ReplaySubject<string> = new ReplaySubject<string>(1);\n\n  public articleSource: string;\n  public articleData: IArticleViewFull;\n  public articleTags: ITagView[];\n  public allTopics: ITopicView[] = [];\n  public article: IArticleView;\n  public topic: ITopicView;\n  public openPreview = false;\n  public published = false;\n\n  constructor(\n    private readonly route: ActivatedRoute,\n    private readonly articlesService: ArticlesService,\n    private readonly topicsService: TopicsService,\n    private readonly tagsService: TagsService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly router: Router,\n    private readonly resolveTagsService: ResolveTagsService,\n    private readonly store: Store,\n    public readonly platformsService: PlatformService,\n    public readonly responsive$: ResponsiveService,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (this.platformsService.isBrowser) {\n      setTimeout(() => {\n        this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n      });\n\n      this.isSubmitting$.next(false);\n      this.route.params.pipe(\n        distinctUntilChanged((x: any, y: any) => x.id === y.id),\n        map((_: any) => +_.id),\n        switchMap((_: number) => combineLatest([this.articlesService.getSource$(_), this.articlesService.getSingle$(_)])),\n        concatMap(([source, data]: [string, IArticleViewFull]) => {\n          return this.tagsService.getMultiple$(data.tags).pipe(\n            defaultIfEmpty([]),\n            map((tags: ITagView[]) => [source, data, tags])\n          );\n        }),\n        takeUntil(this.ngOnDestroy$),\n      ).subscribe(([source, data, tags]: [string, IArticleViewFull, ITagView[]]) => {\n        this.articleSource = source;\n        this.articleData = data;\n        this.articleTags = tags;\n        this.published = data.status.publicationStage === PublicationStageEnum.PUBLISHED;\n      });\n      this.getTopicsPage();\n      this.setSuggestions();\n    }\n  }\n\n  private setSuggestions(): void {\n    const defaultSuggestions$: ReplaySubject<IPageResponse<ITagView>> = new ReplaySubject<IPageResponse<ITagView>>(1);\n\n    this.tagsService.get$(0, { order: TagOrderEnum.POST_COUNT }).pipe(\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(defaultSuggestions$);\n\n    this.current$.pipe(\n      distinctUntilChanged(),\n      debounceTime(500),\n      switchMap((_: string) => _ === '' || !_ ? defaultSuggestions$ : this.tagsService.get$(0, { query: _ })),\n      map((_: IPageResponse<ITagView>) => _.content as ITagView[]),\n      catchError(() => of([])),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(this.suggestions$);\n  }\n\n  private getTopicsPage(params: TopicParams = { loading: false, page: 0, total: 1 }): void {\n    params.loading = true;\n    this.topicsService.get$(params.page, { locale: LocaleEnum.ALL })\n      .pipe(takeUntil(this.ngOnDestroy$))\n      .subscribe((_: IPageResponse<ITopicView>) => {\n      const result: ITopicView[] = [...this.allTopics];\n      result.push(..._.content);\n      this.allTopics = result.sort((x: ITopicView, y: ITopicView) => x.info.name.localeCompare(y.info.name));\n      params.total = _.totalPages;\n      params.loading = false;\n      params.page++;\n      if (params.page < params.total) {\n        this.getTopicsPage(params);\n      }\n    });\n  }\n\n  private save$(article: IArticleViewFull): Observable<any> {\n    return forkJoin([\n      article.html !== '' ? this.articlesService.putSource$(this.articleData.meta.id, article.html) : of(null),\n      this.articlesService.updateSummary$(this.articleData.meta.id, article.info.summary),\n      this.articlesService.putTopics$(this.articleData.meta.id, article.topics),\n      this.tagsPendingUpload$.pipe(\n        filter((_: boolean) => !_),\n        first(),\n      ),\n    ]);\n  }\n\n  public updateTopics(topics: number[]): void {\n    this.articlesService.putTopics$(this.articleData.meta.id, topics).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateCover(cover: File): void {\n    this.articlesService.updateCover$(this.articleData.meta.id, cover).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateTitle(title: string): void {\n    this.articlesService.updateTitle$(this.articleData.meta.id, title).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public updateSummary(summary: string): void {\n    this.articlesService.updateSummary$(this.articleData.meta.id, summary).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public putSource(source: string): void {\n    this.articlesService.putSource$(this.articleData.meta.id, source).pipe(takeUntil(this.ngOnDestroy$)).subscribe();\n  }\n\n  public copy(): void {\n    this.articlesService.copy$(this.articleData.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.published = false;\n      this.articleData.status.publicationStage = PublicationStageEnum.DRAFT;\n    });\n  }\n\n  public saveAndPublish(article: IArticleViewFull): void {\n    this.isSubmitting$.next(true);\n    this.article = { ...article } as IArticleView;\n    this.topic = this.allTopics.find((_: ITopicView) => _.meta.id === (this.articleData.topics ? this.articleData.topics[0] : []));\n    this.save$(article)\n      .pipe(\n        switchMap(() => {\n          if (this.articleData.status.publicationStage === PublicationStageEnum.DRAFT) {\n            return this.publishOrSubmit$();\n          } else {\n            return of(true);\n          }\n        }),\n        switchMap((published: boolean) => {\n          return published\n            ? (() => {\n                this.store.dispatch(new AddToProperty(1, EUserStatsProperty.POSTS));\n                return from(this.router.navigate(['/', 'news', article.meta.id]));\n              })()\n            : this.openPreview$();\n        }),\n        takeUntil(this.ngOnDestroy$))\n      .subscribe({\n        complete: () => this.isSubmitting$.next(false),\n      });\n  }\n\n  public tagsUpload(tags: ITagSimpleView[]): void {\n    this.tagsPendingUpload$.next(true);\n    this.resolveTagsService.resolveTagIds$(tags).pipe(\n      first(),\n      switchMap((res: number[]) => {\n        return this.articlesService.putTags$(this.articleData.meta.id, res).pipe();\n      }),\n      catchError((error: any) => {\n        this.tagsPendingUpload$.next(false);\n        throw error;\n      }),\n      tap(() => this.tagsPendingUpload$.next(false)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n  }\n\n  public tagsSuggestions(tag: string): void {\n    this.current$.next(tag);\n  }\n\n  public openPreview$(): Observable<any> {\n    return this.articlesService.getSingle$(this.article.meta.id).pipe(\n      switchMap((view: IArticleViewFull) => {\n        if (view.topics[0]) { return this.topicsService.getOne$(view.topics[0]).pipe(map((topic: ITopicViewFull) => ({ view, topic }))); }\n        return of({ view, topic: null });\n      }),\n      tap((_: { view: IArticleViewFull, topic: ITopicViewFull }) => {\n        this.article = _.view;\n        this.topic = _.topic;\n        this.openPreview = true;\n      }),\n      takeUntil(this.ngOnDestroy$)\n    );\n  }\n\n  public preOff(): void {\n    this.articlesService.getSingle$(this.article.meta.id).pipe(\n      switchMap((_: IArticleViewFull) => {\n        if (_.status.publicationStage === PublicationStageEnum.PUBLISHED) {\n          return this.articlesService.copy$(this.article.meta.id).pipe(\n            switchMap((id: number) => this.articlesService.delete$(this.article.meta.id).pipe(\n              tap(() => this.router.navigate(['/news', id, 'edit']))\n            )),\n          );\n        } else if (_.status.publicationStage === PublicationStageEnum.REVIEWING) {\n          return this.articlesService.submit$(this.article.meta.id, true).pipe(\n            tap(() => this.openPreview = false)\n          );\n        }\n      }),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n  }\n\n  public publishOrSubmit$(): Observable<boolean> {\n    return this.articlesService.publish$(this.articleData.meta.id).pipe(\n      mapTo(true),\n      catchError((err: any) => {\n        if (err.status === 403) {\n          return this.articlesService.submit$(this.articleData.meta.id).pipe(mapTo(false));\n        }\n        throw err;\n      }),\n    );\n  }\n\n  public saveAsDraft(article: IArticleViewFull): void {\n    this.isSubmitting$.next(true);\n    this.save$(article).pipe(\n      tap(() => this.router.navigate(['/', 'user', 'me', 'drafts'])),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe({\n      complete: () => this.isSubmitting$.next(false),\n    });\n  }\n}\n","<div *ngIf=\"platformsService.isBrowser\">\n    <app-article-editor \n        *appLet=\"responsive$.lt.medium | async as isMediumResponsive\"\n        [isMediumResponsive]=\"isMediumResponsive\"\n        [article]=\"articleData\" \n        [initialData]=\"articleSource\" \n        [allTopics]=\"allTopics\" \n        [tags]=\"articleTags\"\n        [suggestions]=\"suggestions$ | async\"\n        (putSourceReq)=\"putSource($event)\"\n        (updateTopicsReq)=\"updateTopics($event)\"\n        (updateCoverReq)=\"updateCover($event)\"\n        (updateSummaryReq)=\"updateSummary($event)\"\n        (updateTitleReq)=\"updateTitle($event)\"\n        (saveAndPublishReq)=\"saveAndPublish($event)\"\n        (tagsSuggestionsReq)=\"tagsSuggestions($event)\"\n        (tagsUploadReq)=\"tagsUpload($event)\">\n    </app-article-editor>\n\n    <app-article-editor-preview *ngIf=\"openPreview\" [article]=\"article\" [topic]=\"topic\"></app-article-editor-preview>\n\n    <app-article-republish *ngIf=\"published\" (copyReq)=\"copy()\"></app-article-republish>\n</div>\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\n\n@Component({\n  selector: 'app-article-editor-preview',\n  templateUrl: './article-editor-preview.component.html',\n  styleUrls: ['../article-editor-shared-styles.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ArticleEditorPreviewComponent {\n  @Input() public article: IArticleView;\n  @Input() public topic: ITopicView;\n\n  constructor() { }\n}\n","<div class=\"rect\">\n    <div class=\"w-100\"></div>\n    <div class=\"on-moderation\">\n        <div class=\"on-moderation__wrap\">\n            <button class=\"on-moderation__close\" title=\"Закрыть\" [routerLink]=\"['/']\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.0015 8.98985L13.5371 5.45431C13.816 5.17537 14.2683 5.17537 14.5472 5.45431C14.8262 5.73326 14.8262 6.18552 14.5472 6.46447L11.0117 10L14.5472 13.5355C14.8262 13.8145 14.8262 14.2667 14.5472 14.5457C14.2683 14.8246 13.816 14.8246 13.5371 14.5457L10.0015 11.0102L6.466 14.5457C6.18705 14.8246 5.73479 14.8246 5.45584 14.5457C5.1769 14.2667 5.1769 13.8145 5.45584 13.5355L8.99138 10L5.45584 6.46447C5.1769 6.18552 5.1769 5.73326 5.45584 5.45431C5.73479 5.17537 6.18705 5.17537 6.466 5.45431L10.0015 8.98985Z\" />\n                </svg>\n            </button>\n            <h2 class=\"on-moderation__title\">Благодарим Вас за публикацию!</h2>\n            <div class=\"on-moderation__row\">\n                <div *ngIf=\"topic\" class=\"on-moderation__category\">\n                    <app-ui-icon class=\"margin-right-10\" [src]=\"topic.info.picture || ''\"\n                                 [textAlternative]=\"topic.info.name || ''\"\n                                 [size]=\"'medium'\"></app-ui-icon>\n                    <div class=\"on-moderation__category-txt\">{{ topic.info.name }}</div>\n                </div>\n                <div class=\"on-moderation__row-bar\">\n                <div *ngIf=\"!article.author.info.company.isCompany\" class=\"on-moderation__author\">{{ article.author.info | personName }}</div>\n                <div *ngIf=\"article.author.info.company.isCompany\" class=\"on-moderation__company\">{{ article.author.info | personName }}</div>\n                    <time class=\"on-moderation__time\" datetime=\"2020-04-06 12:16:50+03:00\">{{ article.status.publishedAt | customDate }}</time>\n                </div>\n            </div>\n            <div class=\"on-moderation__prev-title system-alert__title\">{{ article.info.title }}</div>\n            <div class=\"on-moderation__prev-txt system-alert__txt\">\n                Редактор проверит публикацию на соответствие правилам портала и\n                совсем скоро разместит в ленте. В дальнейшем Ваши материалы могут\n                размещаться без премодерации. \n            </div>\n            <div class=\"on-moderation__bar\">\n                <button class=\"system-alert__confirm\" [routerLink]=\"['/news', article.meta.id]\">Посмотреть публикацию</button>\n                <button class=\"system-alert__reset\" [routerLink]=\"['/all']\">В ленту публикаций</button>\n            </div>\n        </div>\n    </div>\n</div>\n","import {\n  Component,\n  OnInit,\n  ViewChild,\n  Output,\n  EventEmitter,\n  Input,\n  SimpleChanges,\n  OnDestroy,\n  OnChanges,\n} from '@angular/core';\nimport { asyncScheduler, BehaviorSubject, ReplaySubject } from 'rxjs';\nimport { IArticleViewFull } from '@api/schemas/article/article-view-full.interface';\nimport { CKEditorComponent } from '@ckeditor/ckeditor5-angular';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { debounceTime, filter, tap, takeUntil } from 'rxjs/operators';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { ITagSimpleView } from '@shared/interfaces/tag-simple-view.interface';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-article-editor',\n  templateUrl: './article-editor.component.html',\n  styleUrls: ['../article-editor-shared-styles.scss']\n})\nexport class ArticleEditorComponent extends AbstractComponent implements OnInit, OnDestroy, OnChanges {\n  @ViewChild('editor') public ed: any;\n\n  @Input() public article: IArticleViewFull;\n  @Input() public initialData: string;\n  @Input() public tags: ITagView[] = [];\n  @Input() public allTopics: ITopicView;\n  @Input() public suggestions: ITopicView[];\n  @Input() public isMediumResponsive: boolean;\n\n  @Output() public readonly gone: EventEmitter<any> = new EventEmitter<any>();\n  @Output() public readonly putSourceReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly updateTopicsReq: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @Output() public readonly updateCoverReq: EventEmitter<File> = new EventEmitter<File>();\n  @Output() public readonly updateSummaryReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly updateTitleReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly saveAndPublishReq: EventEmitter<IArticleView> = new EventEmitter<IArticleView>();\n  @Output() public readonly tagsSuggestionsReq: EventEmitter<string> = new EventEmitter<string>();\n  @Output() public readonly tagsUploadReq: EventEmitter<ITagSimpleView[]> = new EventEmitter<ITagSimpleView[]>();\n\n  public readonly dataChanged$: ReplaySubject<void> = new ReplaySubject<void>(1);\n  public readonly isSubmitting$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly wysiwygValueChange$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  public editor: CKEditorComponent;\n  public form: FormGroup;\n  public coverSrc: string;\n  public openEditor = false;\n\n  public currentArticle: IArticleView;\n\n  public published: boolean;\n\n  public authorId = -1;\n  public topicPrev: ITopicView;\n\n  public id: number;\n\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly router: Router\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.dataChanged$.pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.setData();\n      this.setForm();\n    });\n    this.setEditorUpdate();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ((changes.article || changes.initialData) && this.article) {\n      this.dataChanged$.next();\n    }\n  }\n\n  private setData(): void {\n    this.currentArticle = this.article;\n    this.published = this.article.status.publicationStage === PublicationStageEnum.PUBLISHED;\n    if (this.article.info.cover !== null) {\n      this.coverSrc = this.article.info.cover;\n    }\n    this.authorId = this.article.author.meta.id;\n    this.currentArticle.topics = this.article.topics;\n  }\n\n  private setEditorUpdate(): void {\n    this.wysiwygValueChange$.pipe(\n      debounceTime(300),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe((value: string) => {\n      if (value !== '') {\n        this.putSourceReq.emit(value);\n        this.article.html = value;\n      }\n    });\n  }\n\n  private setForm(): void {\n    const group: FormGroup = this.fb.group({\n      title: this.fb.control(this.article.info.title),\n      summary: this.fb.control(this.article.info.summary),\n      cover: this.fb.control(this.article.info.cover),\n    });\n\n    group.valueChanges.pipe(\n      debounceTime(300, asyncScheduler),\n      filter((_: any) => _.title !== this.currentArticle.info.title || _.summary !== this.currentArticle.info.summary),\n      tap((_: any) => {\n        if (_.title !== this.currentArticle.info.title) {\n          this.updateTitleReq.emit(_.title);\n          this.currentArticle.info.title = _.title;\n        }\n        if (_.summary !== this.currentArticle.info.summary) {\n          this.updateSummaryReq.emit(_.summary);\n          this.currentArticle.info.summary = _.summary;\n        }\n      }),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n\n    this.form = group;\n  }\n\n  public openEdit(): void {\n    this.openEditor = true;\n    setTimeout(() => {\n      this.ed.focus();\n    });\n  }\n\n  public tagsSuggestions(tags: string): void {\n    this.tagsSuggestionsReq.emit(tags);\n  }\n\n  public tagsUpload(tags: ITagSimpleView[]): void {\n    this.tagsUploadReq.emit(tags);\n  }\n\n  public updateTopics(topics?: number[]): void {\n    this.updateTopicsReq.emit(topics ? topics : this.currentArticle.topics);\n  }\n\n  public onCoverUpload(files: FileList): void {\n    const cover: File = files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(files[0]);\n    reader.onload = (e: any) => {\n      this.coverSrc = e.target.result;\n    };\n    this.updateCoverReq.emit(cover);\n  }\n\n  public saveAndPublish(): void {\n    this.saveAndPublishReq.emit(this.currentArticle);\n  }\n\n  public saveAsDraft(): void {\n    this.router.navigate(['/user', this.currentArticle.author.info.username\n      ? this.currentArticle.author.info.username : this.currentArticle.author.meta.id, 'drafts']);\n  }\n\n  public topicsChange(topics: number[]): void {\n    this.currentArticle.topics = topics;\n  }\n}\n","<app-ui-card>\n    <form *ngIf=\"form\" [formGroup]=\"form\" (ngSubmit)=\"saveAndPublish()\">\n        <div class=\"name\">\n            <app-ui-form-control>\n                <div class=\"form-textarea\">\n                    <textarea class=\"ui-input-h1\" autosize [minRows]=\"1\" formControlName=\"title\" [placeholder]=\"'COMMON.PUBLICATION_TITLE' | translate\" maxlength=\"100\"></textarea>\n                    <div *ngIf=\"!(isMediumResponsive)\" class=\"counter head-counter-resp\"><span>{{ 100 - (form.get('title').value ? form.get('title').value.length : 0) + '/100' }}</span></div>\n                    <div *ngIf=\"isMediumResponsive\" class=\"counter head-counter-resp\"><span>{{ 100 - (form.get('title').value ? form.get('title').value.length : 0) }}</span></div>\n                </div>\n            </app-ui-form-control>\n        </div>\n\n        <app-article-editor-topic [article]=\"currentArticle\" [allTopics]=\"allTopics\" (topicsChange)=\"topicsChange($event)\" (topicsSaveReq)=\"updateTopics($event)\"></app-article-editor-topic>\n\n        <app-ui-form-control class=\"counter-in\">\n            <span #formControlHeader class=\"label\">{{ 'COMMON.PUBLICATIONS_ANNOUNCEMENT' | translate }}</span>\n            <div class=\"form-textarea\">\n                <textarea #formControlAction\n                          class=\"form-textarea\"\n                          autosize\n                          [minRows]=\"1\"\n                          formControlName=\"summary\"\n                          [placeholder]=\"'COMMON.WRITE_AN_ANNOUNCEMENT' | translate\"\n                          maxlength=\"300\">\n                </textarea>\n                <div *ngIf=\"!(isMediumResponsive)\" class=\"counter head-counter-resp\"><span>{{ 300 - (form.get('summary').value ? form.get('summary').value.length : 0) + '/300' }}</span></div>\n                <div *ngIf=\"isMediumResponsive\" class=\"counter head-counter-resp\"><span>{{ 300 - (form.get('summary').value ? form.get('summary').value.length : 0) }}</span></div>\n            </div>\n        </app-ui-form-control>\n\n        <app-ui-form-control>\n            <span #formControlHeader class=\"label\">{{ 'COMMON.PUBLICATION_TEXT' | translate }}</span>\n            <app-wysiwyg-editor #editor\n                                #formControlAction\n                                *ngIf=\"(initialData !== '' && initialData !== null) || openEditor\" [initialData]=\"initialData\"\n                                (valueChange)=\"wysiwygValueChange$.next($event)\">\n            </app-wysiwyg-editor>\n            <div *ngIf=\"(initialData === '' || initialData === null) && !openEditor\" (mousedown)=\"openEdit()\">\n                <textarea class=\"form-textarea\" autosize [minRows]=\"1\" [placeholder]=\"'COMMON.CREATE_PUBLICATION' | translate\" readonly></textarea>\n            </div>\n        </app-ui-form-control>\n\n        <app-ui-form-control>\n            <p class=\"label margin-bottom-15\">{{ 'COMMON.PUBLICATION_TAGS' | translate }}</p>\n            <app-tag-assign *ngIf=\"article\"\n                            [tags]=\"tags\"\n                            [suggestions]=\"suggestions\"\n                            (suggestionsReq)=\"tagsSuggestions($event)\"\n                            (uploadTagsReq)=\"tagsUpload($event)\">\n            </app-tag-assign>\n        </app-ui-form-control>\n\n        <hr class=\"blue-line margin-bottom-30\"/>\n\n        <img *ngIf=\"coverSrc\" src=\"{{ coverSrc }}\" style=\"width: 100%; margin-bottom: 5px; object-fit: cover;\" />\n        <div class=\"caption c-caption margin-bottom-15\">\n            <span>{{ 'COMMON.RECOMMENDED_IMAGE_SIZE' | translate }}</span>\n        </div>\n\n        <div class=\"form-actions\">\n            <div class=\"cover-upload\">\n                <svg name=\"attach\"></svg>\n                <label for=\"cover\">{{ 'COMMON.PUBLICATION_IMAGE' | translate }}</label>\n                <input id=\"cover\" type=\"file\"\n                    accept=\"image/*\"\n                    (change)=\"onCoverUpload($any($event).target.files)\">\n            </div>\n            <div class=\"buttons\">\n                <button class=\"drafts button-1\" type=\"button\" (click)=\"saveAsDraft()\" [disabled]=\"isSubmitting$ | async\">\n                    <span>{{ 'COMMON.TO_DRAFTS' | translate }}</span>\n                    <svg name=\"drafts\"></svg>\n                </button>\n                <button class=\"submit button-1\" type=\"submit\" [disabled]=\"isSubmitting$ | async\">\n                    <span>{{ 'COMMON.PUBLISH' | translate }}</span>\n                    <svg name=\"paper-airplane\" fill=\"#00B7FF\"></svg>\n                </button>\n            </div>\n        </div>\n    </form>\n</app-ui-card>\n"],"sourceRoot":"webpack:///"}