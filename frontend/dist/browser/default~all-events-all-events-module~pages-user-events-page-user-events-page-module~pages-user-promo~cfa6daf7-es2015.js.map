{"version":3,"sources":["./src/app/modules/events/event-preview/event-preview.module.ts","./src/app/shared/modules/user-info/user-info.component.ts","./src/app/shared/modules/user-info/user-info.component.html","./src/app/modules/events/event-preview/event-preview.component.ts","./src/app/modules/events/event-preview/event-preview.component.html","./src/app/shared/modules/user-info/user-info.module.ts"],"names":[],"mappings":"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","file":"default~all-events-all-events-module~pages-user-events-page-user-events-page-module~pages-user-promo~cfa6daf7-es2015.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { EventPreviewComponent } from './event-preview.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { SvgModule } from '@shared/modules/svg/svg.module';\nimport { UserInfoModule } from '@shared/modules/user-info/user-info.module';\n\n@NgModule({\n  declarations: [EventPreviewComponent],\n  imports: [\n    CommonModule,\n    SvgModule,\n    RouterModule,\n    SharedPipesModule,\n    SharedComponentsModule,\n    UserInfoModule,\n    CommonDirectivesModule,\n    SharedUiModule,\n    TranslateModule.forChild(),\n  ],\n  exports: [EventPreviewComponent],\n})\nexport class EventPreviewModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { IUserViewBase } from '@api/schemas/user/user-view-base.interface';\n\n\n@Component({\n  selector: 'app-user-info',\n  templateUrl: './user-info.component.html',\n  styleUrls: ['./user-info.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class UserInfoComponent {\n  @Input() public user: IUserViewBase;\n}\n","<div class=\"v-center\">\n    <a [routerLink]=\"user ? (user | accountUrl) : ''\" class=\"v-center\">\n        <app-ui-icon class=\"margin-right-10\" [src]=\"user?.info.picture\" [textAlternative]=\"user ? (user.info | personName) : ''\"></app-ui-icon>\n        <span class=\"subtitle-1\">{{ user ? (user.info | personName) : '' }}</span>\n    </a>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output, OnDestroy } from '@angular/core';\nimport { ShowcasesService } from '@api/routes/showcases.service';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { SessionService } from '@app/services/session.service';\nimport { UserDropdownService } from '@layout/shared/services/user-dropdown.service';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { BehaviorSubject } from 'rxjs';\nimport { switchMap, takeUntil } from 'rxjs/operators';\nimport { EventsService } from '@api/routes/events.service';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { ICreatedObject } from '@api/schemas/object/created-object.interface';\nimport { TranslateService } from '@ngx-translate/core';\n\n\n@Component({\n  selector: 'app-event-preview',\n  templateUrl: './event-preview.component.html',\n  styleUrls: ['./event-preview.component.scss'],\n})\nexport class EventPreviewComponent extends AbstractComponent implements OnInit, OnDestroy {\n  @Output() public readonly gone: EventEmitter<number> = new EventEmitter<number>();\n  @Output() public readonly goneBookmarked: EventEmitter<[IEventView, string]> = new EventEmitter<[IEventView, string]>();\n\n  @Input() public set event(data: IEventView) {\n    this.event$.next(data);\n    this.isOwner = this.sessionService.userId && this.sessionService.userId === data.company.meta.id;\n  }\n  public get event(): IEventView {\n    return this.event$.value;\n  }\n\n  public readonly event$: BehaviorSubject<IEventView> = new BehaviorSubject<IEventView>(null);\n  public readonly publicationStageEnum: typeof PublicationStageEnum = PublicationStageEnum;\n\n  public isOwner = false;\n\n  public pipeLng: string = this.translateService.currentLang === 'ru' ? 'ru_RU' : 'en_US';\n\n  public get dateWithTime(): boolean {\n    return (this.event.info.date % 10) === 0;\n  }\n\n  constructor(\n    private readonly eventsService: EventsService,\n    private readonly sessionService: SessionService,\n    private readonly showcaseService: ShowcasesService,\n    private readonly translateService: TranslateService,\n    public readonly userDropdown: UserDropdownService,\n  ) { super(); }\n\n  ngOnInit(): void {\n    this.sessionService.user$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((user: IUserViewFull) => {\n      this.isOwner = user && user.meta.id === this.event.company.meta.id;\n    });\n  }\n\n  public toggleBookmark(): void {\n    if (this.sessionService.loggedIn$.value) {\n      this.eventsService.bookmark$(this.event.meta.id, this.event.bookmarks.you).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.event.bookmarks.you = !this.event.bookmarks.you;\n        if (!this.event.bookmarks.you) {\n          this.goneBookmarked.next([this.event, 'event']);\n        }\n      });\n    } else {\n      this.userDropdown.setShowDropdown(true);\n    }\n  }\n\n  public hide(): void {\n    const id = this.event.meta.id;\n    this.eventsService.hide$(id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.gone.emit(id);\n    });\n  }\n\n  public publish(value: boolean): void {\n    if (value) {\n      this.eventsService.publish$(this.event.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.event.info.publicationStage = PublicationStageEnum.PUBLISHED;\n      });\n    } else {\n      this.eventsService.withdraw$(this.event.meta.id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n        this.event.info.publicationStage = PublicationStageEnum.DRAFT;\n      });\n    }\n  }\n\n  public showcase(): void {\n    this.eventsService.showcase$(this.event.meta.id).pipe(\n      switchMap((_: ICreatedObject) => this.showcaseService.navigate$(_)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n  }\n\n  public delete(): void {\n    const id = this.event.meta.id;\n    this.eventsService.delete$(id).pipe(takeUntil(this.ngOnDestroy$)).subscribe(() => {\n      this.gone.emit(id);\n    });\n  }\n}\n","<header class=\"v-center margin-bottom-20\">\n    <app-user-info class=\"margin-right-20\" [user]=\"event.company\"></app-user-info>\n    <span *ngIf=\"event.info.publicationStage !== publicationStageEnum.PUBLISHED\" class=\"overline c-caption\">Не опубликовано</span>\n    <app-action-menu-event class=\"align-right\" *appLoggedIn [data]=\"event\" [own]=\"isOwner\" (gone)=\"this.gone.emit(event.meta.id)\"></app-action-menu-event>\n</header>\n<main>\n\n    <h3 class=\"margin-bottom-15 fade-0\" >\n        <a [routerLink]=\"['/events', event.meta.id]\">{{ event.info.name }}</a>\n    </h3>\n    <h5 class=\"margin-bottom-15 fade-2\">\n        {{ dateWithTime\n      ? (event.info.date | date:(pipeLng === 'ru_RU' ? 'd MMMM в HH:00' : 'd MMMM in HH:00'):null:pipeLng)\n      : (event.info.date | date:'d MMMM':null:pipeLng) }} {{ event.info.city }}\n    </h5>\n    <p class=\"body-1\">{{ event.info.announcement }}</p>\n</main>\n<footer class=\"v-center\">\n    <div class=\"v-center event-stats\">\n        <div class=\"v-center margin-right-20\">\n            <svg name=\"bookmark\" class=\"margin-right-4 icon f-gray clickable\" [class.active]=\"event.bookmarks && event.bookmarks.you\" (click)=\"toggleBookmark()\"></svg>\n            <span class=\"subtitle-2 c-gray\">{{ event.bookmarks.count }}</span>\n        </div>\n        <div class=\"v-center margin-right-20\">\n            <svg name=\"view\" class=\"margin-right-4 icon f-gray\"></svg>\n            <span class=\"subtitle-2 c-gray\">{{ event.views.count }}</span>\n        </div>\n        <app-share [url]=\"['/events', event.meta.id] | url\"></app-share>\n    </div>\n    <a class=\"align-right subtitle-2 fade-2 v-center\" [routerLink]=\"['/events', event.meta.id]\">{{ 'COMMON.TO_THE_EVENT' | translate }}\n        <svg name=\"chevron/right\" class=\"f-gray\"></svg>\n    </a>\n</footer>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { UserInfoComponent } from './user-info.component';\n\n\n\n@NgModule({\n  declarations: [UserInfoComponent],\n  imports: [CommonModule, SharedPipesModule, RouterModule, SharedUiModule],\n  exports: [UserInfoComponent],\n})\nexport class UserInfoModule {}\n"],"sourceRoot":"webpack:///"}