{"version":3,"sources":["webpack:///src/app/shared/services/users-resolver.service.ts","webpack:///src/app/modules/user/pages/user-events-page/event-filters.function.ts","webpack:///src/app/shared/classes/pageable-conetnt.class.ts","webpack:///src/app/modules/user/pages/user-events-page/user-events-page.module.ts","webpack:///src/app/shared/utils/not-found.operator.ts","webpack:///src/app/modules/user/pages/user-events-page/user-events-page-routing.module.ts","webpack:///src/app/modules/user/pages/user-events-page/user-events-page.component.ts","webpack:///src/app/modules/user/pages/user-events-page/user-events-page.component.html"],"names":["UsersResolverService","usersService","router","resolve","route","getSingle$","params","id","pipe","providedIn","eventFilters","translateService","text","instant","data","EXHIBITIONS","TRAINING","REGATTAS","FLOTILLAS","PRESENTATIONS","CONFERENCES","FORUMS","OTHER","NO_CONTENT","Symbol","PageableContent","fetchNextFn$","options","isFetching$","content$","end$","content","page","totalPages","fetchCommand$","options$","_","subscribe","fetchNextPage","fetch","next","reset$","hard","it","splice","length","setOptionsWithReset$","value","response","push","error","UserEventsPageModule","declarations","imports","notFound","status","navigateByUrl","routes","path","component","UserEventsPageRoutingModule","forChild","exports","UserEventsPageComponent","activatedRoute","sessionService","companiesService","permissionService","sidebarWrapperService","activeFilter$","filters","currentEvents","pageable","fetchPageFn$","bind","ngOnInit","setTimeout","params$","article","trending","navigation","live","showSidebar","id$","paramMap","get","test","parseInt","user","meta","ngOnDestroy$","user$","canSeeDrafts","hasAnyRole","events$","stages","DRAFT","REVIEWING","PUBLISHED","BLOCKED","types","remove","event","findIndex","filterEvent","filter","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-user-events-page-user-events-page-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, Router } from '@angular/router';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { UsersService } from '@api/routes/users.service';\nimport { Observable } from 'rxjs';\nimport { notFound } from '@shared/utils/not-found.operator';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersResolverService implements Resolve<IUserViewFull> {\n  constructor(\n    private readonly usersService: UsersService,\n    private readonly router: Router\n  ) { }\n\n  resolve(route: ActivatedRouteSnapshot): Observable<IUserViewFull> {\n    return this.usersService.getSingle$(route.params.id).pipe(notFound(this.router));\n  }\n}\n","import { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { TranslateService } from '@ngx-translate/core';\n\nexport function eventFilters(translateService: TranslateService): IToggleItem<EventFiltersEnum, IEventQuery>[] {\n    return [\n        {\n            id: 0,\n            text: translateService.instant('COMMON.ALL'),\n            data: null,\n        },\n        {\n            id: 1,\n            text: translateService.instant('COMMON.EXHIBITS'),\n            data: EventFiltersEnum.EXHIBITIONS,\n        },\n        {\n            id: 2,\n            text: translateService.instant('COMMON.EDUCATION'),\n            data: EventFiltersEnum.TRAINING,\n        },\n        {\n            id: 3,\n            text: translateService.instant('COMMON.REGATTA_'),\n            data: EventFiltersEnum.REGATTAS,\n        },\n        {\n            id: 4,\n            text: translateService.instant('COMMON.FLEET'),\n            data: EventFiltersEnum.FLOTILLAS,\n        },\n        {\n            id: 5,\n            text: translateService.instant('COMMON.PRESENTATIONS'),\n            data: EventFiltersEnum.PRESENTATIONS,\n        },\n        {\n            id: 6,\n            text: translateService.instant('COMMON.PRESS-CONFERENCES'),\n            data: EventFiltersEnum.CONFERENCES,\n        },\n        {\n            id: 7,\n            text: 'Конференции',\n            data: EventFiltersEnum.FORUMS,\n        },\n        {\n            id: 8,\n            text: translateService.instant('COMMON.OTHER'),\n            data: EventFiltersEnum.OTHER,\n        },\n    ];\n}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UserEventsPageRoutingModule } from './user-events-page-routing.module';\nimport { UserEventsPageComponent } from './user-events-page.component';\nimport { FiltersModule } from '@shared/modules/filters/filters.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { EventPreviewModule } from '@modules/events/event-preview/event-preview.module';\n\n\n@NgModule({\n  declarations: [UserEventsPageComponent],\n  imports: [\n    CommonModule,\n    UserEventsPageRoutingModule,\n    FiltersModule,\n    SharedComponentsModule,\n    EventPreviewModule,\n    SharedComponentsModule\n  ]\n})\nexport class UserEventsPageModule { }\n","import { OperatorFunction, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\n\nexport function notFound(router: Router): OperatorFunction<any, any> {\n    return catchError((error: HttpErrorResponse) => {\n        if (error.status === 404 || error.status === 422) {\n            router.navigateByUrl('/404');\n        }\n        return throwError(error);\n    });\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UserEventsPageComponent } from './user-events-page.component';\nimport { UsersResolverService } from '@shared/services/users-resolver.service';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserEventsPageComponent,\n    resolve: { data: UsersResolverService }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UserEventsPageRoutingModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { eventFilters } from './event-filters.function';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { PageableContent, NO_CONTENT } from '@shared/classes/pageable-conetnt.class';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { BehaviorSubject, Observable, combineLatest, throwError } from 'rxjs';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { takeUntil, map, tap, switchMap } from 'rxjs/operators';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { UsersService } from '@api/routes/users.service';\nimport { SessionService } from '@app/services/session.service';\nimport { CompaniesService } from '@api/routes/companies.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { PermissionService } from '@app/services/permission/permission.service';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\n\n@Component({\n  selector: 'app-user-events-page',\n  templateUrl: './user-events-page.component.html',\n  styleUrls: ['./user-events-page.component.scss']\n})\nexport class UserEventsPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  public readonly activeFilter$: BehaviorSubject<EventFiltersEnum> = new BehaviorSubject<EventFiltersEnum>(null);\n  public readonly filters: IToggleItem<EventFiltersEnum, IEventQuery>[] = eventFilters(this.translateService);\n\n  public currentEvents: IEventView[] = [];\n  public pageable: PageableContent<IEventView, [number, IUserViewFull, EventFiltersEnum]> =\n    new PageableContent<IEventView, [number, IUserViewFull, EventFiltersEnum]>(this.fetchPageFn$.bind(this), null);\n  public id$: Observable<number>;\n\n  constructor(\n    private readonly usersService: UsersService,\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly sessionService: SessionService,\n    private readonly companiesService: CompaniesService,\n    private readonly permissionService: PermissionService,\n    private readonly translateService: TranslateService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n\n    this.id$ = this.activatedRoute.paramMap.pipe(\n      map((paramMap: ParamMap) => {\n        const id = paramMap.get('id');\n        return /^\\d+$/.test(id) ? parseInt(id, 10) : id;\n      }),\n      switchMap((id: string | number) => this.usersService.getSingle$(id)),\n      map((user: IUserViewFull) => user.meta.id)\n    );\n\n    this.pageable.content$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((content: IEventView[]) => {\n      this.currentEvents.push(...content);\n    });\n    combineLatest([this.id$, this.sessionService.user$, this.activeFilter$]).pipe(\n      tap((options: [number, IUserViewFull, EventFiltersEnum]) => {\n        this.currentEvents.splice(0, this.currentEvents.length);\n        this.pageable.options$.next(options);\n      }),\n      switchMap(() => this.pageable.reset$()),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe(() => {\n      this.pageable.fetch();\n    });\n  }\n\n  private fetchPageFn$(page: number, options: [number, IUserViewFull, EventFiltersEnum] | null): Observable<IPageResponse<IEventView>> {\n    if (options === null) {\n      return throwError(NO_CONTENT);\n    }\n    const canSeeDrafts = options[1] !== null && (options[1].meta.id === options[0] || this.permissionService.hasAnyRole(options[1], 'EDITOR$'));\n    return this.companiesService.events$(options[0], page, {\n      stages: canSeeDrafts ? [PublicationStageEnum.DRAFT, PublicationStageEnum.REVIEWING,\n        PublicationStageEnum.PUBLISHED, PublicationStageEnum.BLOCKED] : [PublicationStageEnum.PUBLISHED],\n      types: options[2] ? [EventFiltersEnum[options[2]] as any] : [],\n    });\n  }\n\n  public remove(event: IEventView): void {\n    this.currentEvents.splice(this.currentEvents.findIndex((it: IEventView) => it === event), 1);\n  }\n\n  public filterEvent(filter: IToggleItem<EventFiltersEnum>): void {\n    this.activeFilter$.next(filter.data);\n  }\n}\n","<app-filters [filters]=\"filters\" (toggleFilter)=\"filterEvent($event)\"></app-filters>\n<ul class=\"block-card item-space-40\">\n    <li *ngFor=\"let event of currentEvents\">\n        <app-event-preview [event]=\"event\" (gone)=\"remove(event)\"></app-event-preview>\n    </li>\n</ul>\n<app-pagination [pageable]=\"pageable\"></app-pagination>\n"]}