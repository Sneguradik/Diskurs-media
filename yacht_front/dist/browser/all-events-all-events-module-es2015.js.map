{"version":3,"sources":["./src/app/modules/events/all-events/all-events.module.ts","./src/app/shared/classes/pageable-conetnt.class.ts","./src/app/modules/events/all-events/all-events-routing.module.ts","./src/app/modules/events/all-events/all-events-page.component.ts","./src/app/modules/events/all-events/all-events-page.component.html","./src/app/modules/events/all-events/event-list/event-filters.const.ts","./src/app/modules/events/all-events/event-list/event-list.component.ts","./src/app/modules/events/all-events/event-list/event-list.component.html"],"names":[],"mappings":"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","file":"all-events-all-events-module-es2015.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { EventPreviewModule } from '../event-preview/event-preview.module';\nimport { AllEventsPageComponent } from './all-events-page.component';\nimport { AllEventsRoutingModule } from './all-events-routing.module';\nimport { EventListComponent } from './event-list/event-list.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\nimport { FiltersModule } from '@shared/modules/filters/filters.module';\n\n@NgModule({\n  declarations: [AllEventsPageComponent, EventListComponent],\n  imports: [\n    AllEventsRoutingModule,\n    CommonModule,\n    EventPreviewModule,\n    FiltersModule,\n    CommonDirectivesModule,\n    TranslateModule,\n    SharedUiModule,\n    SharedComponentsModule\n  ],\n  exports: [AllEventsPageComponent],\n})\nexport class AllEventsModule {}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AllEventsPageComponent } from './all-events-page.component';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        pathMatch: 'full',\n        component: AllEventsPageComponent,\n      },\n    ]),\n  ],\n  exports: [RouterModule],\n})\nexport class AllEventsRoutingModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ShowcasesService } from '@api/routes/showcases.service';\nimport { IShowcasePatch } from '@api/schemas/showcase/showcase-patch.interface';\nimport { ShowcaseEditBlockService } from '@layout/sidebar-wrapper/live-content/showcase-edit-block.service';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { ICreatedObject } from '@api/schemas/object/created-object.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\n\n\n@Component({\n  selector: 'app-all-events-page',\n  templateUrl: './all-events-page.component.html',\n  styleUrls: ['./all-events-page.component.scss'],\n})\nexport class AllEventsPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  constructor(\n    private readonly showcaseService: ShowcasesService,\n    private readonly showcaseEBS: ShowcaseEditBlockService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n  }\n\n  public showcase(): void {\n    this.showcaseService.create$().pipe(\n      switchMap((res: ICreatedObject) => {\n        const data: IShowcasePatch = {\n          info: {\n            url: 'https://ru.yachtsmanjournal.com/events',\n            title: 'Все мероприятия',\n            subtitle: 'Перейти ко всем мероприятиям',\n          },\n        };\n        return this.showcaseService.patch$(res.id, data).pipe(tap(() => {\n          this.showcaseEBS.setId(res.id);\n        }));\n      }),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(() => {\n      this.showcaseEBS.toggle();\n    });\n  }\n}\n","<section class=\"all-events\">\n  <section class=\"tag-card\">\n    <app-ui-card [shadow]=\"false\">\n      <div class=\"current-tag\">\n        <span>{{'COMMON.EVENT_' | translate}}</span>\n        <app-ui-dots-menu *appRoleGuard=\"'EDITOR$'\">\n          <app-ui-dots-menu-item *appRoleGuard=\"'EDITOR$'\" icon=\"star\" [text]=\"'COMMON.PLACE_AT_DISPLAY_WINDOW' | translate\" (click)=\"showcase()\">\n          </app-ui-dots-menu-item>\n        </app-ui-dots-menu>\n      </div>\n    </app-ui-card>\n  </section>\n\n  <app-event-list></app-event-list>\n</section>\n","import { TranslateService } from '@ngx-translate/core';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\n\nexport const eventFilters = (translateService: TranslateService): IToggleItem<EventFiltersEnum, IEventQuery>[] => {\n    return [\n        {\n            id: 0,\n            text: translateService.instant('COMMON.ALL'),\n            data: null,\n        },\n        {\n            id: 1,\n            text: translateService.instant('COMMON.EXHIBITS'),\n            data: EventFiltersEnum.EXHIBITIONS,\n        },\n        {\n            id: 2,\n            text: translateService.instant('COMMON.EDUCATION'),\n            data: EventFiltersEnum.TRAINING,\n        },\n        {\n            id: 3,\n            text: translateService.instant('COMMON.REGATTA_'),\n            data: EventFiltersEnum.REGATTAS,\n        },\n        {\n            id: 4,\n            text: translateService.instant('COMMON.FLEET'),\n            data: EventFiltersEnum.FLOTILLAS,\n        },\n        {\n            id: 5,\n            text: translateService.instant('COMMON.PRESENTATIONS'),\n            data: EventFiltersEnum.PRESENTATIONS,\n        },\n        {\n            id: 6,\n            text: translateService.instant('COMMON.PRESS-CONFERENCES'),\n            data: EventFiltersEnum.CONFERENCES,\n        },\n        {\n            id: 7,\n            text: 'Конференции',\n            data: EventFiltersEnum.FORUMS,\n        },\n        {\n            id: 8,\n            text: translateService.instant('COMMON.OTHER'),\n            data: EventFiltersEnum.OTHER,\n        },\n    ];\n};\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { BehaviorSubject, combineLatest, Subject, throwError, Observable } from 'rxjs';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { PageableContent, NO_CONTENT } from '@shared/classes/pageable-conetnt.class';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { SessionService } from '@app/services/session.service';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { eventFilters } from './event-filters.const';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { EventsService } from '@api/routes/events.service';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\n\n@Component({\n  selector: 'app-event-list',\n  templateUrl: './event-list.component.html',\n  styleUrls: ['./event-list.component.scss'],\n})\nexport class EventListComponent extends AbstractComponent implements OnInit, OnDestroy {\n  private readonly onRangeOrFilter$: Subject<void> = new Subject();\n  private readonly selectedFilter$: BehaviorSubject<EventFiltersEnum> = new BehaviorSubject<EventFiltersEnum>(null);\n\n  public readonly EVENT_FILTERS: IToggleItem<EventFiltersEnum, IEventQuery>[] = eventFilters(this.translateService);\n  public readonly pageable: PageableContent<IEventView, [IUserViewFull, EventFiltersEnum]> =\n    new PageableContent<IEventView, [IUserViewFull, EventFiltersEnum]>(this.fetchPageFn$.bind(this), null);\n\n  public events: IEventView[] = [];\n  public filters = this.EVENT_FILTERS;\n\n  constructor(\n    private sessionService: SessionService,\n    private eventsService: EventsService,\n    private readonly translateService: TranslateService,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.pageable.content$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((content: IEventView[]) => {\n      this.events.push(...content);\n    });\n    combineLatest([this.sessionService.user$, this.selectedFilter$])\n      .pipe(\n        tap((options: [IUserViewFull, EventFiltersEnum]) => {\n          this.events.splice(0, this.events.length);\n          this.pageable.options$.next(options);\n        }),\n        switchMap(() => this.pageable.reset$()),\n        takeUntil(this.ngOnDestroy$),\n      )\n      .subscribe(() => {\n        this.pageable.fetch();\n      });\n  }\n\n  private fetchPageFn$(page: number, options: [IUserViewFull, EventFiltersEnum] | null): Observable<IPageResponse<IEventView>> {\n    if (options === null) {\n      return throwError(NO_CONTENT);\n    }\n    return this.eventsService.get$(page, {\n      stages: [PublicationStageEnum.PUBLISHED],\n      types: options[1] ? [Object.keys(EventFiltersEnum).map((key: string) => EventFiltersEnum[key as any])[options[1]] as any] : [],\n      after: Date.now(),\n    });\n  }\n\n  public filterEvent(filter: IToggleItem<EventFiltersEnum>): void {\n    this.selectedFilter$.next(filter.data);\n    this.onRangeOrFilter$.next();\n  }\n\n  public rangeEvent(): void {\n    this.onRangeOrFilter$.next();\n  }\n\n  public remove(event: IEventView): void {\n    this.events.splice(this.events.indexOf(event), 1);\n  }\n}\n","<app-filters [filters]=\"'COMMON.EVENT_FILTERS' | translate\" (toggleFilter)=\"filterEvent($any($event))\"></app-filters>\n<ul class=\"block-card item-space-20\">\n  <li *ngFor=\"let event of events\" class=\"with-border\">\n    <app-event-preview [event]=\"event\" (gone)=\"remove(event)\"></app-event-preview>\n  </li>\n</ul>\n\n<app-pagination [pageable]=\"pageable\" [fireFirstPage]=\"false\"></app-pagination>\n"],"sourceRoot":"webpack:///"}