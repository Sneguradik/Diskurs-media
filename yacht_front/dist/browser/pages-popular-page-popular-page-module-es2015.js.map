{"version":3,"sources":["./src/app/modules/homepage/pages/popular-page/popular-page-routing.module.ts","./src/app/modules/homepage/pages/popular-page/popular-page.module.ts","./src/app/shared/functions/fetch-articles-with-topics.function.ts","./src/app/shared/classes/pageable-conetnt.class.ts","./src/app/modules/homepage/pages/popular-page/popular-feed-item.class.ts","./src/app/modules/homepage/pages/popular-page/popular-page.component.ts","./src/app/modules/homepage/pages/popular-page/popular-page.component.html"],"names":[],"mappings":"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","file":"pages-popular-page-popular-page-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PopularPageComponent } from './popular-page.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    redirectTo: 'day'\n  },\n  {\n    path: ':when',\n    component: PopularPageComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PopularPageRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PopularPageRoutingModule } from './popular-page-routing.module';\nimport { PopularPageComponent } from './popular-page.component';\nimport { FeedModule } from '@shared/modules/feed/feed.module';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { SvgModule } from '@shared/modules/svg/svg.module';\nimport { ShortJobListModule } from '@shared/modules/short-job-list/short-job-list.module';\nimport { ShortEventListModule } from '@shared/modules/short-event-list/short-event-list.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n@NgModule({\n  declarations: [PopularPageComponent],\n  imports: [\n    CommonModule,\n    PopularPageRoutingModule,\n    FeedModule,\n    SharedPipesModule,\n    SharedComponentsModule,\n    SvgModule,\n    ShortJobListModule,\n    ShortEventListModule,\n    TranslateModule,\n  ]\n})\nexport class PopularPageModule { }\n","import { Observable, of } from 'rxjs';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { map, defaultIfEmpty } from 'rxjs/operators';\nimport { TopicsService } from '@api/routes/topics.service';\n\nexport function fetchArticlesWithTopics$(\n  page: IPageResponse<IArticleView>,\n  topicsService: TopicsService\n): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    const topics: number[] = [];\n    page.content.forEach((article: IArticleView) => {\n        if (article.topics.length > 0) {\n            topics.push(article.topics[0]);\n        }\n    });\n    return page.content.length > 0 ? topicsService.getMultiple$(topics).pipe(defaultIfEmpty([]), map((topicsRet: ITopicViewFull[]) => {\n        const content: [IArticleView, ITopicView][] = [];\n        page.content.forEach((article: IArticleView) => {\n            if (article.topics.length > 0) {\n                content.push([article, topicsRet.find((x: ITopicViewFull) => x.meta.id === article.topics[0]) as ITopicView]);\n            } else {\n                content.push([article, null]);\n            }\n        });\n        return { ...page, content };\n    })) : of({ ...page, content: [] });\n}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\n\nexport class PopularFeedItem {\n    constructor(\n        public readonly articleView: [IArticleView, ITopicView] = null,\n        public readonly range: {\n            before: number;\n            after: number;\n        } = null,\n        public readonly empty: boolean = null,\n        public readonly realIndex: number = -1,\n    ) {}\n\n    public isArticle(): boolean {\n        return this.articleView !== null;\n    }\n\n    public isRange(): boolean {\n        return this.range !== null;\n    }\n\n    public isEmpty(): boolean {\n        return this.empty;\n    }\n}\n","import { Component, OnInit, OnDestroy, ViewChild, ElementRef, HostListener } from '@angular/core';\nimport { FeedService } from '@api/routes/feed.service';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { HomepageService } from '@shared/services/homepage.service';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { PageableContent } from '@shared/classes/pageable-conetnt.class';\nimport { FeedSourceEnum } from '@shared/enums/feed-source.enum';\nimport { Observable, Subject, of, throwError, concat, EMPTY, combineLatest } from 'rxjs';\nimport { PopularFeedItem } from './popular-feed-item.class';\nimport {\n  map,\n  distinct,\n  mergeScan,\n  switchAll,\n  debounce,\n  startWith,\n  takeUntil,\n  pairwise,\n  switchMap,\n  mergeMap\n} from 'rxjs/operators';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { FeedOrderEnum } from '@api/schemas/feed/feed-order.enum';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { fetchArticlesWithTopics$ } from '@shared/functions/fetch-articles-with-topics.function';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ActivatedRoute, UrlSegment, Router } from '@angular/router';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { IEventsJobsControl } from '@api/schemas/dashboard/events-jobs-control.interface';\nimport { AdministrationService } from '@api/routes/administration.service';\nimport { IBannerPageableContent } from '@modules/dashboard/pages/ads-management-page/banner-pageable-content.interface';\nimport { BannerPlaceEnum } from '@api/schemas/advertisement/banner-place.enum';\nimport { IBannerReturnView } from '@api/schemas/advertisement/banner-return-view.interface';\nimport { AdvertisementService } from '@api/routes/advertisement.service';\nimport { PlatformService } from '@shared/services/platform.service';\nimport { ResponsiveService } from '@app/services/responsive.service';\n\n@Component({\n  selector: 'app-popular-page',\n  templateUrl: './popular-page.component.html',\n  styleUrls: ['./popular-page.component.scss']\n})\nexport class PopularPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  @ViewChild('adElem1', { static: false }) private adElem1: ElementRef;\n  @ViewChild('adElem2', { static: false }) private adElem2: ElementRef;\n  @ViewChild('adElem3', { static: false }) private adElem3: ElementRef;\n\n  private before$: Observable<number>;\n  private range$: Observable<number>;\n  private count = 0;\n  private choice = false;\n\n  public readonly pageable = new PageableContent<PopularFeedItem, [number, number]>(this.fetch$.bind(this));\n  public readonly pageAttempt$: Subject<void> = new Subject<void>();\n\n  public eventsJobs: IEventsJobsControl;\n\n  public ads: IBannerPageableContent[];\n  public adNums: number[] = [0, 0, 0];\n  public adViewedProps: boolean[] = [false, false, false];\n\n  constructor(\n    protected readonly feedService: FeedService,\n    protected readonly topicsService: TopicsService,\n    protected readonly advertisementService: AdvertisementService,\n    protected readonly platformService: PlatformService,\n    private readonly administrationService: AdministrationService,\n    private readonly homepageService: HomepageService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly router: Router,\n    public readonly responsive: ResponsiveService\n  ) {\n    super();\n    this.ads = [\n      {\n        content: [],\n        currentPage: 0,\n        totalPages: 1,\n        contentLoading: false,\n      },\n      {\n        content: [],\n        currentPage: 0,\n        totalPages: 1,\n        contentLoading: false,\n      },\n      {\n        content: [],\n        currentPage: 0,\n        totalPages: 1,\n        contentLoading: false,\n      },\n    ];\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: true, showSidebar: true });\n    });\n    this.administrationService.getEventsJobs$().pipe(takeUntil(this.ngOnDestroy$)).subscribe((_: IEventsJobsControl) => {\n      this.eventsJobs = _;\n    });\n    this.homepageService.feedSource$.next(FeedSourceEnum.POPULAR);\n    this.setRange();\n    if (this.platformService.isBrowser) {\n      this.getAd();\n    }\n  }\n\n  @HostListener('window:scroll', ['$event']) public onScroll(): void {\n    if (!this.adViewedProps[0] && this.ads[0].content[0] && this.adElem1) {\n      this.adViewed(0);\n    }\n    if (!this.adViewedProps[1] && this.ads[1].content[0] && this.adElem2) {\n      this.adViewed(1);\n    }\n    if (!this.adViewedProps[2] && this.ads[2].content[0] && this.adElem3) {\n      this.adViewed(2);\n    }\n  }\n\n  private setRange(): void {\n    this.range$ = this.activatedRoute.url.pipe(\n      map((url: UrlSegment[]) => {\n        this.choice = url[0].path === 'editorschoice';\n        return url[0] ? this.getRange(url[0].path) : null;\n      }),\n    );\n\n    this.before$ = this.range$.pipe(\n      map((range: number) => {\n        return this.findRange$(Date.now(), range).pipe(\n          mergeMap((start: number) => {\n            return concat(\n              of(start),\n              this.pageAttempt$.pipe(\n                distinct(() => 1, this.pageable.end$),\n                mergeScan((acc: number) => {\n                  return this.choice ? null : this.feedService.count$({ before: acc - range }).pipe(\n                    mergeMap((count: number) => {\n                      return count === 0 ? EMPTY : this.findRange$(acc - range, range);\n                    }),\n                  );\n                }, start),\n              ),\n            );\n          }),\n        );\n      }),\n      switchAll(),\n    );\n\n    combineLatest([\n      this.before$,\n      this.range$.pipe(debounce(() => this.before$))\n    ]).pipe(\n      startWith(null as [number, number]),\n      pairwise(),\n      mergeMap(([a, b]: [[number, number], [number, number]]) => {\n        this.homepageService.feedSource$.next(FeedSourceEnum.POPULAR);\n        return this.pageable.setOptionsWithReset$(b, !a || !a[1] || a[1] !== b[1]);\n      }),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.homepageService.feedSource$.next(FeedSourceEnum.NONE);\n    super.ngOnDestroy();\n  }\n\n  private findRange$(before: number, range: number): Observable<number> {\n    return this.feedService.count$({ before, after: before - range }).pipe(\n      switchMap((count: number) => {\n        return count === 0 && (range && range > 0) ? this.findRange$(before - range, range) : of(before);\n      }),\n      takeUntil(this.ngOnDestroy$)\n    );\n  }\n\n  private getRange(name: string): number {\n    const DAY: number = 1000 * 60 * 60 * 24;\n    switch (name) {\n      case 'year':\n        return DAY * 365;\n      case 'month':\n        return DAY * 30;\n      case 'week':\n        return DAY * 7;\n      case 'three-days':\n        return DAY * 3;\n      case 'day':\n        return DAY;\n      default:\n        return null;\n    }\n  }\n\n  private fetch$(page: number, options: [number, number]): Observable<IPageResponse<PopularFeedItem>> {\n    let result: Observable<any>;\n    if (options) {\n      const [before, range]: [number, number] = options;\n      const after: number = Number.isFinite(range) ? (before - range) : undefined;\n\n      result = this.feedService.feedRequest$({\n        page, before, after, order: !this.choice ? FeedOrderEnum.RATING : undefined, list: this.choice ? 'default' : undefined\n      }).pipe(\n        mergeMap((aPage: IPageResponse<IArticleView>) => fetchArticlesWithTopics$(aPage, this.topicsService)),\n        map((response: IPageResponse<[IArticleView, ITopicView]>) => {\n          const prefix = response.page === 0 && after ? [new PopularFeedItem(null, { before, after })] : [];\n          return response.page === 0 && response.total === 0\n            ? { ...response, content: [...prefix, new PopularFeedItem(null, null, true)] }\n            : {\n              ...response,\n              content: prefix.concat(response.content.map((c: [IArticleView, ITopicView]) =>\n                new PopularFeedItem(c, null, null, this.counter()))),\n            };\n        }),\n      );\n    } else {\n      result = throwError(Symbol('NO_CONTENT'));\n    }\n    return result;\n  }\n\n  public getAd(): void {\n    this.fetchAd(0);\n    this.fetchAd(1);\n    this.fetchAd(2);\n  }\n\n  public fetchAd(elem: number): void {\n    if ((this.ads[elem].content === [] || this.ads[elem].currentPage + 1 <= this.ads[elem].totalPages)\n      && !this.ads[elem].contentLoading) {\n      this.ads[elem].contentLoading = true;\n      this.advertisementService.get$(\n        this.ads[elem].currentPage,\n        elem === 0 ? BannerPlaceEnum.FEED1 : elem === 1 ? BannerPlaceEnum.FEED2 : BannerPlaceEnum.FEED3\n      ).pipe(takeUntil(this.ngOnDestroy$)).subscribe((_: IPageResponse<IBannerReturnView>) => {\n        this.ads[elem].content.push(..._.content);\n        this.ads[elem].totalPages = _.totalPages;\n        this.ads[elem].currentPage++;\n        this.ads[elem].contentLoading = false;\n        if (this.ads[elem].currentPage + 1 <= this.ads[elem].totalPages) {\n          this.getAd();\n        } else {\n          if (this.ads[elem].content[0]) {\n            if (!localStorage.getItem('ad-feed' + elem)) {\n              localStorage.setItem('ad-feed' + elem, '1');\n              this.adNums[elem] = 0;\n            } else {\n              this.adNums[elem] = Number(localStorage.getItem('ad-feed' + elem)) - 1;\n              if (this.adNums[elem] + 1 < this.ads[elem].content.length) {\n                this.adNums[elem]++;\n              } else {\n                this.adNums[elem] = 0;\n              }\n              localStorage.setItem('ad-feed' + elem, this.adNums[elem] + 1 + '');\n            }\n          }\n        }\n      });\n    }\n  }\n\n  public adViewed(elem: number): void {\n    let rect: any;\n    switch (elem) {\n      case 0:\n        rect = this.adElem1.nativeElement.getBoundingClientRect();\n        break;\n      case 1:\n        rect = this.adElem2.nativeElement.getBoundingClientRect();\n        break;\n      case 2:\n        rect = this.adElem3.nativeElement.getBoundingClientRect();\n        break;\n    }\n    const viewHeight: number = Math.max(document.documentElement.clientHeight, window.innerHeight);\n    if (!(rect.bottom < 0 || rect.top - viewHeight >= 0) && !this.adViewedProps[elem]) {\n      this.advertisementService.view$(this.ads[elem].content[this.adNums[elem]].id)\n        .pipe(takeUntil(this.ngOnDestroy$))\n        .subscribe();\n      this.adViewedProps[elem] = true;\n    }\n  }\n\n  public adClicked(elem: number): void {\n    this.advertisementService.click$(this.ads[elem].content[this.adNums[elem]].id)\n      .pipe(takeUntil(this.ngOnDestroy$))\n      .subscribe(() => {\n        window.open(this.ads[elem].content[this.adNums[elem]].url, '_blank');\n    });\n  }\n\n  public counter(): number {\n    return this.count++;\n  }\n\n  public onHide(article: IArticleView, promote?: boolean): void {\n    if (promote && this.router.url.includes('editorschoice') || !promote) {\n      this.pageable.content.splice(\n        this.pageable.content.findIndex((item: PopularFeedItem) => item.isArticle() && item.articleView[0].meta.id === article.meta.id),\n        1,\n      );\n    }\n  }\n\n  public findIndex(item: PopularFeedItem): number {\n    if (item.isArticle()) {\n      return this.pageable.content.filter(\n        (iter: PopularFeedItem) => iter.isArticle()\n      ).findIndex((iter: PopularFeedItem) => iter.articleView[0].meta.id === item.articleView[0].meta.id) + 1;\n    }\n    return -1;\n  }\n}\n","<ul class=\"block-card item-space-20 no-empty\">\n    <li *ngFor=\"let item of pageable.content; let i = index\">\n        <ng-container [ngSwitch]=\"true\">\n            <ng-container *ngSwitchCase=\"item.isArticle()\">\n                <app-feed-article-view [data]=\"item.articleView[0]\" [topic]=\"item.articleView[1]\" [options]=\"{ pictureOn: true, menuOn: true }\" (gone)=\"onHide($event)\" (gonePromote)=\"onHide($event, true)\"></app-feed-article-view>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"item.isRange()\">\n                <div class=\"caption fade-2 text-center\">{{'COMMON.PUBLICATIONS_PERIOD' | translate}} {{ item.range.after | customDate:true }} - {{ item.range.before | customDate:true }}</div>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"item.isEmpty()\">\n                <div class=\"subtitle-2 fade-3 text-center\">Нет публикаций</div>\n            </ng-container>\n        </ng-container>\n        <div #adElem1 (click)=\"adClicked(0)\" class=\"ad\" *ngIf=\"(ads && ads[0].content && ads[0].content[0]) && ads[0].content[adNums[0]].afterPublication - 1 === (i + 1)\">\n            <ng-container [ngTemplateOutlet]=\"addContainer\" [ngTemplateOutletContext]=\"{ src: ads[0].content[adNums[0]].picture, text: ads[0].content[adNums[0]].text }\"></ng-container>\n        </div>\n        <div #adElem2 (click)=\"adClicked(1)\" class=\"ad\" *ngIf=\"(ads && ads[1].content && ads[1].content[0]) && ads[1].content[adNums[1]].afterPublication - 1 === (i + 1)\">\n            <ng-container [ngTemplateOutlet]=\"addContainer\" [ngTemplateOutletContext]=\"{ src: ads[1].content[adNums[1]].picture, text: ads[1].content[adNums[1]].text }\"></ng-container>\n        </div>\n        <div #adElem3 (click)=\"adClicked(2)\" class=\"ad\" *ngIf=\"(ads && ads[2].content && ads[2].content[0]) && ads[2].content[adNums[2]].afterPublication - 1 === (i + 1)\">\n            <ng-container [ngTemplateOutlet]=\"addContainer\" [ngTemplateOutletContext]=\"{ src: ads[2].content[adNums[2]].picture, text: ads[2].content[adNums[2]].text }\"></ng-container>\n        </div>\n        <app-events *ngIf=\"(i + 1) === eventsJobs.firstView.events && eventsJobs.popular.events\" [page]=\"0\" [blueClass]=\"'blue-events'\"></app-events>\n        <app-events *ngIf=\"(i + 1) === eventsJobs.secondView.events && eventsJobs.popular.events\" [page]=\"1\" [blueClass]=\"'blue-events'\"></app-events>\n        <app-events *ngIf=\"(i + 1) === eventsJobs.thirdView.events && eventsJobs.popular.events\" [page]=\"2\" [blueClass]=\"'blue-events'\"></app-events>\n        <app-jobs *ngIf=\"(i + 1) === eventsJobs.firstView.jobs && eventsJobs.popular.jobs\" [page]=\"0\"></app-jobs>\n        <app-jobs *ngIf=\"(i + 1) === eventsJobs.secondView.jobs && eventsJobs.popular.jobs\" [page]=\"1\"></app-jobs>\n        <app-jobs *ngIf=\"(i + 1) === eventsJobs.thirdView.jobs && eventsJobs.popular.jobs\" [page]=\"2\"></app-jobs>\n    </li>\n</ul>\n\n<app-pagination [pageable]=\"pageable\" (onPageAttempt)=\"pageAttempt$.next()\"></app-pagination>\n\n<ng-template #addContainer let-src=\"src\" let-text=\"text\">\n    <img [src]=\"src\" alt=\"\">\n    <div class=\"ad-container\">\n        <div class=\"ad-btn\" *ngIf=\"!(responsive.lt.medium | async)\">\n            <span>{{ text }}</span>\n            <svg name=\"chevron/right\" size=\"25\" fill=\"#92929D\"></svg>\n        </div>\n    </div>\n</ng-template>\n"],"sourceRoot":"webpack:///"}