{"version":3,"sources":["./src/app/modules/dashboard/pages/activity-management-page/components/activity-block/activity-block.component.ts","./src/app/modules/dashboard/pages/activity-management-page/components/activity-block/activity-block.component.html","./src/app/modules/dashboard/pages/activity-management-page/activity-management-page.module.ts","./src/app/modules/dashboard/pages/activity-management-page/activity-management-page-routing.module.ts","./src/app/modules/dashboard/shared/classes/dashboard-constants.class.ts","./src/app/modules/dashboard/pages/activity-management-page/activity-management-page.component.ts","./src/app/modules/dashboard/pages/activity-management-page/activity-management-page.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOuB;AAC0E;;;;;;AAW1F,MAAM,sBAAsB;IAMjC;QAF0B,YAAO,GAAuB,IAAI,0DAAY,EAAQ,CAAC;IAEjE,CAAC;IAEjB,WAAW;QACT,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,8GAAkB,CAAC,mBAAmB,CAAC,CAAC;SAC1D;IACH,CAAC;IAEM,IAAI;QACT,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;;uMAhBU,sBAAsB;mJAAtB,sBAAsB,iLCnBnC,suRAwHA;+KDrGa,sBAAsB;kBANlC,uDAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,WAAW,EAAE,iCAAiC;oBAC9C,SAAS,EAAE,CAAC,iCAAiC,CAAC;oBAC9C,eAAe,EAAE,qEAAuB,CAAC,MAAM;iBAChD;0EAEiB,KAAK;sBAApB,mDAAK;gBACU,MAAM;sBAArB,mDAAK;gBAEoB,OAAO;sBAAhC,oDAAM;;;;;;;;;;;;;;AEvBT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AAEiD;AACT;AACO;AACjD;AACS;AACqD;;AAMpG,MAAM,4BAA4B;;6MAA5B,4BAA4B;8MAA5B,4BAA4B,iBAHxB,mGAA+B,EAAE,0GAAsB,aAC5D,4DAAY,EAAE,4GAAmC,EAAE,0DAAW,EAAE,wHAAoB,EAAE,mEAAe;8MAEpG,4BAA4B,YAF9B,CAAC,4DAAY,EAAE,4GAAmC,EAAE,0DAAW,EAAE,wHAAoB,EAAE,mEAAe,CAAC;+KAErG,4BAA4B;kBAJxC,sDAAQ;mBAAC;oBACR,YAAY,EAAE,CAAC,mGAA+B,EAAE,0GAAsB,CAAC;oBACvE,OAAO,EAAE,CAAC,4DAAY,EAAE,4GAAmC,EAAE,0DAAW,EAAE,wHAAoB,EAAE,mEAAe,CAAC;iBACjH;;;;;;;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACgC;;;AAEvF,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mGAA+B;KAC3C;CACF,CAAC;AAMK,MAAM,mCAAmC;;oNAAnC,mCAAmC;qNAAnC,mCAAmC,qFAFpC,4DAAY;qNAEX,mCAAmC,YAHrC,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;+KAEX,mCAAmC;kBAJ/C,sDAAQ;mBAAC;oBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;oBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;iBACxB;;;;;;;;;;;;;;ACTD;AAAA;AAAO,MAAM,kBAAkB;;AACf,qCAAkB,GAAgB;IAC9C,KAAK,EAAE,IAAI;IACX,EAAE,EAAE,IAAI;IACR,OAAO,EAAE,IAAI;CACd,CAAC;AAEY,sCAAmB,GAAiB;IAChD,MAAM,EAAE,IAAI;IACZ,KAAK,EAAE,IAAI;IACX,QAAQ,EAAE,IAAI;CACf,CAAC;AAEY,mCAAgB,GAAc;IAC1C,GAAG,EAAE,IAAI;IACT,GAAG,EAAE,IAAI;CACV,CAAC;AAEY,mCAAgB,GAAkB;IAC9C,KAAK,EAAE;QACL,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,IAAI;QACX,SAAS,EAAE,IAAI;KAChB;IACD,aAAa,EAAE;QACb,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,IAAI;QACX,SAAS,EAAE,IAAI;KAChB;IACD,QAAQ,EAAE;QACR,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,IAAI;QACX,SAAS,EAAE,IAAI;KAChB;IACD,QAAQ,EAAE;QACR,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,IAAI;QACX,SAAS,EAAE,IAAI;KAChB;IACD,SAAS,EAAE;QACT,GAAG,EAAE;YACH,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,IAAI;SACX;QACD,KAAK,EAAE;YACL,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,IAAI;SACX;QACD,SAAS,EAAE;YACT,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,IAAI;SACX;KACF;CACF,CAAC;;;;;;;;;;;;;AC7DJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AACoC;AACpB;AAClC;AAKJ;;;;;AAOhC,MAAM,+BAAgC,SAAQ,0FAAiB;IAIpE,YACmB,qBAA4C,EAC5C,qBAA4C;QAE7D,KAAK,EAAE,CAAC;QAHS,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,0BAAqB,GAArB,qBAAqB,CAAuB;QALxD,UAAK,GAAmC,IAAI,oDAAe,CAAgB,8GAAkB,CAAC,gBAAgB,CAAC,CAAC;QAChH,WAAM,GAAkC,IAAI,oDAAe,CAAe,8GAAkB,CAAC,mBAAmB,CAAC,CAAC;IAOzH,CAAC;IAED,QAAQ;QACN,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;QACnI,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAEM,QAAQ;QACb,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACrC,IAAI,KAAK,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC;iBAC7D,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAClC,SAAS,CAAC,CAAC,GAAkB,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SAC9D;aAAM;YACH,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE;iBACpC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAClC,SAAS,CAAC,CAAC,GAAkB,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SAChE;IACH,CAAC;;gNA7BU,+BAA+B;4JAA/B,+BAA+B,mICf5C,4GACA;+KDca,+BAA+B;kBAL3C,uDAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,2CAA2C;oBACxD,SAAS,EAAE,CAAC,2CAA2C,CAAC;iBACzD","file":"pages-activity-management-page-activity-management-page-module-es2015.js","sourcesContent":["import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnDestroy,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { DashboardConstants } from '@modules/dashboard/shared/classes/dashboard-constants.class';\nimport { IActivityView } from '@api/schemas/dashboard/activity-view.interface';\nimport { IRangeParams } from '@modules/dashboard/shared/ui/dashboard-range/range-params.interface';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-activity-block',\n  templateUrl: './activity-block.component.html',\n  styleUrls: ['./activity-block.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ActivityBlockComponent implements OnDestroy {\n  @Input() public stat$: BehaviorSubject<IActivityView>;\n  @Input() public range$: BehaviorSubject<IRangeParams>;\n\n  @Output() public readonly showReq: EventEmitter<void> = new EventEmitter<void>();\n\n  constructor() { }\n\n  ngOnDestroy(): void {\n    if (this.range$) {\n      this.range$.next(DashboardConstants.RangeParamsConstant);\n    }\n  }\n\n  public show(): void {\n    this.showReq.emit();\n  }\n}\n","<form class=\"admin-form\">\n    <fieldset class=\"admin-form__fieldset\">\n        <legend class=\"admin-form__legend\">Аудитория портала</legend>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Всего <br>пользователей</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).count.all\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Частные пользователи</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).count.users\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">{{ 'COMMON.COMPANIES' | translate}}</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).count.companies\">\n            </span>\n        </label>\n        <div class=\"admin-input-row\">\n            <button class=\"btn admin-btn_white admin-btn_m\" (click)=\"show()\">Показать</button>\n        </div>\n    </fieldset>\n    <hr class=\"admin-hr\">\n    <app-dashboard-range [params$]=\"range$\"></app-dashboard-range>\n    <fieldset class=\"admin-form__fieldset\">\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\"><b>Всего новых регистраций</b></span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).registrations.all\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Частные пользователи</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).registrations.users\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">{{ 'COMMON.COMPANIES' | translate}}</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).registrations.companies\">\n            </span>\n        </label>\n    </fieldset>\n    <fieldset class=\"admin-form__fieldset\">\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\"><b>Присутствие </b> <small> [заходили хотя бы 1 раз за период]</small></span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).presence.all\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Частные пользователи</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).presence.users\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">{{ 'COMMON.COMPANIES' | translate}}</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).presence.companies\">\n            </span>\n        </label>\n    </fieldset>\n    <fieldset class=\"admin-form__fieldset\">\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\"><b>Активность </b> <small> [хотя бы 1 публикация за период]</small></span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).activity.all\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Частные пользователи</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).activity.users\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">{{ 'COMMON.COMPANIES' | translate}}</span>\n            <span class=\"admin-input-row__inputgroup\">\n                <input type=\"text\" class=\"admin-input admin-input_m\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).activity.companies\">\n            </span>\n        </label>\n    </fieldset>\n    <fieldset class=\"admin-form__fieldset\">\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\"><b>{{ 'COMMON.PUBLICATIONS_' | translate}} / {{ 'COMMON.COMMENTS' | translate}} / {{ 'COMMON.NEWS' | translate}}</b></span>\n            <span class=\"admin-input-row__inputwrap\">\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.all.articles\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.all.comments\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.all.news\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">Частные пользователи</span>\n            <span class=\"admin-input-row__inputwrap\">\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.users.articles\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.users.comments\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.users.news\">\n            </span>\n        </label>\n        <label class=\"admin-input-row\">\n            <span class=\"admin-input-row__title admin-input-row__title_m\">{{ 'COMMON.COMPANIES' | translate}}</span>\n            <span class=\"admin-input-row__inputwrap\">\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.companies.articles\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.companies.comments\">\n                /\n                <input type=\"text\" class=\"admin-input\" disabled=\"true\" name=\"\" [value]=\"(stat$ | async).materials.companies.news\">\n            </span>\n        </label>\n    </fieldset>\n</form>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ActivityManagementPageRoutingModule } from './activity-management-page-routing.module';\nimport { ActivityManagementPageComponent } from './activity-management-page.component';\nimport { ActivityBlockComponent } from './components/activity-block/activity-block.component';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { DashboardRangeModule } from '@modules/dashboard/shared/ui/dashboard-range/dashboard-range.module';\n\n@NgModule({\n  declarations: [ActivityManagementPageComponent, ActivityBlockComponent],\n  imports: [CommonModule, ActivityManagementPageRoutingModule, FormsModule, DashboardRangeModule, TranslateModule],\n})\nexport class ActivityManagementPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ActivityManagementPageComponent } from './activity-management-page.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ActivityManagementPageComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ActivityManagementPageRoutingModule {}\n","import { IActivityView } from '@api/schemas/dashboard/activity-view.interface';\nimport { IStatTags } from '../../pages/tags-management-page/components/statistic-tags-block/stat-tags.interface';\nimport { ISelectItem } from '../ui/dashboard-select/select-item.interface';\nimport { IRangeParams } from '../ui/dashboard-range/range-params.interface';\n\nexport class DashboardConstants {\n  public static SelectItemConstant: ISelectItem = {\n    title: null,\n    id: null,\n    payload: null,\n  };\n\n  public static RangeParamsConstant: IRangeParams = {\n    before: null,\n    after: null,\n    checkbox: null,\n  };\n\n  public static TagsStatConstant: IStatTags = {\n    all: null,\n    new: null,\n  };\n\n  public static ActivityConstant: IActivityView = {\n    count: {\n      all: null,\n      users: null,\n      companies: null,\n    },\n    registrations: {\n      all: null,\n      users: null,\n      companies: null,\n    },\n    presence: {\n      all: null,\n      users: null,\n      companies: null,\n    },\n    activity: {\n      all: null,\n      users: null,\n      companies: null,\n    },\n    materials: {\n      all: {\n        articles: null,\n        comments: null,\n        news: null,\n      },\n      users: {\n        articles: null,\n        comments: null,\n        news: null,\n      },\n      companies: {\n        articles: null,\n        comments: null,\n        news: null,\n      },\n    },\n  };\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { DashboardConstants } from '@modules/dashboard/shared/classes/dashboard-constants.class';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { takeUntil } from 'rxjs/operators';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { AdministrationService } from '@api/routes/administration.service';\nimport { IActivityView } from '@api/schemas/dashboard/activity-view.interface';\nimport { IRangeParams } from '@modules/dashboard/shared/ui/dashboard-range/range-params.interface';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-activity-management-page',\n  templateUrl: './activity-management-page.component.html',\n  styleUrls: ['./activity-management-page.component.scss'],\n})\nexport class ActivityManagementPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  public stat$: BehaviorSubject<IActivityView> = new BehaviorSubject<IActivityView>(DashboardConstants.ActivityConstant);\n  public range$: BehaviorSubject<IRangeParams> = new BehaviorSubject<IRangeParams>(DashboardConstants.RangeParamsConstant);\n\n  constructor(\n    private readonly administrationService: AdministrationService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: false, navigation: false, live: false, showSidebar: false });\n    });\n    this.getStats();\n  }\n\n  public getStats(): void {\n    const range = this.range$.getValue();\n    if (range.checkbox) {\n      this.administrationService.getActivity$(range.before, range.after)\n          .pipe(takeUntil(this.ngOnDestroy$))\n          .subscribe((res: IActivityView) => this.stat$.next(res));\n    } else {\n        this.administrationService.getActivity$()\n            .pipe(takeUntil(this.ngOnDestroy$))\n            .subscribe((res: IActivityView) => this.stat$.next(res));\n    }\n  }\n}\n","<app-activity-block [range$]=\"range$\" [stat$]=\"stat$\" (showReq)=\"getStats()\"></app-activity-block>\n"],"sourceRoot":"webpack:///"}