{"version":3,"sources":["webpack:///src/app/shared/functions/fetch-articles-with-topics.function.ts","webpack:///src/app/modules/tags/pages/tag-page/tag-header/tag-header.component.ts","webpack:///src/app/modules/tags/pages/tag-page/tag-header/tag-header.component.html","webpack:///src/app/shared/classes/pageable-conetnt.class.ts","webpack:///src/app/shared/utils/not-found.operator.ts","webpack:///src/app/modules/tags/pages/tag-page/tag-page.component.ts","webpack:///src/app/modules/tags/pages/tag-page/tag-page.component.html","webpack:///src/app/modules/tags/pages/tag-page/tag-page-routing.module.ts","webpack:///src/app/modules/tags/pages/tag-page/tag-page.module.ts"],"names":["fetchArticlesWithTopics$","page","topicsService","topics","content","forEach","article","length","push","getMultiple$","pipe","topicsRet","find","x","meta","id","TagHeaderComponent","router","selector","templateUrl","styleUrls","tag","NO_CONTENT","Symbol","PageableContent","fetchNextFn$","options","isFetching$","content$","end$","totalPages","fetchCommand$","options$","_","subscribe","fetchNextPage","fetch","next","reset$","hard","it","splice","setOptionsWithReset$","value","response","error","notFound","status","navigateByUrl","TagPageComponent","activatedRoute","tagsService","feedService","sessionService","sidebarWrapperService","platformService","id$","tag$","pageable","fetch$","bind","ngOnInit","setTimeout","params$","trending","navigation","live","showSidebar","paramMap","get","ngOnDestroy$","getSingle$","user$","opts","markAsViewed$","isServer","snapshot","data","feed","feedRequest$","undefined","routes","path","component","resolve","TagPageRoutingModule","forChild","imports","exports","TagPageModule","declarations"],"mappings":"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","file":"pages-tag-page-tag-page-module-es5.js","sourcesContent":["import { Observable, of } from 'rxjs';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { map, defaultIfEmpty } from 'rxjs/operators';\nimport { TopicsService } from '@api/routes/topics.service';\n\nexport function fetchArticlesWithTopics$(\n  page: IPageResponse<IArticleView>,\n  topicsService: TopicsService\n): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    const topics: number[] = [];\n    page.content.forEach((article: IArticleView) => {\n        if (article.topics.length > 0) {\n            topics.push(article.topics[0]);\n        }\n    });\n    return page.content.length > 0 ? topicsService.getMultiple$(topics).pipe(defaultIfEmpty([]), map((topicsRet: ITopicViewFull[]) => {\n        const content: [IArticleView, ITopicView][] = [];\n        page.content.forEach((article: IArticleView) => {\n            if (article.topics.length > 0) {\n                content.push([article, topicsRet.find((x: ITopicViewFull) => x.meta.id === article.topics[0]) as ITopicView]);\n            } else {\n                content.push([article, null]);\n            }\n        });\n        return { ...page, content };\n    })) : of({ ...page, content: [] });\n}\n","import { Component, Input } from '@angular/core';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-tag-header',\n  templateUrl: './tag-header.component.html',\n  styleUrls: ['./tag-header.component.scss']\n})\nexport class TagHeaderComponent {\n  @Input() public tag: ITagView;\n\n  constructor(\n    public readonly router: Router\n  ) { }\n}\n","<section class=\"tag-card margin-bottom-44\">\n    <app-ui-card [shadow]=\"false\">\n        <div *ngIf=\"tag\" class=\"current-tag\">\n            <span># {{ tag ? tag.content : 'Неизвестный тег' }}</span>\n            <div class=\"publications-info\">\n                <div *ngIf=\"tag\" class=\"stats-item\">\n                    {{ 'COMMON.PUBLICATIONS_' | translate}}\n                    <span class=\"stats-item__value\">{{ tag.postCount }}</span>\n                </div>\n                <div class=\"current-tag__menu\">\n                    <app-action-menu-tag *appLoggedIn [data]=\"tag\" (gone)=\"this.router.navigate(['/tags'])\"></app-action-menu-tag>\n                </div>\n            </div>\n        </div>\n    </app-ui-card>\n</section>\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { OperatorFunction, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\n\nexport function notFound(router: Router): OperatorFunction<any, any> {\n    return catchError((error: HttpErrorResponse) => {\n        if (error.status === 404 || error.status === 422) {\n            router.navigateByUrl('/404');\n        }\n        return throwError(error);\n    });\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ReplaySubject, Observable, combineLatest } from 'rxjs';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { takeUntil, map, switchMap, filter } from 'rxjs/operators';\nimport { TagsService } from '@api/routes/tags.service';\nimport { ITagView } from '@api/schemas/tags/tag-view.interface';\nimport { PageableContent } from '@shared/classes/pageable-conetnt.class';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { FeedService } from '@api/routes/feed.service';\nimport { fetchArticlesWithTopics$ } from '@shared/functions/fetch-articles-with-topics.function';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { SessionService } from '@app/services/session.service';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\nimport { notFound } from '@shared/utils/not-found.operator';\nimport { PlatformService } from '@shared/services/platform.service';\n\n@Component({\n  selector: 'app-tag-page',\n  templateUrl: './tag-page.component.html',\n  styleUrls: ['./tag-page.component.scss']\n})\nexport class TagPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  private readonly id$: ReplaySubject<number> = new ReplaySubject<number>(1);\n\n  public readonly tag$: ReplaySubject<ITagView> = new ReplaySubject<ITagView>();\n  public readonly pageable: PageableContent<[IArticleView, ITopicView], [number, IUserViewFull]> =\n    new PageableContent<[IArticleView, ITopicView], [number, IUserViewFull]>(this.fetch$.bind(this));\n\n  constructor(\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly tagsService: TagsService,\n    private readonly feedService: FeedService,\n    private readonly topicsService: TopicsService,\n    private readonly sessionService: SessionService,\n    private readonly sidebarWrapperService: SidebarWrapperService,\n    private readonly platformService: PlatformService,\n    public readonly router: Router,\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n\n    this.activatedRoute.paramMap.pipe(\n      map((_: ParamMap) => +_.get('id')),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe(this.id$);\n\n    this.id$.pipe(\n      switchMap((id: number) => this.tagsService.getSingle$(id)),\n      notFound(this.router),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe(this.tag$);\n\n    const options$: Observable<[number, IUserViewFull]> = combineLatest([this.id$, this.sessionService.user$]);\n\n    options$.pipe(\n      switchMap((opts: [number, IUserViewFull]) => this.pageable.setOptionsWithReset$(opts)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n\n    options$.pipe(\n      filter((_: [number, IUserViewFull]) => !!_[1]),\n      switchMap(([id]: [number, IUserViewFull]) => this.tagsService.markAsViewed$(id)),\n      takeUntil(this.ngOnDestroy$)\n    ).subscribe();\n\n    if (this.platformService.isServer) {\n      this.pageable.content = this.activatedRoute.snapshot.data.feed;\n    }\n  }\n\n  public fetch$(page: number, options: [number, IUserViewFull]): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    return this.feedService.feedRequest$({ page, tag: options ? options[0] : undefined }).pipe(\n      switchMap((_: IPageResponse<IArticleView>) => fetchArticlesWithTopics$(_, this.topicsService)),\n      takeUntil(this.ngOnDestroy$),\n    );\n  }\n}\n","<app-tag-header [tag]=\"tag$ | async\"></app-tag-header>\n<section>\n    <ul *ngIf=\"pageable.content\" class=\"block-card item-space-40\">\n        <li *ngFor=\"let article of pageable.content; let i = index\">\n            <app-feed-article-view [data]=\"article[0]\" [topic]=\"article[1]\" [options]=\"{ pictureOn: true, menuOn: true }\"></app-feed-article-view>\n        </li>\n    </ul>\n    <p *ngIf=\"!pageable.content\">{{'COMMON.TAGS_NOT_FOUND' | translate}</p>\n</section>\n\n<app-pagination [pageable]=\"pageable\"></app-pagination>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { TagPageComponent } from './tag-page.component';\nimport { FeedResolverService } from '@shared/services/feed-resolver.service';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TagPageComponent,\n    resolve: { feed: FeedResolverService }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TagPageRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TagPageRoutingModule } from './tag-page-routing.module';\nimport { TagPageComponent } from './tag-page.component';\nimport { TagHeaderComponent } from './tag-header/tag-header.component';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FeedModule } from '@shared/modules/feed/feed.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\n\n\n@NgModule({\n  declarations: [TagPageComponent, TagHeaderComponent],\n  imports: [\n    CommonModule,\n    TagPageRoutingModule,\n    SharedUiModule,\n    TranslateModule.forChild(),\n    FeedModule,\n    SharedComponentsModule,\n    CommonDirectivesModule\n  ]\n})\nexport class TagPageModule { }\n"]}