{"version":3,"sources":["./src/app/modules/jobs/job-edit/job-edit.component.ts","./src/app/modules/jobs/job-edit/job-edit.component.html","./src/app/modules/jobs/job-edit/job-edit-routing.module.ts","./src/app/api/schemas/job/job-type.enum.ts","./src/app/api/schemas/job/job-place.enum.ts","./src/app/api/schemas/job/job-currency.enum.ts","./src/app/modules/jobs/job-edit/job-edit.module.ts"],"names":[],"mappings":"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","file":"job-edit-job-edit-module-es2015.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router, ParamMap } from '@angular/router';\nimport { from, Observable, of, ReplaySubject } from 'rxjs';\nimport { catchError, map, takeUntil, tap, switchMap } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { JobTypeEnum } from '@api/schemas/job/job-type.enum';\nimport { IJobViewFull } from '@api/schemas/job/job-view-full.interface';\nimport { JobCurrencyEnum } from '@api/schemas/job/job-currency.enum';\nimport { JobPlaceEnum } from '@api/schemas/job/job-place.enum';\nimport { JobsService } from '@api/routes/jobs.service';\nimport { IJobPatch } from '@api/schemas/job/job-patch.inetrface';\nimport { IUploadImageResponse } from '@api/schemas/image/upload-image-response.interface';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\n\n@Component({\n  selector: 'app-job-create',\n  templateUrl: './job-edit.component.html',\n  styleUrls: ['./job-edit.component.scss'],\n})\nexport class JobEditComponent extends AbstractComponent implements OnInit, OnDestroy {\n  // tslint:disable-next-line:variable-name\n  private _jobId$: Observable<number>;\n\n  public readonly CURRENCY: any = {\n    [JobCurrencyEnum.RUB]: this.translateService.instant('COMMON.RUB'),\n    [JobCurrencyEnum.USD]: this.translateService.instant('COMMON.USD'),\n    [JobCurrencyEnum.EUR]: this.translateService.instant('COMMON.EUR'),\n  };\n\n  public readonly TYPE: any = {\n    [JobTypeEnum.FULL]: this.translateService.instant('COMMON.FULL'),\n    [JobTypeEnum.PART_TIME]: this.translateService.instant('COMMON.PARTIAL'),\n  };\n\n  public readonly PLACE: any = {\n    [JobPlaceEnum.OFFICE]: this.translateService.instant('COMMON.PLACE.OFFICE'),\n    [JobPlaceEnum.REMOTE]: this.translateService.instant('COMMON.PLACE.REMOTE'),\n  };\n\n  public uploadedImageName: string = null;\n  public src: string = null;\n\n  public readonly form: FormGroup = this.fb.group({\n    info: this.fb.group({\n      name: ['', [Validators.required]],\n      minSalary: ['', [Validators.max(9999999), Validators.min(1)]],\n      maxSalary: ['', [Validators.max(9999999), Validators.min(1)]],\n      currency: [JobCurrencyEnum.RUB, Validators.required],\n      type: ['', Validators.required],\n      place: ['', Validators.required],\n      city: [''],\n      recruiterName: [''],\n      email: ['', Validators.email],\n    }),\n    body: this.fb.group({\n      tasks: [''],\n      workConditions: [''],\n      requirements: [''],\n      image: [null],\n    }),\n  });\n\n  public get jobId$(): Observable<number> {\n    if (!this._jobId$) {\n      const subject: ReplaySubject<number> = new ReplaySubject<number>(1);\n      this._jobId$ = subject;\n\n      this.route.paramMap.pipe(\n        switchMap((params: ParamMap) => {\n          const id: string = params.get('id');\n          if (id && parseInt(id, 10)) {\n            return of(+id);\n          }\n          return this.jobsService.create$();\n        }),\n        tap((id: number) => subject.next(id)),\n        takeUntil(this.ngOnDestroy$)\n      ).subscribe(\n        (id: number) => subject.next(id),\n        (err: any) => {\n          subject.error(err);\n          this._jobId$ = null;\n        },\n      );\n    }\n    return this._jobId$;\n  }\n\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly jobsService: JobsService,\n    private readonly route: ActivatedRoute,\n    private readonly router: Router,\n    private readonly translateService: TranslateService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n\n    this.route.paramMap.pipe(\n      switchMap((params: ParamMap) => {\n        const id: number = parseInt(params.get('id'), 10);\n        return (id && this.loadFrom$(id)) || of(null);\n      }),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe();\n  }\n\n  private loadFrom$(jobId: number): Observable<void> {\n    return this.jobsService.getSingle$(jobId).pipe(\n      map((job: IJobViewFull) => {\n        this.form.patchValue({\n          ...job,\n        });\n        if (job.body.image) {\n          this.uploadedImageName = 'Изображение загружено';\n          this.src = job.body.image;\n        }\n      }),\n      catchError(() => {\n        return of(null);\n      }),\n    );\n  }\n\n  private sendPatch$(value: IJobViewFull): Observable<IJobViewFull> {\n    return this.transformValue$(this.form.value, value).pipe(\n      switchMap((patch: IJobPatch) => this.jobsService.patch$(value.meta.id, patch)),\n      takeUntil(this.ngOnDestroy$)\n    );\n  }\n\n  private transformValue$(value: any, val: IJobViewFull): Observable<IJobPatch> {\n    const body: IJobPatch = { ...value.body, image: val.body.image };\n    return of({\n      ...value,\n      info: {\n        ...value.info,\n        minSalary: value.info.minSalary ? String(value.info.minSalary) : null,\n        maxSalary: value.info.maxSalary ? String(value.info.maxSalary) : null,\n      },\n      body,\n    });\n  }\n\n  public handleUploadFile(event: any): void {\n    const input: HTMLInputElement = event.target as HTMLInputElement;\n    const file: File = input.files[0];\n\n    if (file) {\n      this.jobId$.pipe(\n        switchMap((id: number) => this.jobsService.updateImage$(id, file)),\n        takeUntil(this.ngOnDestroy$)\n      ).subscribe((_: IUploadImageResponse) => {\n        this.src = _.url;\n      });\n      this.uploadedImageName = file.name;\n    } else {\n      this.uploadedImageName = null;\n    }\n    this.handleFormChange('body.image', file ? this.uploadedImageName : null);\n  }\n\n  public handleFormChange(key: string, value: any): void {\n    this.form.get(key).setValue(value);\n  }\n\n  public onSubmit(): void {\n    if (this.form.valid) {\n      this.jobId$.pipe(\n        switchMap((id: number) => this.jobsService.getSingle$(id)),\n        switchMap((_: IJobViewFull) => this.sendPatch$(_).pipe(\n          switchMap(() => this.jobsService.publish$(_.meta.id)),\n          switchMap(() => from(this.router.navigate(['/jobs', _.meta.id]))),\n        )),\n        takeUntil(this.ngOnDestroy$)\n      ).subscribe();\n    }\n  }\n}\n","<app-ui-card class=\"job-creation-form\" [shadow]=\"false\">\n  <form *ngIf=\"form\" [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n\n    <div class=\"job-name-wrapper\" formGroupName=\"info\">\n      <input class=\"job-name\"\n             formControlName=\"name\"\n             [placeholder]=\"'COMMON.VACANCYS_TITLE' | translate\"\n             maxlength=\"100\">\n      <span class=\"counter c-primary caption\">{{ 100 - form.value.info.name.length + '/100' }}</span>\n    </div>\n\n    <hr class=\"blue-line margin-bottom-30\">\n\n    <div class=\"fade-1 job-salary-wrapper margin-bottom-30\" formGroupName=\"info\">\n      <h6 class=\"margin-right-15\">{{ 'COMMON.SALARY' | translate }}</h6>\n      <div class=\"from-wrapper v-center margin-right-4\">\n        <app-ui-form-control class=\"v-center\">\n          <app-ui-label class=\"subtitle-1 from-to\" [normal]=\"true\">{{ 'COMMON.FROM' | translate }}</app-ui-label>\n          <input type=\"number\" class=\"job-salary-input\" formControlName=\"minSalary\" uiInput min=\"1\" max=\"9999999\">\n        </app-ui-form-control>\n      </div>\n      <div class=\"to-wrapper v-center\">\n        <app-ui-form-control class=\"v-center\">\n          <app-ui-label class=\"subtitle-1 from-to\" [normal]=\"true\">{{ 'COMMON.TO' | translate }}</app-ui-label>\n          <input type=\"number\" class=\"job-salary-input\" formControlName=\"maxSalary\" uiInput min=\"1\" max=\"9999999\">\n        </app-ui-form-control>\n      </div>\n      <app-ui-dropdown-menu class=\"subtitle-1 fade-1 overflow-none job-curents-select\">\n        <header class=\"head v-center clickable\">\n          <h6 class=\"dropdown-currency margin-right-8\">{{ CURRENCY[form.value.info.currency] }}</h6>\n          <svg class=\"f-primary\" name=\"chevron/down\"></svg>\n        </header>\n        <app-ui-dropdown-menu-item *ngFor=\"let kv of CURRENCY | keyvalue\"\n                                   (click)=\"handleFormChange('info.currency', kv.key)\"\n                                   [class.selected]=\"form.get('info.currency').value === kv.key\">{{ kv.value }}</app-ui-dropdown-menu-item>\n      </app-ui-dropdown-menu>\n    </div>\n\n    <div class=\"v-center margin-bottom-30 type-zan\" formGroupName=\"info\">\n      <app-ui-dropdown-menu class=\"fade-1 margin-right-44 overflow-none job-curents-left\">\n        <header class=\"head v-center clickable\">\n          <h6 class=\"margin-right-8\">{{ TYPE[form.value.info.type] || 'Тип занятости' }}</h6>\n          <svg class=\"f-primary\" name=\"chevron/down\"></svg>\n        </header>\n        <app-ui-dropdown-menu-item *ngFor=\"let kv of TYPE | keyvalue\" (click)=\"handleFormChange('info.type', kv.key)\"\n                                   [class.selected]=\"form.get('info.type').value === kv.key\">\n          {{ kv.value }}</app-ui-dropdown-menu-item>\n      </app-ui-dropdown-menu>\n      <app-ui-dropdown-menu class=\"fade-1 margin-right-44 overflow-none job-curents-right\">\n        <header class=\"head v-center clickable\">\n          <h6 *ngIf=\"form.value.info.place === 'OFFICE'\" class=\"margin-right-8\">{{ 'COMMON.PLACE.OFFICE' | translate }}\n          </h6>\n          <h6 *ngIf=\"form.value.info.place === 'REMOTE'\" class=\"margin-right-8\">{{ 'COMMON.PLACE.REMOTE' | translate }}\n          </h6>\n          <h6 *ngIf=\"!form.value.info.place\" class=\"margin-right-8\">{{ 'COMMON.PLACE.DEFAULT' | translate }}</h6>\n          <svg class=\"f-primary\" name=\"chevron/down\"></svg>\n        </header>\n        <app-ui-dropdown-menu-item *ngFor=\"let kv of PLACE | keyvalue\" (click)=\"handleFormChange('info.place', kv.key)\"\n                                   [class.selected]=\"form.get('info.place').value === kv.key\">\n          {{ kv.value }}</app-ui-dropdown-menu-item>\n        </app-ui-dropdown-menu>\n      <div class=\"to-wrapper\">\n        <app-ui-form-control>\n          <h6 class=\"fade-1 margin-right-8\">{{ 'COMMON.CITY'  | translate}}</h6>\n          <input class=\"job-salary-input city-input\" formControlName=\"city\" uiInput>\n        </app-ui-form-control>\n      </div>\n    </div>\n\n    <div class=\"fields-wrapper margin-bottom-20\" formGroupName=\"body\">\n      <div class=\"margin-bottom-30\">\n        <h6 class=\"fade-1 margin-bottom-10\" [class.c-primary]=\"inputTasks.focus\">{{ 'COMMON.TASKS' | translate }}</h6>\n        <textarea #inputTasks formControlName=\"tasks\" autosize [minRows]=\"1\"\n          placeholder=\"{{ 'COMMON.DESCRIBE_THE_TASKS'  | translate}}...\"></textarea>\n      </div>\n      <div class=\"margin-bottom-30\">\n        <h6 class=\"fade-1 margin-bottom-10\" [class.c-primary]=\"inputConditions.focus\">\n          {{ 'COMMON.JOB_CONDITIONS' | translate }}</h6>\n        <textarea #inputConditions formControlName=\"workConditions\" autosize [minRows]=\"1\"\n          placeholder=\"{{ 'COMMON.DESCRIBE_THE_JOB'  | translate}}...\"></textarea>\n      </div>\n      <div>\n        <h6 class=\"fade-1 margin-bottom-10\" [class.c-primary]=\"inputRequirements.focus\">\n          {{ 'COMMON.REQUIREMENTS' | translate }}</h6>\n        <textarea #inputRequirements formControlName=\"requirements\" autosize [minRows]=\"1\"\n          placeholder=\"{{ 'COMMON.DESCRIBE_THE_CANDIDATES'  | translate}}...\"></textarea>\n      </div>\n    </div>\n\n    <div class=\"margin-bottom-20\" formGroupName=\"body\">\n      <input id=\"file-attachment\" class=\"hidden\" type=\"file\" accept=\"image/*\" (input)=\"handleUploadFile($event)\">\n      <label class=\"button-1 v-center c-primary clickable\" for=\"file-attachment\">\n        <svg name=\"clip\" class=\"f-primary margin-right-8\"></svg>\n        <span\n          class=\"clickable\">{{ uploadedImageName ? uploadedImageName : ('COMMON.ADD_OFFICE_PHOTO' | translate) }}</span>\n      </label>\n    </div>\n\n    <div style=\"display: flex; flex-wrap: wrap;\">\n      <div class=\"contact-input-wrapper margin-bottom-20\" style=\"width: 340px;\" formGroupName=\"info\">\n        <h6 class=\"fade-1 margin-bottom-20\">{{ 'COMMON.CONTACTS' | translate }}</h6>\n        <span class=\"subtitle-1 fade-1 margin-bottom-15\" [class.c-primary]=\"nameInput.focus\"\n          [class.c-error]=\"nameInput.focus && form.controls.info['controls']['recruiterName'].invalid && form.controls.info['controls']['recruiterName'].dirty\">{{ 'COMMON.CONTACT_PERSON' | translate }}</span>\n        <app-ui-icon-input #nameInput type=\"text\" class=\"margin-bottom-20\" icon=\"user\" [placeholder]=\"'COMMON.ENTER_YOUR_NAME' | translate\"\n                           [control]=\"form.controls.info['controls']['recruiterName']\">\n        </app-ui-icon-input>\n        <span class=\"subtitle-1 fade-1 margin-bottom-15\" [class.c-primary]=\"emailInput.focus\"\n          [class.c-error]=\"emailInput.focus && form.controls.info['controls']['email'].invalid && form.controls.info['controls']['email'].dirty\">{{ 'COMMON.EMAIL_ADDRESS' | translate }}</span>\n        <app-ui-icon-input #emailInput type=\"email\" placeholder=\"example@gmail.com\" icon=\"mail\"\n                           [control]=\"form.controls.info['controls']['email']\"></app-ui-icon-input>\n      </div>\n\n      <div *ngIf=\"src\" style=\"margin-left: auto;\">\n        <img [src]=\"src\">\n      </div>\n    </div>\n\n    <div class=\"input-submit v-center space-between\">\n      <button id=\"input-login-submit\" type=\"submit\" [disabled]=\"form.invalid\" class=\"v-center button-1\">\n        <span class=\"margin-right-15\">{{ 'COMMON.PUBLISH' | translate }}</span>\n        <svg name=\"paper-airplane\"></svg>\n      </button>\n      <div class=\"sub-info flex-item\">\n        <span>{{ 'COMMON.VACANCIES_CAN_BE' | translate }}<a [routerLink]=\"['/news/508']\"\n          style=\"color: inherit; padding: 0;\">{{ 'COMMON.COMPANYS_BLOG' | translate }}</a>.</span>\n      </div>\n    </div>\n\n  </form>\n</app-ui-card>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { JobEditComponent } from './job-edit.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: JobEditComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class JobEditRoutingModule {}\n","export enum JobTypeEnum {\n    FULL = 'FULL',\n    PART_TIME = 'PART_TIME',\n}\n","export enum JobPlaceEnum {\n    OFFICE = 'OFFICE',\n    REMOTE = 'REMOTE',\n}\n","export enum JobCurrencyEnum {\n    RUB = 'RUB',\n    USD = 'USD',\n    EUR = 'EUR',\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { JobEditComponent } from './job-edit.component';\nimport { AutosizeModule } from 'ngx-autosize';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { JobEditRoutingModule } from './job-edit-routing.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\n\n@NgModule({\n  declarations: [JobEditComponent],\n  imports: [\n    CommonModule,\n    JobEditRoutingModule,\n    ReactiveFormsModule,\n    SharedUiModule,\n    SharedComponentsModule,\n    AutosizeModule,\n    TranslateModule.forChild()\n  ],\n  exports: [JobEditComponent],\n})\nexport class JobEditModule {}\n"],"sourceRoot":"webpack:///"}