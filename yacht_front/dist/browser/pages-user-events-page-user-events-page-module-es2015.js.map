{"version":3,"sources":["./src/app/shared/services/users-resolver.service.ts","./src/app/modules/user/pages/user-events-page/event-filters.function.ts","./src/app/shared/classes/pageable-conetnt.class.ts","./src/app/modules/user/pages/user-events-page/user-events-page.module.ts","./src/app/shared/utils/not-found.operator.ts","./src/app/modules/user/pages/user-events-page/user-events-page-routing.module.ts","./src/app/modules/user/pages/user-events-page/user-events-page.component.ts","./src/app/modules/user/pages/user-events-page/user-events-page.component.html"],"names":[],"mappings":"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","file":"pages-user-events-page-user-events-page-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, Router } from '@angular/router';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { UsersService } from '@api/routes/users.service';\nimport { Observable } from 'rxjs';\nimport { notFound } from '@shared/utils/not-found.operator';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersResolverService implements Resolve<IUserViewFull> {\n  constructor(\n    private readonly usersService: UsersService,\n    private readonly router: Router\n  ) { }\n\n  resolve(route: ActivatedRouteSnapshot): Observable<IUserViewFull> {\n    return this.usersService.getSingle$(route.params.id).pipe(notFound(this.router));\n  }\n}\n","import { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { TranslateService } from '@ngx-translate/core';\n\nexport function eventFilters(translateService: TranslateService): IToggleItem<EventFiltersEnum, IEventQuery>[] {\n    return [\n        {\n            id: 0,\n            text: translateService.instant('COMMON.ALL'),\n            data: null,\n        },\n        {\n            id: 1,\n            text: translateService.instant('COMMON.EXHIBITS'),\n            data: EventFiltersEnum.EXHIBITIONS,\n        },\n        {\n            id: 2,\n            text: translateService.instant('COMMON.EDUCATION'),\n            data: EventFiltersEnum.TRAINING,\n        },\n        {\n            id: 3,\n            text: translateService.instant('COMMON.REGATTA_'),\n            data: EventFiltersEnum.REGATTAS,\n        },\n        {\n            id: 4,\n            text: translateService.instant('COMMON.FLEET'),\n            data: EventFiltersEnum.FLOTILLAS,\n        },\n        {\n            id: 5,\n            text: translateService.instant('COMMON.PRESENTATIONS'),\n            data: EventFiltersEnum.PRESENTATIONS,\n        },\n        {\n            id: 6,\n            text: translateService.instant('COMMON.PRESS-CONFERENCES'),\n            data: EventFiltersEnum.CONFERENCES,\n        },\n        {\n            id: 7,\n            text: 'Конференции',\n            data: EventFiltersEnum.FORUMS,\n        },\n        {\n            id: 8,\n            text: translateService.instant('COMMON.OTHER'),\n            data: EventFiltersEnum.OTHER,\n        },\n    ];\n}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UserEventsPageRoutingModule } from './user-events-page-routing.module';\nimport { UserEventsPageComponent } from './user-events-page.component';\nimport { FiltersModule } from '@shared/modules/filters/filters.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { EventPreviewModule } from '@modules/events/event-preview/event-preview.module';\n\n\n@NgModule({\n  declarations: [UserEventsPageComponent],\n  imports: [\n    CommonModule,\n    UserEventsPageRoutingModule,\n    FiltersModule,\n    SharedComponentsModule,\n    EventPreviewModule,\n    SharedComponentsModule\n  ]\n})\nexport class UserEventsPageModule { }\n","import { OperatorFunction, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\n\nexport function notFound(router: Router): OperatorFunction<any, any> {\n    return catchError((error: HttpErrorResponse) => {\n        if (error.status === 404 || error.status === 422) {\n            router.navigateByUrl('/404');\n        }\n        return throwError(error);\n    });\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UserEventsPageComponent } from './user-events-page.component';\nimport { UsersResolverService } from '@shared/services/users-resolver.service';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserEventsPageComponent,\n    resolve: { data: UsersResolverService }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UserEventsPageRoutingModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { eventFilters } from './event-filters.function';\nimport { IEventView } from '@api/schemas/event/event-view.interface';\nimport { PageableContent, NO_CONTENT } from '@shared/classes/pageable-conetnt.class';\nimport { IUserViewFull } from '@api/schemas/user/user-view-full.interface';\nimport { EventFiltersEnum } from '@api/schemas/event/event-filters.enum';\nimport { BehaviorSubject, Observable, combineLatest, throwError } from 'rxjs';\nimport { IToggleItem } from '@shared/interfaces/toggle-item.interface';\nimport { IEventQuery } from '@api/schemas/event/event-query.interface';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { takeUntil, map, tap, switchMap } from 'rxjs/operators';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { UsersService } from '@api/routes/users.service';\nimport { SessionService } from '@app/services/session.service';\nimport { CompaniesService } from '@api/routes/companies.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { PermissionService } from '@app/services/permission/permission.service';\nimport { SidebarWrapperService } from '@layout/sidebar-wrapper/sidebar-wrapper.service';\n\n@Component({\n  selector: 'app-user-events-page',\n  templateUrl: './user-events-page.component.html',\n  styleUrls: ['./user-events-page.component.scss']\n})\nexport class UserEventsPageComponent extends AbstractComponent implements OnInit, OnDestroy {\n  public readonly activeFilter$: BehaviorSubject<EventFiltersEnum> = new BehaviorSubject<EventFiltersEnum>(null);\n  public readonly filters: IToggleItem<EventFiltersEnum, IEventQuery>[] = eventFilters(this.translateService);\n\n  public currentEvents: IEventView[] = [];\n  public pageable: PageableContent<IEventView, [number, IUserViewFull, EventFiltersEnum]> =\n    new PageableContent<IEventView, [number, IUserViewFull, EventFiltersEnum]>(this.fetchPageFn$.bind(this), null);\n  public id$: Observable<number>;\n\n  constructor(\n    private readonly usersService: UsersService,\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly sessionService: SessionService,\n    private readonly companiesService: CompaniesService,\n    private readonly permissionService: PermissionService,\n    private readonly translateService: TranslateService,\n    private readonly sidebarWrapperService: SidebarWrapperService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.sidebarWrapperService.params$.next({ article: false, trending: true, navigation: true, live: false, showSidebar: true });\n    });\n\n    this.id$ = this.activatedRoute.paramMap.pipe(\n      map((paramMap: ParamMap) => {\n        const id = paramMap.get('id');\n        return /^\\d+$/.test(id) ? parseInt(id, 10) : id;\n      }),\n      switchMap((id: string | number) => this.usersService.getSingle$(id)),\n      map((user: IUserViewFull) => user.meta.id)\n    );\n\n    this.pageable.content$.pipe(takeUntil(this.ngOnDestroy$)).subscribe((content: IEventView[]) => {\n      this.currentEvents.push(...content);\n    });\n    combineLatest([this.id$, this.sessionService.user$, this.activeFilter$]).pipe(\n      tap((options: [number, IUserViewFull, EventFiltersEnum]) => {\n        this.currentEvents.splice(0, this.currentEvents.length);\n        this.pageable.options$.next(options);\n      }),\n      switchMap(() => this.pageable.reset$()),\n      takeUntil(this.ngOnDestroy$),\n    ).subscribe(() => {\n      this.pageable.fetch();\n    });\n  }\n\n  private fetchPageFn$(page: number, options: [number, IUserViewFull, EventFiltersEnum] | null): Observable<IPageResponse<IEventView>> {\n    if (options === null) {\n      return throwError(NO_CONTENT);\n    }\n    const canSeeDrafts = options[1] !== null && (options[1].meta.id === options[0] || this.permissionService.hasAnyRole(options[1], 'EDITOR$'));\n    return this.companiesService.events$(options[0], page, {\n      stages: canSeeDrafts ? [PublicationStageEnum.DRAFT, PublicationStageEnum.REVIEWING,\n        PublicationStageEnum.PUBLISHED, PublicationStageEnum.BLOCKED] : [PublicationStageEnum.PUBLISHED],\n      types: options[2] ? [EventFiltersEnum[options[2]] as any] : [],\n    });\n  }\n\n  public remove(event: IEventView): void {\n    this.currentEvents.splice(this.currentEvents.findIndex((it: IEventView) => it === event), 1);\n  }\n\n  public filterEvent(filter: IToggleItem<EventFiltersEnum>): void {\n    this.activeFilter$.next(filter.data);\n  }\n}\n","<app-filters [filters]=\"filters\" (toggleFilter)=\"filterEvent($event)\"></app-filters>\n<ul class=\"block-card item-space-40\">\n    <li *ngFor=\"let event of currentEvents\">\n        <app-event-preview [event]=\"event\" (gone)=\"remove(event)\"></app-event-preview>\n    </li>\n</ul>\n<app-pagination [pageable]=\"pageable\"></app-pagination>\n"],"sourceRoot":"webpack:///"}