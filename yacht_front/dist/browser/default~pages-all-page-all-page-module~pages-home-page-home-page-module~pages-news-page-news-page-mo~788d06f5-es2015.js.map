{"version":3,"sources":["./src/app/shared/modules/feed/feed-article-view/feed-article-view.component.ts","./src/app/shared/modules/feed/feed-article-view/feed-article-view.component.html","./src/app/shared/modules/feed/feed.module.ts"],"names":[],"mappings":"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","file":"default~pages-all-page-all-page-module~pages-home-page-home-page-module~pages-news-page-news-page-mo~788d06f5-es2015.js","sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ResponsiveService } from '@app/services/responsive.service';\nimport { PublicationStageEnum } from '@api/schemas/article/publication-stage.enum';\nimport { IUserFeedInfo } from './user-feed-info.interface';\nimport { IFeedOptions } from './feed-options.interface';\nimport { SessionService } from '@app/services/session.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { AbstractComponent } from '@shared/classes/abstract-component.class';\nimport { UserDropdownService } from '@layout/shared/services/user-dropdown.service';\nimport { ArticlesService } from '@api/routes/articles.service';\nimport { VoteActionNames, VoteActionValues, VoteActionValuesNames } from '@shared/components/voting/voting.const';\n\n@Component({\n  selector: 'app-feed-article-view',\n  templateUrl: './feed-article-view.component.html',\n  styleUrls: ['./feed-article-view.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FeedArticleViewComponent extends AbstractComponent {\n  @Input() public data: IArticleView;\n  @Input() public link: [string, string | number];\n  @Input() public options: IFeedOptions;\n  @Input() public topic: ITopicView;\n  @Input() public user: IUserFeedInfo;\n\n  @Output() public readonly gone: EventEmitter<any> = new EventEmitter<any>();\n  @Output() public readonly gonePromote: EventEmitter<IArticleView> = new EventEmitter<IArticleView>();\n  @Output() public readonly pinned: EventEmitter<[IArticleView, ITopicView]> = new EventEmitter<[IArticleView, ITopicView]>();\n  @Output() public readonly goneBookmarked: EventEmitter<[IArticleView, string]> = new EventEmitter<[IArticleView, string]>();\n\n  public readonly publicationStageEnum: typeof PublicationStageEnum = PublicationStageEnum;\n  public isLoggedIn =  this.sessionService.loggedIn$;\n\n  constructor(\n    private readonly sessionService: SessionService,\n    private readonly articlesService: ArticlesService,\n    private readonly userDropdown: UserDropdownService,\n    private readonly changeDetectorRef: ChangeDetectorRef,\n    public readonly responsive: ResponsiveService\n  ) {\n    super();\n  }\n\n  public toggleBookmark(): void {\n    if (this.sessionService.loggedIn$.value) {\n      this.articlesService.bookmark$(this.data.meta.id, this.data.bookmarks.you)\n        .pipe(takeUntil(this.ngOnDestroy$))\n        .subscribe(() => {\n          this.data.bookmarks.you = !this.data.bookmarks.you;\n          this.data.bookmarks.count += this.data.bookmarks.you ? 1 : -1;\n          if (!this.data.bookmarks.you) {\n            this.goneBookmarked.next([this.data, 'article']);\n          }\n          this.changeDetectorRef.markForCheck();\n        });\n    } else {\n      this.userDropdown.setShowDropdown(true);\n    }\n  }\n\n  public doVote(vote: any): void {\n    const castVote: VoteActionValues = (vote === VoteActionNames.UP)\n      ? VoteActionValuesNames.POSITIVE\n      : VoteActionValuesNames.NEGATIVE;\n    if (this.data.votes.you === castVote) {\n      this.articlesService.vote$(this.data.meta.id, true)\n        .pipe(takeUntil(this.ngOnDestroy$))\n        .subscribe(() => {\n          (castVote > 0) ? this.data.votes.up -= castVote : this.data.votes.down += castVote;\n          this.data.votes.you = 0;\n          this.changeDetectorRef.markForCheck();\n        });\n    } else {\n      this.articlesService.vote$(this.data.meta.id, false, castVote)\n        .pipe(takeUntil(this.ngOnDestroy$))\n        .subscribe(() => {\n          (this.data.votes.you > 0) ? this.data.votes.up -= this.data.votes.you : this.data.votes.down += this.data.votes.you;\n          (castVote > 0) ? this.data.votes.up += castVote : this.data.votes.down -= castVote;\n          this.data.votes.you = castVote;\n          this.changeDetectorRef.markForCheck();\n        });\n    }\n  }\n}\n","<div *ngIf=\"!(responsive.lt.medium | async)\" class=\"info\">\n    <div *ngIf=\"topic\" class=\"topics\">\n        <app-ui-icon class=\"margin-right-10\" [src]=\"topic.info.picture || ''\"\n                     [textAlternative]=\"topic.info.name || ''\"\n                     [size]=\"'small'\"></app-ui-icon>\n        <div class=\"names subtitle-1\" >\n            <span>\n                <a [routerLink]=\"['/topics', topic.info.url ? topic.info.url : topic.meta.id]\">{{ topic.info.name }}</a>\n            </span>\n        </div>\n        <svg *ngIf=\"data.pinned && options.pinnedMark\" name=\"star\" class=\"icon\" style=\"margin-left: 20px; fill: #00b7ff\"></svg>\n    </div>\n    <ng-container [ngSwitch]=\"data.status.publicationStage\">\n        <span *ngSwitchCase=\"publicationStageEnum.DRAFT\" class=\"overline c-caption c-primary\">{{ 'COMMON.DRAFT' | translate }}</span>\n        <span *ngSwitchCase=\"publicationStageEnum.REVIEWING\" class=\"overline c-caption\">{{ 'COMMON.ON_MODERATION' | translate }}</span>\n        <span *ngSwitchCase=\"publicationStageEnum.BLOCKED\" class=\"overline c-caption\">{{ 'COMMON.BLOCKED' | translate }}</span>\n    </ng-container>\n    <div class='time-author-actions'>\n        <span class=\"author subtitle-2 fade-1 btn\" [ngClass]=\"{ 'company': data.author.info.company.isCompany }\">\n            <a [routerLink]=\"data.author | accountUrl\" [class.color-primary]=\"data.author.info.company.isCompany\">{{ data.author.info | personName }}</a>\n        </span>\n        <span class=\"time caption fade-3\">{{ (data.status.publishedAt || data.meta.updatedAt) | customDate }}</span>\n        <span class=\"actions\">\n            <app-action-menu-article *appLoggedIn\n                                     [data]=\"data\"\n                                     [topic]=\"topic\"\n                                     [isLogged]='isLoggedIn | async'\n                                     (pinned)=\"pinned.emit($event)\"\n                                     (goneBookmarked)=\"goneBookmarked.next($event)\"\n                                     (gonePromote)=\"this.gonePromote.emit($event)\"\n                                     (gone)=\"this.gone.emit($event)\">\n            </app-action-menu-article>\n        </span>\n    </div>\n</div>\n\n<div *ngIf=\"responsive.lt.medium | async\" class=\"info-mob\">\n    <div style=\"display: flex; width: 100%;\">\n        <div style=\"display: flex;\">\n            <div *ngIf=\"topic\" class=\"topics\">\n                <app-ui-icon class=\"margin-right-10\" [src]=\"topic.info.picture || ''\"\n                             [textAlternative]=\"topic.info.name || ''\"\n                             [size]=\"'small'\"></app-ui-icon>\n                <div class=\"names subtitle-1\">\n                    <span><a [routerLink]=\"['/topics', topic.info.url ? topic.info.url : topic.meta.id]\">{{ topic.info.name }}</a></span>\n                </div>\n                <svg *ngIf=\"data.pinned && options.pinnedMark\" name=\"star\" class=\"icon\" style=\"margin-left: 20px; fill: #00b7ff\"></svg>\n            </div>\n            <div style=\"width: 1px; height: 26px; display: inline-block;\"></div>\n        </div>\n        <div style=\"display: flex; margin-left: auto;\">\n            <ng-container [ngSwitch]=\"data.status.publicationStage\">\n                <span *ngSwitchCase=\"publicationStageEnum.DRAFT\" class=\"overline c-caption c-primary\" style=\"padding-right: 10px; display: inline-flex; align-items: center;\">{{ 'COMMON.DRAFT' | translate }}</span>\n                <span *ngSwitchCase=\"publicationStageEnum.REVIEWING\" class=\"overline c-caption\" style=\"padding-right: 10px; display: inline-flex; align-items: center;\">{{ 'COMMON.ON_MODERATION' | translate }}</span>\n                <span *ngSwitchCase=\"publicationStageEnum.BLOCKED\" class=\"overline c-caption\" style=\"padding-right: 10px; display: inline-flex; align-items: center;\">{{ 'COMMON.BLOCKED' | translate }}</span>\n            </ng-container>\n            <span class=\"actions\" style=\"margin-left: auto;\">\n                <app-action-menu-article *appLoggedIn\n                                         [data]=\"data\"\n                                         [topic]=\"topic\"\n                                         [user]=\"data.author\"\n                                         (pinned)=\"pinned.emit($event)\"\n                                         (goneBookmarked)=\"goneBookmarked.next($event)\"\n                                         (gone)=\"this.gone.emit($event)\">\n                </app-action-menu-article>\n            </span>\n        </div>\n    </div>\n    <div class='time-author-actions' style=\"width: 100%; display: flex;\">\n        <span class=\"author subtitle-2 fade-1 btn\" [ngClass]=\"{ 'company': data.author.info.company.isCompany }\" style=\"padding-top: 10px\"><a [routerLink]=\"data.author | accountUrl\"> {{ data.author.info | personName }} </a></span>\n        <span class=\"time caption fade-3\" style=\"padding-top: 10px; margin-left: auto;\">{{ (data.status.publishedAt || data.meta.updatedAt) | customDate }}</span>\n    </div>\n</div>\n\n<div class=\"content\">\n    <a [routerLink]=\"link ? link : ['/news', data.meta.id]\">\n        <p class=\"title\" style=\"word-wrap: break-word;\">{{ data.info.title || ('COMMON.UNTITLED_ARTICLE' | translate) }}</p>\n        <p class=\"body-2\" style=\"word-wrap: break-word;\">{{ data.info.summary }}</p>\n        <img *ngIf=\"data.info.cover && options.pictureOn\" [src]=\"data.info.cover\" [alt]=\"data.info.title\">\n    </a>\n    \n</div>\n<div *ngIf=\"options.menuOn else justABorder\" class=\"stats v-center with-border\">\n    <div class=\"v-center count\" [ngClass]=\"{ 'hoverable-with-icon': !!data.bookmarks }\" (click)=\"toggleBookmark()\">\n        <svg name=\"bookmark\" class=\"icon\" [ngClass]=\"{ 'active': data.bookmarks && data.bookmarks.you }\"></svg>\n        <span class=\"subtitle-2\">{{ data.bookmarks.count }}</span>\n    </div>\n    <div fragment=\"comments-block\" class=\"v-center count\">\n        <a [routerLink]=\"['/news', data.meta.id]\" style=\"color: inherit\">\n            <svg name=\"comment\" class=\"icon\"></svg>\n            <span class=\"subtitle-2\">{{ data.commentCount }}</span>\n        </a>\n    </div>\n    <div class=\"v-center count\">\n        <svg name=\"view\" class=\"icon\"></svg>\n        <span class=\"subtitle-2\">{{ data.views.count }}</span>\n    </div>\n    <app-share *ngIf=\"!(responsive.lt.medium | async)\" [url]=\"['/news', data.meta.id] | url\"></app-share>\n    <div class=\"v-center votes\">\n        <app-voting\n            [up]=\"data.votes.up\"\n            [down]=\"data.votes.down\"\n            [castVote]=\"data.votes.you\"\n            [style]=\"'article'\"\n            (vote)=\"doVote($event)\">\n        </app-voting>\n    </div>\n</div>\n\n<ng-template #justABorder>\n    <div class=\"with-border margin-bottom-8\" style=\"height: 12px;\"></div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FeedArticleViewComponent } from './feed-article-view/feed-article-view.component';\nimport { RouterModule } from '@angular/router';\nimport { SharedPipesModule } from '@shared/pipes/shared-pipes.module';\nimport { SharedUiModule } from '@shared/ui/shared-ui.module';\nimport { SharedComponentsModule } from '@shared/components/shared-components.module';\nimport { SvgModule } from '../svg/svg.module';\nimport { CommonDirectivesModule } from '@shared/directives/directives.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n\n@NgModule({\n  declarations: [FeedArticleViewComponent],\n  exports: [FeedArticleViewComponent],\n  imports: [\n    CommonModule,\n    RouterModule,\n    SharedPipesModule,\n    SharedUiModule,\n    SharedComponentsModule,\n    SvgModule,\n    CommonDirectivesModule,\n    TranslateModule.forChild()\n  ]\n})\nexport class FeedModule { }\n"],"sourceRoot":"webpack:///"}