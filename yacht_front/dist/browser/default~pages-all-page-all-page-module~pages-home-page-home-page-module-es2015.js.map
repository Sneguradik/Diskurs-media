{"version":3,"sources":["./src/app/shared/classes/feed-component.class.ts","./src/app/shared/functions/fetch-articles-with-topics.function.ts","./src/app/shared/classes/pageable-conetnt.class.ts"],"names":[],"mappings":"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","file":"default~pages-all-page-all-page-module~pages-home-page-home-page-module-es2015.js","sourcesContent":["import { IFeedParams } from '@api/schemas/feed/feed-params.interface';\nimport { Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { switchMap, takeUntil } from 'rxjs/operators';\nimport { FeedService } from '@api/routes/feed.service';\nimport { TopicsService } from '@api/routes/topics.service';\nimport { AbstractComponent } from './abstract-component.class';\nimport { fetchArticlesWithTopics$ } from '@shared/functions/fetch-articles-with-topics.function';\nimport { IEventsJobsControl } from '@api/schemas/dashboard/events-jobs-control.interface';\nimport { AdministrationService } from '@api/routes/administration.service';\nimport { ActivatedRoute, UrlSegment } from '@angular/router';\nimport { Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { IBannerPageableContent } from '@modules/dashboard/pages/ads-management-page/banner-pageable-content.interface';\nimport { AdvertisementService } from '@api/routes/advertisement.service';\nimport { BannerPlaceEnum } from '@api/schemas/advertisement/banner-place.enum';\nimport { IBannerReturnView } from '@api/schemas/advertisement/banner-return-view.interface';\nimport { PlatformService } from '@shared/services/platform.service';\n\n@Component({\n    template: ''\n})\nexport abstract class FeedComponent extends AbstractComponent implements OnInit {\n\n    @ViewChild('adElem1', { static: false }) private adElem1: ElementRef;\n    @ViewChild('adElem2', { static: false }) private adElem2: ElementRef;\n    @ViewChild('adElem3', { static: false }) private adElem3: ElementRef;\n\n    public ads: IBannerPageableContent[];\n    public adNums: number[] = [0, 0, 0];\n    public adViewedProps: boolean[] = [false, false, false];\n\n    public eventsJobs: IEventsJobsControl;\n    public feed = false;\n    public publications = false;\n\n    @HostListener('window:scroll', ['$event']) public onScroll(): void {\n        if (!this.adViewedProps[0] && this.ads[0].content[0] && this.adElem1) {\n            this.adViewed(0);\n        }\n        if (!this.adViewedProps[1] && this.ads[1].content[0] && this.adElem2) {\n            this.adViewed(1);\n        }\n        if (!this.adViewedProps[2] && this.ads[2].content[0] && this.adElem3) {\n            this.adViewed(2);\n        }\n    }\n\n    constructor(\n      protected readonly feedService: FeedService,\n      protected readonly topicsService: TopicsService,\n      protected readonly administrationService: AdministrationService,\n      protected readonly activatedRoute: ActivatedRoute,\n      protected readonly advertisementService: AdvertisementService,\n      protected readonly platformService: PlatformService\n    ) {\n        super();\n        this.ads = [\n            {\n                content: [],\n                currentPage: 0,\n                totalPages: 1,\n                contentLoading: false,\n            },\n            {\n                content: [],\n                currentPage: 0,\n                totalPages: 1,\n                contentLoading: false,\n            },\n            {\n                content: [],\n                currentPage: 0,\n                totalPages: 1,\n                contentLoading: false,\n            },\n        ];\n    }\n\n    ngOnInit(): void {\n        this.administrationService.getEventsJobs$().pipe(takeUntil(this.ngOnDestroy$)).subscribe((_: IEventsJobsControl) => {\n            this.eventsJobs = _;\n        });\n        this.activatedRoute.url.pipe(takeUntil(this.ngOnDestroy$)).subscribe((_: UrlSegment[]) => {\n            if (_.toString() === '') {\n                this.feed = true;\n            } else if (_.toString() === 'all') {\n                this.publications = true;\n            }\n        });\n        if (this.platformService.isBrowser) {\n            this.getAd();\n        }\n    }\n\n    protected fetch$(page: number, options: IFeedParams): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n        return this.feedService.feedRequest$({ ...options, page })\n          .pipe(switchMap((article: IPageResponse<IArticleView>) => fetchArticlesWithTopics$(article, this.topicsService)));\n    }\n\n    public getAd(): void {\n        this.fetchAd(0);\n        this.fetchAd(1);\n        this.fetchAd(2);\n    }\n\n    public fetchAd(elem: number): void {\n        if ((this.ads[elem].content === [] || this.ads[elem].currentPage + 1 <= this.ads[elem].totalPages)\n          && !this.ads[elem].contentLoading) {\n            this.ads[elem].contentLoading = true;\n            this.advertisementService.get$(\n                this.ads[elem].currentPage,\n                elem === 0 ? BannerPlaceEnum.FEED1 : elem === 1 ? BannerPlaceEnum.FEED2 : BannerPlaceEnum.FEED3\n            ).pipe(takeUntil(this.ngOnDestroy$)).subscribe((_: IPageResponse<IBannerReturnView>) => {\n                this.ads[elem].content.push(..._.content);\n                this.ads[elem].totalPages = _.totalPages;\n                this.ads[elem].currentPage++;\n                this.ads[elem].contentLoading = false;\n                if (this.ads[elem].currentPage + 1 <= this.ads[elem].totalPages) {\n                    this.getAd();\n                } else {\n                    if (this.ads[elem].content[0]) {\n                        if (!localStorage.getItem('ad-feed' + elem)) {\n                            localStorage.setItem('ad-feed' + elem, '1');\n                            this.adNums[elem] = 0;\n                        } else {\n                            this.adNums[elem] = Number(localStorage.getItem('ad-feed' + elem)) - 1;\n                            if (this.adNums[elem] + 1 < this.ads[elem].content.length) {\n                                this.adNums[elem]++;\n                            } else {\n                                this.adNums[elem] = 0;\n                            }\n                            localStorage.setItem('ad-feed' + elem, this.adNums[elem] + 1 + '');\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    public adViewed(elem: number): void {\n        let rect: any;\n        switch (elem) {\n            case 0:\n                rect = this.adElem1.nativeElement.getBoundingClientRect();\n                break;\n            case 1:\n                rect = this.adElem2.nativeElement.getBoundingClientRect();\n                break;\n            case 2:\n                rect = this.adElem3.nativeElement.getBoundingClientRect();\n                break;\n        }\n        const viewHeight: number = Math.max(document.documentElement.clientHeight, window.innerHeight);\n        if (!(rect.bottom < 0 || rect.top - viewHeight >= 0) && !this.adViewedProps[elem]) {\n            this.advertisementService.view$(this.ads[elem].content[this.adNums[elem]].id)\n              .pipe(takeUntil(this.ngOnDestroy$))\n              .subscribe();\n            this.adViewedProps[elem] = true;\n        }\n    }\n\n    public adClicked(elem: number): void {\n        this.advertisementService.click$(this.ads[elem].content[this.adNums[elem]].id)\n          .pipe(takeUntil(this.ngOnDestroy$))\n          .subscribe(() => {\n            window.open(this.ads[elem].content[this.adNums[elem]].url, '_blank');\n        });\n    }\n}\n","import { Observable, of } from 'rxjs';\nimport { IArticleView } from '@api/schemas/article/article-view.interface';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { ITopicView } from '@api/schemas/topic/topic-view.interface';\nimport { ITopicViewFull } from '@api/schemas/topic/topic-view-full.interface';\nimport { map, defaultIfEmpty } from 'rxjs/operators';\nimport { TopicsService } from '@api/routes/topics.service';\n\nexport function fetchArticlesWithTopics$(\n  page: IPageResponse<IArticleView>,\n  topicsService: TopicsService\n): Observable<IPageResponse<[IArticleView, ITopicView]>> {\n    const topics: number[] = [];\n    page.content.forEach((article: IArticleView) => {\n        if (article.topics.length > 0) {\n            topics.push(article.topics[0]);\n        }\n    });\n    return page.content.length > 0 ? topicsService.getMultiple$(topics).pipe(defaultIfEmpty([]), map((topicsRet: ITopicViewFull[]) => {\n        const content: [IArticleView, ITopicView][] = [];\n        page.content.forEach((article: IArticleView) => {\n            if (article.topics.length > 0) {\n                content.push([article, topicsRet.find((x: ITopicViewFull) => x.meta.id === article.topics[0]) as ITopicView]);\n            } else {\n                content.push([article, null]);\n            }\n        });\n        return { ...page, content };\n    })) : of({ ...page, content: [] });\n}\n","import { BehaviorSubject, Subject, Observable } from 'rxjs';\nimport { IPageResponse } from '@api/schemas/page/page-response.interface';\nimport { debounce, filter, first, tap, mapTo } from 'rxjs/operators';\n\nexport const NO_CONTENT = Symbol('NO_CONTENT');\n\nexport class PageableContent<T, O = any> {\n  public readonly isFetching$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  public readonly content$: Subject<T[]> = new Subject<T[]>();\n  public readonly options$: BehaviorSubject<O>;\n  public readonly end$ = new Subject();\n\n  public content: T[] = [];\n  public page = -1;\n  public totalPages = 1;\n\n  private readonly fetchCommand$: Subject<never> = new Subject<never>();\n\n  constructor(\n    private readonly fetchNextFn$: (page: number, options: O) => Observable<IPageResponse<T>>,\n    options: O = null\n  ) {\n    this.options$ = new BehaviorSubject<O>(options);\n    this.fetchCommand$.pipe(debounce(() => this.isFetching$.pipe(filter((_: boolean) => !_)))).subscribe(() => this.fetchNextPage());\n  }\n\n  public fetch(): void {\n    if (this.page < this.totalPages - 1) {\n      this.fetchCommand$.next();\n    }\n  }\n\n  public reset$(hard: boolean = true): Observable<any> {\n    return this.isFetching$.pipe(\n      filter((it: boolean) => !it),\n      first(),\n      tap(() => {\n        if (hard) {\n          this.content.splice(0, this.content.length);\n        }\n        this.page = -1;\n        this.totalPages = 1;\n      }),\n    );\n  }\n\n  public setOptionsWithReset$(options: O, hard: boolean = true): Observable<O> {\n    return this.reset$(hard).pipe(\n      tap(() => {\n        this.options$.next(options);\n        this.fetch();\n      }),\n      mapTo(options),\n    );\n  }\n\n  private fetchNextPage(): void {\n    this.isFetching$.next(true);\n    this.fetchNextFn$(this.page + 1, this.options$.value).subscribe(\n      (response: IPageResponse<T>) => {\n        this.page = response.page;\n        this.totalPages = response.totalPages;\n        this.content$.next(response.content);\n        if (this.page >= this.totalPages - 1) {\n          this.end$.next();\n        }\n        this.content.push(...response.content);\n        this.isFetching$.next(false);\n      },\n      (error: any) => {\n        this.isFetching$.next(false);\n        if (error !== Symbol('NO_CONTENT')) {\n          throw error;\n        }\n      },\n    );\n  }\n}\n"],"sourceRoot":"webpack:///"}